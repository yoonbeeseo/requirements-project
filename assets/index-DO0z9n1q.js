(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var E_={exports:{}},Fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function gP(){if(kb)return Fc;kb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Fc.Fragment=e,Fc.jsx=t,Fc.jsxs=t,Fc}var Mb;function _P(){return Mb||(Mb=1,E_.exports=gP()),E_.exports}var $=_P(),T_={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function yP(){if(Lb)return Ve;Lb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,M={};function U(O,ae,Te){this.props=O,this.context=ae,this.refs=M,this.updater=Te||R}U.prototype.isReactComponent={},U.prototype.setState=function(O,ae){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ae,"setState")},U.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function G(){}G.prototype=U.prototype;function J(O,ae,Te){this.props=O,this.context=ae,this.refs=M,this.updater=Te||R}var Y=J.prototype=new G;Y.constructor=J,N(Y,U.prototype),Y.isPureReactComponent=!0;var de=Array.isArray,le={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function C(O,ae,Te,pe,me,De){return Te=De.ref,{$$typeof:n,type:O,key:ae,ref:Te!==void 0?Te:null,props:De}}function S(O,ae){return C(O.type,ae,void 0,void 0,void 0,O.props)}function A(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function x(O){var ae={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Te){return ae[Te]})}var V=/\/+/g;function z(O,ae){return typeof O=="object"&&O!==null&&O.key!=null?x(""+O.key):ae.toString(36)}function P(){}function $e(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(P,P):(O.status="pending",O.then(function(ae){O.status==="pending"&&(O.status="fulfilled",O.value=ae)},function(ae){O.status==="pending"&&(O.status="rejected",O.reason=ae)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Je(O,ae,Te,pe,me){var De=typeof O;(De==="undefined"||De==="boolean")&&(O=null);var xe=!1;if(O===null)xe=!0;else switch(De){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(O.$$typeof){case n:case e:xe=!0;break;case y:return xe=O._init,Je(xe(O._payload),ae,Te,pe,me)}}if(xe)return me=me(O),xe=pe===""?"."+z(O,0):pe,de(me)?(Te="",xe!=null&&(Te=xe.replace(V,"$&/")+"/"),Je(me,ae,Te,"",function(It){return It})):me!=null&&(A(me)&&(me=S(me,Te+(me.key==null||O&&O.key===me.key?"":(""+me.key).replace(V,"$&/")+"/")+xe)),ae.push(me)),1;xe=0;var ct=pe===""?".":pe+":";if(de(O))for(var Qe=0;Qe<O.length;Qe++)pe=O[Qe],De=ct+z(pe,Qe),xe+=Je(pe,ae,Te,De,me);else if(Qe=w(O),typeof Qe=="function")for(O=Qe.call(O),Qe=0;!(pe=O.next()).done;)pe=pe.value,De=ct+z(pe,Qe++),xe+=Je(pe,ae,Te,De,me);else if(De==="object"){if(typeof O.then=="function")return Je($e(O),ae,Te,pe,me);throw ae=String(O),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ne(O,ae,Te){if(O==null)return O;var pe=[],me=0;return Je(O,pe,"","",function(De){return ae.call(Te,De,me++)}),pe}function Ae(O){if(O._status===-1){var ae=O._result;ae=ae(),ae.then(function(Te){(O._status===0||O._status===-1)&&(O._status=1,O._result=Te)},function(Te){(O._status===0||O._status===-1)&&(O._status=2,O._result=Te)}),O._status===-1&&(O._status=0,O._result=ae)}if(O._status===1)return O._result.default;throw O._result}var he=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ce(){}return Ve.Children={map:ne,forEach:function(O,ae,Te){ne(O,function(){ae.apply(this,arguments)},Te)},count:function(O){var ae=0;return ne(O,function(){ae++}),ae},toArray:function(O){return ne(O,function(ae){return ae})||[]},only:function(O){if(!A(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ve.Component=U,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=J,Ve.StrictMode=r,Ve.Suspense=m,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ve.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cloneElement=function(O,ae,Te){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=N({},O.props),me=O.key,De=void 0;if(ae!=null)for(xe in ae.ref!==void 0&&(De=void 0),ae.key!==void 0&&(me=""+ae.key),ae)!te.call(ae,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ae.ref===void 0||(pe[xe]=ae[xe]);var xe=arguments.length-2;if(xe===1)pe.children=Te;else if(1<xe){for(var ct=Array(xe),Qe=0;Qe<xe;Qe++)ct[Qe]=arguments[Qe+2];pe.children=ct}return C(O.type,me,void 0,void 0,De,pe)},Ve.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ve.createElement=function(O,ae,Te){var pe,me={},De=null;if(ae!=null)for(pe in ae.key!==void 0&&(De=""+ae.key),ae)te.call(ae,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(me[pe]=ae[pe]);var xe=arguments.length-2;if(xe===1)me.children=Te;else if(1<xe){for(var ct=Array(xe),Qe=0;Qe<xe;Qe++)ct[Qe]=arguments[Qe+2];me.children=ct}if(O&&O.defaultProps)for(pe in xe=O.defaultProps,xe)me[pe]===void 0&&(me[pe]=xe[pe]);return C(O,De,void 0,void 0,null,me)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:d,render:O}},Ve.isValidElement=A,Ve.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:Ae}},Ve.memo=function(O,ae){return{$$typeof:p,type:O,compare:ae===void 0?null:ae}},Ve.startTransition=function(O){var ae=le.T,Te={};le.T=Te;try{var pe=O(),me=le.S;me!==null&&me(Te,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Ce,he)}catch(De){he(De)}finally{le.T=ae}},Ve.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ve.use=function(O){return le.H.use(O)},Ve.useActionState=function(O,ae,Te){return le.H.useActionState(O,ae,Te)},Ve.useCallback=function(O,ae){return le.H.useCallback(O,ae)},Ve.useContext=function(O){return le.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,ae){return le.H.useDeferredValue(O,ae)},Ve.useEffect=function(O,ae){return le.H.useEffect(O,ae)},Ve.useId=function(){return le.H.useId()},Ve.useImperativeHandle=function(O,ae,Te){return le.H.useImperativeHandle(O,ae,Te)},Ve.useInsertionEffect=function(O,ae){return le.H.useInsertionEffect(O,ae)},Ve.useLayoutEffect=function(O,ae){return le.H.useLayoutEffect(O,ae)},Ve.useMemo=function(O,ae){return le.H.useMemo(O,ae)},Ve.useOptimistic=function(O,ae){return le.H.useOptimistic(O,ae)},Ve.useReducer=function(O,ae,Te){return le.H.useReducer(O,ae,Te)},Ve.useRef=function(O){return le.H.useRef(O)},Ve.useState=function(O){return le.H.useState(O)},Ve.useSyncExternalStore=function(O,ae,Te){return le.H.useSyncExternalStore(O,ae,Te)},Ve.useTransition=function(){return le.H.useTransition()},Ve.version="19.0.0",Ve}var Ub;function Fy(){return Ub||(Ub=1,T_.exports=yP()),T_.exports}var q=Fy(),w_={exports:{}},jc={},b_={exports:{}},I_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function vP(){return zb||(zb=1,function(n){function e(ne,Ae){var he=ne.length;ne.push(Ae);e:for(;0<he;){var Ce=he-1>>>1,O=ne[Ce];if(0<a(O,Ae))ne[Ce]=Ae,ne[he]=O,he=Ce;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var Ae=ne[0],he=ne.pop();if(he!==Ae){ne[0]=he;e:for(var Ce=0,O=ne.length,ae=O>>>1;Ce<ae;){var Te=2*(Ce+1)-1,pe=ne[Te],me=Te+1,De=ne[me];if(0>a(pe,he))me<O&&0>a(De,pe)?(ne[Ce]=De,ne[me]=he,Ce=me):(ne[Ce]=pe,ne[Te]=he,Ce=Te);else if(me<O&&0>a(De,he))ne[Ce]=De,ne[me]=he,Ce=me;else break e}}return Ae}function a(ne,Ae){var he=ne.sortIndex-Ae.sortIndex;return he!==0?he:ne.id-Ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],p=[],y=1,v=null,w=3,R=!1,N=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function Y(ne){for(var Ae=t(p);Ae!==null;){if(Ae.callback===null)r(p);else if(Ae.startTime<=ne)r(p),Ae.sortIndex=Ae.expirationTime,e(m,Ae);else break;Ae=t(p)}}function de(ne){if(M=!1,Y(ne),!N)if(t(m)!==null)N=!0,$e();else{var Ae=t(p);Ae!==null&&Je(de,Ae.startTime-ne)}}var le=!1,te=-1,C=5,S=-1;function A(){return!(n.unstable_now()-S<C)}function x(){if(le){var ne=n.unstable_now();S=ne;var Ae=!0;try{e:{N=!1,M&&(M=!1,G(te),te=-1),R=!0;var he=w;try{t:{for(Y(ne),v=t(m);v!==null&&!(v.expirationTime>ne&&A());){var Ce=v.callback;if(typeof Ce=="function"){v.callback=null,w=v.priorityLevel;var O=Ce(v.expirationTime<=ne);if(ne=n.unstable_now(),typeof O=="function"){v.callback=O,Y(ne),Ae=!0;break t}v===t(m)&&r(m),Y(ne)}else r(m);v=t(m)}if(v!==null)Ae=!0;else{var ae=t(p);ae!==null&&Je(de,ae.startTime-ne),Ae=!1}}break e}finally{v=null,w=he,R=!1}Ae=void 0}}finally{Ae?V():le=!1}}}var V;if(typeof J=="function")V=function(){J(x)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,P=z.port2;z.port1.onmessage=x,V=function(){P.postMessage(null)}}else V=function(){U(x,0)};function $e(){le||(le=!0,V())}function Je(ne,Ae){te=U(function(){ne(n.unstable_now())},Ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){N||R||(N=!0,$e())},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(ne){switch(w){case 1:case 2:case 3:var Ae=3;break;default:Ae=w}var he=w;w=Ae;try{return ne()}finally{w=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,Ae){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var he=w;w=ne;try{return Ae()}finally{w=he}},n.unstable_scheduleCallback=function(ne,Ae,he){var Ce=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ce+he:Ce):he=Ce,ne){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=he+O,ne={id:y++,callback:Ae,priorityLevel:ne,startTime:he,expirationTime:O,sortIndex:-1},he>Ce?(ne.sortIndex=he,e(p,ne),t(m)===null&&ne===t(p)&&(M?(G(te),te=-1):M=!0,Je(de,he-Ce))):(ne.sortIndex=O,e(m,ne),N||R||(N=!0,$e())),ne},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(ne){var Ae=w;return function(){var he=w;w=Ae;try{return ne.apply(this,arguments)}finally{w=he}}}}(I_)),I_}var Bb;function EP(){return Bb||(Bb=1,b_.exports=vP()),b_.exports}var A_={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function TP(){if(Fb)return yn;Fb=1;var n=Fy();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},yn.flushSync=function(m){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,m)return m()}finally{u.T=p,r.p=y,r.d.f()}},yn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},yn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},yn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:R}):y==="script"&&r.d.X(m,{crossOrigin:v,integrity:w,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},yn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);r.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},yn.requestFormReset=function(m){r.d.r(m)},yn.unstable_batchedUpdates=function(m,p){return m(p)},yn.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},yn.version="19.0.0",yn}var jb;function wP(){if(jb)return A_.exports;jb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),A_.exports=TP(),A_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb;function bP(){if(qb)return jc;qb=1;var n=EP(),e=Fy(),t=wP();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),de=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function te(i){return i===null||typeof i!="object"?null:(i=le&&i[le]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function S(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case m:return"Fragment";case d:return"Portal";case y:return"Profiler";case p:return"StrictMode";case M:return"Suspense";case U:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case R:return(i.displayName||"Context")+".Provider";case w:return(i._context.displayName||"Context")+".Consumer";case N:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case G:return s=i.displayName||null,s!==null?s:S(i.type)||"Memo";case J:s=i._payload,i=i._init;try{return S(i(s))}catch{}}return null}var A=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=Object.assign,V,z;function P(i){if(V===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||"",z=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+i+z}var $e=!1;function Je(i,s){if(!i||$e)return"";$e=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var K=X}Reflect.construct(i,[],ie)}else{try{ie.call()}catch(X){K=X}i.call(ie.prototype)}}else{try{throw Error()}catch(X){K=X}(ie=i())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],b=g[1];if(T&&b){var D=T.split(`
`),L=b.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<L.length&&!L[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===L.length)for(c=D.length-1,f=L.length-1;1<=c&&0<=f&&D[c]!==L[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==L[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==L[f]){var Z=`
`+D[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=f);break}}}finally{$e=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?P(o):""}function ne(i){switch(i.tag){case 26:case 27:case 5:return P(i.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return i=Je(i.type,!1),i;case 11:return i=Je(i.type.render,!1),i;case 1:return i=Je(i.type,!0),i;default:return""}}function Ae(i){try{var s="";do s+=ne(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function he(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function Ce(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function O(i){if(he(i)!==i)throw Error(r(188))}function ae(i){var s=i.alternate;if(!s){if(s=he(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,c=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return O(f),i;if(g===c)return O(f),s;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=g;else{for(var T=!1,b=f.child;b;){if(b===o){T=!0,o=f,c=g;break}if(b===c){T=!0,c=f,o=g;break}b=b.sibling}if(!T){for(b=g.child;b;){if(b===o){T=!0,o=g,c=f;break}if(b===c){T=!0,c=g,o=f;break}b=b.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function Te(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=Te(i),s!==null)return s;i=i.sibling}return null}var pe=Array.isArray,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},xe=[],ct=-1;function Qe(i){return{current:i}}function It(i){0>ct||(i.current=xe[ct],xe[ct]=null,ct--)}function tt(i,s){ct++,xe[ct]=i.current,i.current=s}var bn=Qe(null),hi=Qe(null),Zn=Qe(null),is=Qe(null);function ss(i,s){switch(tt(Zn,s),tt(hi,i),tt(bn,null),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?cb(s):0;break;default:if(i=i===8?s.parentNode:s,s=i.tagName,i=i.namespaceURI)i=cb(i),s=hb(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}It(bn),tt(bn,s)}function di(){It(bn),It(hi),It(Zn)}function Mu(i){i.memoizedState!==null&&tt(is,i);var s=bn.current,o=hb(s,i.type);s!==o&&(tt(hi,i),tt(bn,o))}function Bo(i){hi.current===i&&(It(bn),It(hi)),is.current===i&&(It(is),Mc._currentValue=De)}var Fo=Object.prototype.hasOwnProperty,Aa=n.unstable_scheduleCallback,jo=n.unstable_cancelCallback,wp=n.unstable_shouldYield,Lu=n.unstable_requestPaint,Vn=n.unstable_now,fd=n.unstable_getCurrentPriorityLevel,jt=n.unstable_ImmediatePriority,Yt=n.unstable_UserBlockingPriority,fi=n.unstable_NormalPriority,md=n.unstable_LowPriority,Uu=n.unstable_IdlePriority,bp=n.log,Sa=n.unstable_setDisableYieldValue,as=null,gn=null;function zu(i){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(as,i,void 0,(i.current.flags&128)===128)}catch{}}function xr(i){if(typeof bp=="function"&&Sa(i),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(as,i)}catch{}}var In=Math.clz32?Math.clz32:gd,Bu=Math.log,pd=Math.LN2;function gd(i){return i>>>=0,i===0?32:31-(Bu(i)/pd|0)|0}var Pr=128,os=4194304;function yr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Jn(i,s){var o=i.pendingLanes;if(o===0)return 0;var c=0,f=i.suspendedLanes,g=i.pingedLanes,T=i.warmLanes;i=i.finishedLanes!==0;var b=o&134217727;return b!==0?(o=b&~f,o!==0?c=yr(o):(g&=b,g!==0?c=yr(g):i||(T=b&~T,T!==0&&(c=yr(T))))):(b=o&~f,b!==0?c=yr(b):g!==0?c=yr(g):i||(T=o&~T,T!==0&&(c=yr(T)))),c===0?0:s!==0&&s!==c&&(s&f)===0&&(f=c&-c,T=s&-s,f>=T||f===32&&(T&4194176)!==0)?s:c}function ls(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function qo(i,s){switch(i){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fu(){var i=Pr;return Pr<<=1,(Pr&4194176)===0&&(Pr=128),i}function us(){var i=os;return os<<=1,(os&62914560)===0&&(os=4194304),i}function Ho(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Nt(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function _d(i,s,o,c,f,g){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,D=i.expirationTimes,L=i.hiddenUpdates;for(o=T&~o;0<o;){var Z=31-In(o),ie=1<<Z;b[Z]=0,D[Z]=-1;var K=L[Z];if(K!==null)for(L[Z]=null,Z=0;Z<K.length;Z++){var X=K[Z];X!==null&&(X.lane&=-536870913)}o&=~ie}c!==0&&cs(i,c,0),g!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~s))}function cs(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-In(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|o&4194218}function hs(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var c=31-In(o),f=1<<c;f&s|i[c]&s&&(i[c]|=s),o&=~f}}function yd(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vd(){var i=me.p;return i!==0?i:(i=window.event,i===void 0?32:Db(i.type))}function ds(i,s){var o=me.p;try{return me.p=i,s()}finally{me.p=o}}var Nr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Nr,qt="__reactProps$"+Nr,mi="__reactContainer$"+Nr,Ra="__reactEvents$"+Nr,Go="__reactListeners$"+Nr,Or="__reactHandles$"+Nr,ju="__reactResources$"+Nr,fs="__reactMarker$"+Nr;function Ca(i){delete i[Xt],delete i[qt],delete i[Ra],delete i[Go],delete i[Or]}function vr(i){var s=i[Xt];if(s)return s;for(var o=i.parentNode;o;){if(s=o[mi]||o[Xt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=mb(i);i!==null;){if(o=i[Xt])return o;i=mb(i)}return s}i=o,o=i.parentNode}return null}function pi(i){if(i=i[Xt]||i[mi]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ms(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function ps(i){var s=i[ju];return s||(s=i[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function _t(i){i[fs]=!0}var qu=new Set,Ko={};function Fn(i,s){kn(i,s),kn(i+"Capture",s)}function kn(i,s){for(Ko[i]=s,i=0;i<s.length;i++)qu.add(s[i])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ip=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hu={},Gu={};function Ed(i){return Fo.call(Gu,i)?!0:Fo.call(Hu,i)?!1:Ip.test(i)?Gu[i]=!0:(Hu[i]=!0,!1)}function gs(i,s,o){if(Ed(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function _s(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function er(i,s,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+c)}}function An(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Td(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ap(i){var s=Td(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Da(i){i._valueTracker||(i._valueTracker=Ap(i))}function Ku(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return i&&(c=Td(i)?i.checked?"true":"false":i.value),i=c,i!==o?(s.setValue(i),!0):!1}function $o(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var gi=/[\n"\\]/g;function At(i){return i.replace(gi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ys(i,s,o,c,f,g,T,b){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+An(s)):i.value!==""+An(s)&&(i.value=""+An(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?Qo(i,T,An(s)):o!=null?Qo(i,T,An(o)):c!=null&&i.removeAttribute("value"),f==null&&g!=null&&(i.defaultChecked=!!g),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+An(b):i.removeAttribute("name")}function xa(i,s,o,c,f,g,T,b){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+An(o):"",s=s!=null?""+An(s):o,b||s===i.value||(i.value=s),i.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=b?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Qo(i,s,o){s==="number"&&$o(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function We(i,s,o,c){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&c&&(i[o].defaultSelected=!0)}else{for(o=""+An(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,c&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function Pa(i,s,o){if(s!=null&&(s=""+An(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+An(o):""}function vs(i,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(pe(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=An(s),i.defaultValue=o,c=i.textContent,c===o&&c!==""&&c!==null&&(i.value=c)}function tr(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Sp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $u(i,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,o):typeof o!="number"||o===0||Sp.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function wd(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&o[f]!==c&&$u(i,f,c)}else for(var g in s)s.hasOwnProperty(g)&&$u(i,g,s[g])}function Qu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vr(i){return Cp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var nr=null;function Wo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _i=null,yi=null;function vi(i){var s=pi(i);if(s&&(i=s.stateNode)){var o=i[qt]||null;e:switch(i=s.stateNode,s.type){case"input":if(ys(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+At(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==i&&c.form===i.form){var f=c[qt]||null;if(!f)throw Error(r(90));ys(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===i.form&&Ku(c)}break e;case"textarea":Pa(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&We(i,!!o.multiple,s,!1)}}}var Wu=!1;function bd(i,s,o){if(Wu)return i(s,o);Wu=!0;try{var c=i(s);return c}finally{if(Wu=!1,(_i!==null||yi!==null)&&(pf(),_i&&(s=_i,i=yi,yi=_i=null,vi(s),i)))for(s=0;s<i.length;s++)vi(i[s])}}function Na(i,s){var o=i.stateNode;if(o===null)return null;var c=o[qt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var rr=!1;if(jn)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){rr=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{rr=!1}var kr=null,Es=null,Ei=null;function Yu(){if(Ei)return Ei;var i,s=Es,o=s.length,c,f="value"in kr?kr.value:kr.textContent,g=f.length;for(i=0;i<o&&s[i]===f[i];i++);var T=o-i;for(c=1;c<=T&&s[o-c]===f[g-c];c++);return Ei=f.slice(i,1<c?1-c:void 0)}function Mr(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Lr(){return!0}function Xu(){return!1}function Zt(i){function s(o,c,f,g,T){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(g):g[b]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Lr:Xu,this.isPropagationStopped=Xu,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),s}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=Zt(et),Va=x({},et,{view:0,detail:0}),Id=Zt(Va),Xo,Zo,Ur,ka=x({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ur&&(Ur&&i.type==="mousemove"?(Xo=i.screenX-Ur.screenX,Zo=i.screenY-Ur.screenY):Zo=Xo=0,Ur=i),Xo)},movementY:function(i){return"movementY"in i?i.movementY:Zo}}),ir=Zt(ka),Ad=x({},ka,{dataTransfer:0}),Dp=Zt(Ad),Ma=x({},Va,{relatedTarget:0}),Jo=Zt(Ma),Zu=x({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),el=Zt(Zu),Sd=x({},et,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),tl=Zt(Sd),xp=x({},et,{data:0}),Ju=Zt(xp),La={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Cd[i])?!!s[i]:!1}function Ua(){return ec}var Dd=x({},Va,{key:function(i){if(i.key){var s=La[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Mr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(i){return i.type==="keypress"?Mr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Mr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),nl=Zt(Dd),xd=x({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tc=Zt(xd),Ti=x({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),Pd=Zt(Ti),Nd=x({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Od=Zt(Nd),Vd=x({},ka,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rl=Zt(Vd),Sn=x({},et,{newState:0,oldState:0}),kd=Zt(Sn),Md=[9,13,27,32],zr=jn&&"CompositionEvent"in window,h=null;jn&&"documentMode"in document&&(h=document.documentMode);var _=jn&&"TextEvent"in window&&!h,E=jn&&(!zr||h&&8<h&&11>=h),I=" ",F=!1;function W(i,s){switch(i){case"keyup":return Md.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qe=!1;function Ht(i,s){switch(i){case"compositionend":return ue(s);case"keypress":return s.which!==32?null:(F=!0,I);case"textInput":return i=s.data,i===I&&F?null:i;default:return null}}function He(i,s){if(qe)return i==="compositionend"||!zr&&W(i,s)?(i=Yu(),Ei=Es=kr=null,qe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Jt[i.type]:s==="textarea"}function wi(i,s,o,c){_i?yi?yi.push(c):yi=[c]:_i=c,s=Ef(s,"onChange"),0<s.length&&(o=new Yo("onChange","change",null,o,c),i.push({event:o,listeners:s}))}var ln=null,Br=null;function nc(i){sb(i,0)}function Ld(i){var s=ms(i);if(Ku(s))return i}function VE(i,s){if(i==="change")return s}var kE=!1;if(jn){var Pp;if(jn){var Np="oninput"in document;if(!Np){var ME=document.createElement("div");ME.setAttribute("oninput","return;"),Np=typeof ME.oninput=="function"}Pp=Np}else Pp=!1;kE=Pp&&(!document.documentMode||9<document.documentMode)}function LE(){ln&&(ln.detachEvent("onpropertychange",UE),Br=ln=null)}function UE(i){if(i.propertyName==="value"&&Ld(Br)){var s=[];wi(s,Br,i,Wo(i)),bd(nc,s)}}function KD(i,s,o){i==="focusin"?(LE(),ln=s,Br=o,ln.attachEvent("onpropertychange",UE)):i==="focusout"&&LE()}function $D(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ld(Br)}function QD(i,s){if(i==="click")return Ld(s)}function WD(i,s){if(i==="input"||i==="change")return Ld(s)}function YD(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var qn=typeof Object.is=="function"?Object.is:YD;function rc(i,s){if(qn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Fo.call(s,f)||!qn(i[f],s[f]))return!1}return!0}function zE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function BE(i,s){var o=zE(i);i=0;for(var c;o;){if(o.nodeType===3){if(c=i+o.textContent.length,i<=s&&c>=s)return{node:o,offset:s-i};i=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zE(o)}}function FE(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?FE(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function jE(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=$o(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=$o(i.document)}return s}function Op(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function XD(i,s){var o=jE(s);s=i.focusedElem;var c=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&FE(s.ownerDocument.documentElement,s)){if(c!==null&&Op(s)){if(i=c.start,o=c.end,o===void 0&&(o=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(o,s.value.length);else if(o=(i=s.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var f=s.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!o.extend&&g>c&&(f=c,c=g,g=f),f=BE(s,g);var T=BE(s,c);f&&T&&(o.rangeCount!==1||o.anchorNode!==f.node||o.anchorOffset!==f.offset||o.focusNode!==T.node||o.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),o.removeAllRanges(),g>c?(o.addRange(i),o.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),o.addRange(i)))}}for(i=[],o=s;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)o=i[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ZD=jn&&"documentMode"in document&&11>=document.documentMode,il=null,Vp=null,ic=null,kp=!1;function qE(i,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;kp||il==null||il!==$o(c)||(c=il,"selectionStart"in c&&Op(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ic&&rc(ic,c)||(ic=c,c=Ef(Vp,"onSelect"),0<c.length&&(s=new Yo("onSelect","select",null,s,o),i.push({event:s,listeners:c}),s.target=il)))}function za(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var sl={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionrun:za("Transition","TransitionRun"),transitionstart:za("Transition","TransitionStart"),transitioncancel:za("Transition","TransitionCancel"),transitionend:za("Transition","TransitionEnd")},Mp={},HE={};jn&&(HE=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function Ba(i){if(Mp[i])return Mp[i];if(!sl[i])return i;var s=sl[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in HE)return Mp[i]=s[o];return i}var GE=Ba("animationend"),KE=Ba("animationiteration"),$E=Ba("animationstart"),JD=Ba("transitionrun"),ex=Ba("transitionstart"),tx=Ba("transitioncancel"),QE=Ba("transitionend"),WE=new Map,YE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Er(i,s){WE.set(i,s),Fn(s,[i])}var sr=[],al=0,Lp=0;function Ud(){for(var i=al,s=Lp=al=0;s<i;){var o=sr[s];sr[s++]=null;var c=sr[s];sr[s++]=null;var f=sr[s];sr[s++]=null;var g=sr[s];if(sr[s++]=null,c!==null&&f!==null){var T=c.pending;T===null?f.next=f:(f.next=T.next,T.next=f),c.pending=f}g!==0&&XE(o,f,g)}}function zd(i,s,o,c){sr[al++]=i,sr[al++]=s,sr[al++]=o,sr[al++]=c,Lp|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Up(i,s,o,c){return zd(i,s,o,c),Bd(i)}function Ts(i,s){return zd(i,null,null,s),Bd(i)}function XE(i,s,o){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=i.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(f=!0)),i=g,g=g.return;f&&s!==null&&i.tag===3&&(g=i.stateNode,f=31-In(o),g=g.hiddenUpdates,i=g[f],i===null?g[f]=[s]:i.push(s),s.lane=o|536870912)}function Bd(i){if(50<Dc)throw Dc=0,Hg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ol={},ZE=new WeakMap;function ar(i,s){if(typeof i=="object"&&i!==null){var o=ZE.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Ae(s)},ZE.set(i,s),s)}return{value:i,source:s,stack:Ae(s)}}var ll=[],ul=0,Fd=null,jd=0,or=[],lr=0,Fa=null,bi=1,Ii="";function ja(i,s){ll[ul++]=jd,ll[ul++]=Fd,Fd=i,jd=s}function JE(i,s,o){or[lr++]=bi,or[lr++]=Ii,or[lr++]=Fa,Fa=i;var c=bi;i=Ii;var f=32-In(c)-1;c&=~(1<<f),o+=1;var g=32-In(s)+f;if(30<g){var T=f-f%5;g=(c&(1<<T)-1).toString(32),c>>=T,f-=T,bi=1<<32-In(s)+f|o<<f|c,Ii=g+i}else bi=1<<g|o<<f|c,Ii=i}function zp(i){i.return!==null&&(ja(i,1),JE(i,1,0))}function Bp(i){for(;i===Fd;)Fd=ll[--ul],ll[ul]=null,jd=ll[--ul],ll[ul]=null;for(;i===Fa;)Fa=or[--lr],or[lr]=null,Ii=or[--lr],or[lr]=null,bi=or[--lr],or[lr]=null}var Rn=null,un=null,Ye=!1,Tr=null,Fr=!1,Fp=Error(r(519));function qa(i){var s=Error(r(418,""));throw oc(ar(s,i)),Fp}function eT(i){var s=i.stateNode,o=i.type,c=i.memoizedProps;switch(s[Xt]=i,s[qt]=c,o){case"dialog":je("cancel",s),je("close",s);break;case"iframe":case"object":case"embed":je("load",s);break;case"video":case"audio":for(o=0;o<Pc.length;o++)je(Pc[o],s);break;case"source":je("error",s);break;case"img":case"image":case"link":je("error",s),je("load",s);break;case"details":je("toggle",s);break;case"input":je("invalid",s),xa(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Da(s);break;case"select":je("invalid",s);break;case"textarea":je("invalid",s),vs(s,c.value,c.defaultValue,c.children),Da(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||ub(s.textContent,o)?(c.popover!=null&&(je("beforetoggle",s),je("toggle",s)),c.onScroll!=null&&je("scroll",s),c.onScrollEnd!=null&&je("scrollend",s),c.onClick!=null&&(s.onclick=Tf),s=!0):s=!1,s||qa(i)}function tT(i){for(Rn=i.return;Rn;)switch(Rn.tag){case 3:case 27:Fr=!0;return;case 5:case 13:Fr=!1;return;default:Rn=Rn.return}}function sc(i){if(i!==Rn)return!1;if(!Ye)return tT(i),Ye=!0,!1;var s=!1,o;if((o=i.tag!==3&&i.tag!==27)&&((o=i.tag===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||o_(i.type,i.memoizedProps)),o=!o),o&&(s=!0),s&&un&&qa(i),tT(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){un=br(i.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}un=null}}else un=Rn?br(i.stateNode.nextSibling):null;return!0}function ac(){un=Rn=null,Ye=!1}function oc(i){Tr===null?Tr=[i]:Tr.push(i)}var lc=Error(r(460)),nT=Error(r(474)),jp={then:function(){}};function rT(i){return i=i.status,i==="fulfilled"||i==="rejected"}function qd(){}function iT(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(qd,qd),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===lc?Error(r(483)):i;default:if(typeof s.status=="string")s.then(qd,qd);else{if(i=ot,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===lc?Error(r(483)):i}throw uc=s,lc}}var uc=null;function sT(){if(uc===null)throw Error(r(459));var i=uc;return uc=null,i}var cl=null,cc=0;function Hd(i){var s=cc;return cc+=1,cl===null&&(cl=[]),iT(cl,i,s)}function hc(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Gd(i,s){throw s.$$typeof===l?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function aT(i){var s=i._init;return s(i._payload)}function oT(i){function s(B,k){if(i){var H=B.deletions;H===null?(B.deletions=[k],B.flags|=16):H.push(k)}}function o(B,k){if(!i)return null;for(;k!==null;)s(B,k),k=k.sibling;return null}function c(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function f(B,k){return B=Os(B,k),B.index=0,B.sibling=null,B}function g(B,k,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<k?(B.flags|=33554434,k):H):(B.flags|=33554434,k)):(B.flags|=1048576,k)}function T(B){return i&&B.alternate===null&&(B.flags|=33554434),B}function b(B,k,H,ee){return k===null||k.tag!==6?(k=Mg(H,B.mode,ee),k.return=B,k):(k=f(k,H),k.return=B,k)}function D(B,k,H,ee){var _e=H.type;return _e===m?Z(B,k,H.props.children,ee,H.key):k!==null&&(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===J&&aT(_e)===k.type)?(k=f(k,H.props),hc(k,H),k.return=B,k):(k=cf(H.type,H.key,H.props,null,B.mode,ee),hc(k,H),k.return=B,k)}function L(B,k,H,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Lg(H,B.mode,ee),k.return=B,k):(k=f(k,H.children||[]),k.return=B,k)}function Z(B,k,H,ee,_e){return k===null||k.tag!==7?(k=Ja(H,B.mode,ee,_e),k.return=B,k):(k=f(k,H),k.return=B,k)}function ie(B,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Mg(""+k,B.mode,H),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case u:return H=cf(k.type,k.key,k.props,null,B.mode,H),hc(H,k),H.return=B,H;case d:return k=Lg(k,B.mode,H),k.return=B,k;case J:var ee=k._init;return k=ee(k._payload),ie(B,k,H)}if(pe(k)||te(k))return k=Ja(k,B.mode,H,null),k.return=B,k;if(typeof k.then=="function")return ie(B,Hd(k),H);if(k.$$typeof===R)return ie(B,of(B,k),H);Gd(B,k)}return null}function K(B,k,H,ee){var _e=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:b(B,k,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case u:return H.key===_e?D(B,k,H,ee):null;case d:return H.key===_e?L(B,k,H,ee):null;case J:return _e=H._init,H=_e(H._payload),K(B,k,H,ee)}if(pe(H)||te(H))return _e!==null?null:Z(B,k,H,ee,null);if(typeof H.then=="function")return K(B,k,Hd(H),ee);if(H.$$typeof===R)return K(B,k,of(B,H),ee);Gd(B,H)}return null}function X(B,k,H,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(H)||null,b(k,B,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case u:return B=B.get(ee.key===null?H:ee.key)||null,D(k,B,ee,_e);case d:return B=B.get(ee.key===null?H:ee.key)||null,L(k,B,ee,_e);case J:var Me=ee._init;return ee=Me(ee._payload),X(B,k,H,ee,_e)}if(pe(ee)||te(ee))return B=B.get(H)||null,Z(k,B,ee,_e,null);if(typeof ee.then=="function")return X(B,k,H,Hd(ee),_e);if(ee.$$typeof===R)return X(B,k,H,of(k,ee),_e);Gd(k,ee)}return null}function we(B,k,H,ee){for(var _e=null,Me=null,Ie=k,Re=k=0,nn=null;Ie!==null&&Re<H.length;Re++){Ie.index>Re?(nn=Ie,Ie=null):nn=Ie.sibling;var Xe=K(B,Ie,H[Re],ee);if(Xe===null){Ie===null&&(Ie=nn);break}i&&Ie&&Xe.alternate===null&&s(B,Ie),k=g(Xe,k,Re),Me===null?_e=Xe:Me.sibling=Xe,Me=Xe,Ie=nn}if(Re===H.length)return o(B,Ie),Ye&&ja(B,Re),_e;if(Ie===null){for(;Re<H.length;Re++)Ie=ie(B,H[Re],ee),Ie!==null&&(k=g(Ie,k,Re),Me===null?_e=Ie:Me.sibling=Ie,Me=Ie);return Ye&&ja(B,Re),_e}for(Ie=c(Ie);Re<H.length;Re++)nn=X(Ie,B,Re,H[Re],ee),nn!==null&&(i&&nn.alternate!==null&&Ie.delete(nn.key===null?Re:nn.key),k=g(nn,k,Re),Me===null?_e=nn:Me.sibling=nn,Me=nn);return i&&Ie.forEach(function(Bs){return s(B,Bs)}),Ye&&ja(B,Re),_e}function Ne(B,k,H,ee){if(H==null)throw Error(r(151));for(var _e=null,Me=null,Ie=k,Re=k=0,nn=null,Xe=H.next();Ie!==null&&!Xe.done;Re++,Xe=H.next()){Ie.index>Re?(nn=Ie,Ie=null):nn=Ie.sibling;var Bs=K(B,Ie,Xe.value,ee);if(Bs===null){Ie===null&&(Ie=nn);break}i&&Ie&&Bs.alternate===null&&s(B,Ie),k=g(Bs,k,Re),Me===null?_e=Bs:Me.sibling=Bs,Me=Bs,Ie=nn}if(Xe.done)return o(B,Ie),Ye&&ja(B,Re),_e;if(Ie===null){for(;!Xe.done;Re++,Xe=H.next())Xe=ie(B,Xe.value,ee),Xe!==null&&(k=g(Xe,k,Re),Me===null?_e=Xe:Me.sibling=Xe,Me=Xe);return Ye&&ja(B,Re),_e}for(Ie=c(Ie);!Xe.done;Re++,Xe=H.next())Xe=X(Ie,B,Re,Xe.value,ee),Xe!==null&&(i&&Xe.alternate!==null&&Ie.delete(Xe.key===null?Re:Xe.key),k=g(Xe,k,Re),Me===null?_e=Xe:Me.sibling=Xe,Me=Xe);return i&&Ie.forEach(function(pP){return s(B,pP)}),Ye&&ja(B,Re),_e}function Ct(B,k,H,ee){if(typeof H=="object"&&H!==null&&H.type===m&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case u:e:{for(var _e=H.key;k!==null;){if(k.key===_e){if(_e=H.type,_e===m){if(k.tag===7){o(B,k.sibling),ee=f(k,H.props.children),ee.return=B,B=ee;break e}}else if(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===J&&aT(_e)===k.type){o(B,k.sibling),ee=f(k,H.props),hc(ee,H),ee.return=B,B=ee;break e}o(B,k);break}else s(B,k);k=k.sibling}H.type===m?(ee=Ja(H.props.children,B.mode,ee,H.key),ee.return=B,B=ee):(ee=cf(H.type,H.key,H.props,null,B.mode,ee),hc(ee,H),ee.return=B,B=ee)}return T(B);case d:e:{for(_e=H.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){o(B,k.sibling),ee=f(k,H.children||[]),ee.return=B,B=ee;break e}else{o(B,k);break}else s(B,k);k=k.sibling}ee=Lg(H,B.mode,ee),ee.return=B,B=ee}return T(B);case J:return _e=H._init,H=_e(H._payload),Ct(B,k,H,ee)}if(pe(H))return we(B,k,H,ee);if(te(H)){if(_e=te(H),typeof _e!="function")throw Error(r(150));return H=_e.call(H),Ne(B,k,H,ee)}if(typeof H.then=="function")return Ct(B,k,Hd(H),ee);if(H.$$typeof===R)return Ct(B,k,of(B,H),ee);Gd(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(o(B,k.sibling),ee=f(k,H),ee.return=B,B=ee):(o(B,k),ee=Mg(H,B.mode,ee),ee.return=B,B=ee),T(B)):o(B,k)}return function(B,k,H,ee){try{cc=0;var _e=Ct(B,k,H,ee);return cl=null,_e}catch(Ie){if(Ie===lc)throw Ie;var Me=dr(29,Ie,null,B.mode);return Me.lanes=ee,Me.return=B,Me}finally{}}}var Ha=oT(!0),lT=oT(!1),hl=Qe(null),Kd=Qe(0);function uT(i,s){i=ki,tt(Kd,i),tt(hl,s),ki=i|s.baseLanes}function qp(){tt(Kd,ki),tt(hl,hl.current)}function Hp(){ki=Kd.current,It(hl),It(Kd)}var ur=Qe(null),jr=null;function ws(i){var s=i.alternate;tt(Kt,Kt.current&1),tt(ur,i),jr===null&&(s===null||hl.current!==null||s.memoizedState!==null)&&(jr=i)}function cT(i){if(i.tag===22){if(tt(Kt,Kt.current),tt(ur,i),jr===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(jr=i)}}else bs()}function bs(){tt(Kt,Kt.current),tt(ur,ur.current)}function Ai(i){It(ur),jr===i&&(jr=null),It(Kt)}var Kt=Qe(0);function $d(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var nx=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},rx=n.unstable_scheduleCallback,ix=n.unstable_NormalPriority,$t={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gp(){return{controller:new nx,data:new Map,refCount:0}}function dc(i){i.refCount--,i.refCount===0&&rx(ix,function(){i.controller.abort()})}var fc=null,Kp=0,dl=0,fl=null;function sx(i,s){if(fc===null){var o=fc=[];Kp=0,dl=Zg(),fl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Kp++,s.then(hT,hT),s}function hT(){if(--Kp===0&&fc!==null){fl!==null&&(fl.status="fulfilled");var i=fc;fc=null,dl=0,fl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function ax(i,s){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var dT=A.S;A.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&sx(i,s),dT!==null&&dT(i,s)};var Ga=Qe(null);function $p(){var i=Ga.current;return i!==null?i:ot.pooledCache}function Qd(i,s){s===null?tt(Ga,Ga.current):tt(Ga,s.pool)}function fT(){var i=$p();return i===null?null:{parent:$t._currentValue,pool:i}}var Is=0,ke=null,it=null,Lt=null,Wd=!1,ml=!1,Ka=!1,Yd=0,mc=0,pl=null,ox=0;function Ot(){throw Error(r(321))}function Qp(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!qn(i[o],s[o]))return!1;return!0}function Wp(i,s,o,c,f,g){return Is=g,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,A.H=i===null||i.memoizedState===null?$a:As,Ka=!1,g=o(c,f),Ka=!1,ml&&(g=pT(s,o,c,f)),mT(i),g}function mT(i){A.H=qr;var s=it!==null&&it.next!==null;if(Is=0,Lt=it=ke=null,Wd=!1,mc=0,pl=null,s)throw Error(r(300));i===null||en||(i=i.dependencies,i!==null&&af(i)&&(en=!0))}function pT(i,s,o,c){ke=i;var f=0;do{if(ml&&(pl=null),mc=0,ml=!1,25<=f)throw Error(r(301));if(f+=1,Lt=it=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}A.H=Qa,g=s(o,c)}while(ml);return g}function lx(){var i=A.H,s=i.useState()[0];return s=typeof s.then=="function"?pc(s):s,i=i.useState()[0],(it!==null?it.memoizedState:null)!==i&&(ke.flags|=1024),s}function Yp(){var i=Yd!==0;return Yd=0,i}function Xp(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Zp(i){if(Wd){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Wd=!1}Is=0,Lt=it=ke=null,ml=!1,mc=Yd=0,pl=null}function Mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ke.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function Ut(){if(it===null){var i=ke.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var s=Lt===null?ke.memoizedState:Lt.next;if(s!==null)Lt=s,it=i;else{if(i===null)throw ke.alternate===null?Error(r(467)):Error(r(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Lt===null?ke.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}var Xd;Xd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function pc(i){var s=mc;return mc+=1,pl===null&&(pl=[]),i=iT(pl,i,s),s=ke,(Lt===null?s.memoizedState:Lt.next)===null&&(s=s.alternate,A.H=s===null||s.memoizedState===null?$a:As),i}function Zd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return pc(i);if(i.$$typeof===R)return _n(i)}throw Error(r(438,String(i)))}function Jp(i){var s=null,o=ke.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Xd(),ke.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),c=0;c<i;c++)o[c]=de;return s.index++,o}function Si(i,s){return typeof s=="function"?s(i):s}function Jd(i){var s=Ut();return eg(s,it,i)}function eg(i,s,o){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=i.baseQueue,g=c.pending;if(g!==null){if(f!==null){var T=f.next;f.next=g.next,g.next=T}s.baseQueue=f=g,c.pending=null}if(g=i.baseState,f===null)i.memoizedState=g;else{s=f.next;var b=T=null,D=null,L=s,Z=!1;do{var ie=L.lane&-536870913;if(ie!==L.lane?(Ge&ie)===ie:(Is&ie)===ie){var K=L.revertLane;if(K===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),ie===dl&&(Z=!0);else if((Is&K)===K){L=L.next,K===dl&&(Z=!0);continue}else ie={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},D===null?(b=D=ie,T=g):D=D.next=ie,ke.lanes|=K,Vs|=K;ie=L.action,Ka&&o(g,ie),g=L.hasEagerState?L.eagerState:o(g,ie)}else K={lane:ie,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},D===null?(b=D=K,T=g):D=D.next=K,ke.lanes|=ie,Vs|=ie;L=L.next}while(L!==null&&L!==s);if(D===null?T=g:D.next=b,!qn(g,i.memoizedState)&&(en=!0,Z&&(o=fl,o!==null)))throw o;i.memoizedState=g,i.baseState=T,i.baseQueue=D,c.lastRenderedState=g}return f===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function tg(i){var s=Ut(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var c=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var T=f=f.next;do g=i(g,T.action),T=T.next;while(T!==f);qn(g,s.memoizedState)||(en=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function gT(i,s,o){var c=ke,f=Ut(),g=Ye;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!qn((it||f).memoizedState,o);if(T&&(f.memoizedState=o,en=!0),f=f.queue,ig(vT.bind(null,c,f,i),[i]),f.getSnapshot!==s||T||Lt!==null&&Lt.memoizedState.tag&1){if(c.flags|=2048,gl(9,yT.bind(null,c,f,o,s),{destroy:void 0},null),ot===null)throw Error(r(349));g||(Is&60)!==0||_T(c,s,o)}return o}function _T(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=ke.updateQueue,s===null?(s=Xd(),ke.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function yT(i,s,o,c){s.value=o,s.getSnapshot=c,ET(s)&&TT(i)}function vT(i,s,o){return o(function(){ET(s)&&TT(i)})}function ET(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!qn(i,o)}catch{return!0}}function TT(i){var s=Ts(i,2);s!==null&&Cn(s,i,2)}function ng(i){var s=Mn();if(typeof i=="function"){var o=i;if(i=o(),Ka){xr(!0);try{o()}finally{xr(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:i},s}function wT(i,s,o,c){return i.baseState=o,eg(i,it,typeof c=="function"?c:Si)}function ux(i,s,o,c,f){if(nf(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};A.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,bT(s,g)):(g.next=o.next,s.pending=o.next=g)}}function bT(i,s){var o=s.action,c=s.payload,f=i.state;if(s.isTransition){var g=A.T,T={};A.T=T;try{var b=o(f,c),D=A.S;D!==null&&D(T,b),IT(i,s,b)}catch(L){rg(i,s,L)}finally{A.T=g}}else try{g=o(f,c),IT(i,s,g)}catch(L){rg(i,s,L)}}function IT(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){AT(i,s,c)},function(c){return rg(i,s,c)}):AT(i,s,o)}function AT(i,s,o){s.status="fulfilled",s.value=o,ST(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,bT(i,o)))}function rg(i,s,o){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,ST(s),s=s.next;while(s!==c)}i.action=null}function ST(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function RT(i,s){return s}function CT(i,s){if(Ye){var o=ot.formState;if(o!==null){e:{var c=ke;if(Ye){if(un){t:{for(var f=un,g=Fr;f.nodeType!==8;){if(!g){f=null;break t}if(f=br(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){un=br(f.nextSibling),c=f.data==="F!";break e}}qa(c)}c=!1}c&&(s=o[0])}}return o=Mn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:RT,lastRenderedState:s},o.queue=c,o=KT.bind(null,ke,c),c.dispatch=o,c=ng(!1),g=ug.bind(null,ke,!1,c.queue),c=Mn(),f={state:s,dispatch:null,action:i,pending:null},c.queue=f,o=ux.bind(null,ke,f,g,o),f.dispatch=o,c.memoizedState=i,[s,o,!1]}function DT(i){var s=Ut();return xT(s,it,i)}function xT(i,s,o){s=eg(i,s,RT)[0],i=Jd(Si)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?pc(s):s;var c=Ut(),f=c.queue,g=f.dispatch;return o!==c.memoizedState&&(ke.flags|=2048,gl(9,cx.bind(null,f,o),{destroy:void 0},null)),[s,g,i]}function cx(i,s){i.action=s}function PT(i){var s=Ut(),o=it;if(o!==null)return xT(s,o,i);Ut(),s=s.memoizedState,o=Ut();var c=o.queue.dispatch;return o.memoizedState=i,[s,c,!1]}function gl(i,s,o,c){return i={tag:i,create:s,inst:o,deps:c,next:null},s=ke.updateQueue,s===null&&(s=Xd(),ke.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(c=o.next,o.next=i,i.next=c,s.lastEffect=i),i}function NT(){return Ut().memoizedState}function ef(i,s,o,c){var f=Mn();ke.flags|=i,f.memoizedState=gl(1|s,o,{destroy:void 0},c===void 0?null:c)}function tf(i,s,o,c){var f=Ut();c=c===void 0?null:c;var g=f.memoizedState.inst;it!==null&&c!==null&&Qp(c,it.memoizedState.deps)?f.memoizedState=gl(s,o,g,c):(ke.flags|=i,f.memoizedState=gl(1|s,o,g,c))}function OT(i,s){ef(8390656,8,i,s)}function ig(i,s){tf(2048,8,i,s)}function VT(i,s){return tf(4,2,i,s)}function kT(i,s){return tf(4,4,i,s)}function MT(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function LT(i,s,o){o=o!=null?o.concat([i]):null,tf(4,4,MT.bind(null,s,i),o)}function sg(){}function UT(i,s){var o=Ut();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Qp(s,c[1])?c[0]:(o.memoizedState=[i,s],i)}function zT(i,s){var o=Ut();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Qp(s,c[1]))return c[0];if(c=i(),Ka){xr(!0);try{i()}finally{xr(!1)}}return o.memoizedState=[c,s],c}function ag(i,s,o){return o===void 0||(Is&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=Fw(),ke.lanes|=i,Vs|=i,o)}function BT(i,s,o,c){return qn(o,s)?o:hl.current!==null?(i=ag(i,o,c),qn(i,s)||(en=!0),i):(Is&42)===0?(en=!0,i.memoizedState=o):(i=Fw(),ke.lanes|=i,Vs|=i,s)}function FT(i,s,o,c,f){var g=me.p;me.p=g!==0&&8>g?g:8;var T=A.T,b={};A.T=b,ug(i,!1,s,o);try{var D=f(),L=A.S;if(L!==null&&L(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=ax(D,c);gc(i,s,Z,$n(i))}else gc(i,s,c,$n(i))}catch(ie){gc(i,s,{then:function(){},status:"rejected",reason:ie},$n())}finally{me.p=g,A.T=T}}function hx(){}function og(i,s,o,c){if(i.tag!==5)throw Error(r(476));var f=jT(i).queue;FT(i,f,s,De,o===null?hx:function(){return qT(i),o(c)})}function jT(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:De},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function qT(i){var s=jT(i).next.queue;gc(i,s,{},$n())}function lg(){return _n(Mc)}function HT(){return Ut().memoizedState}function GT(){return Ut().memoizedState}function dx(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=$n();i=Cs(o);var c=Ds(s,i,o);c!==null&&(Cn(c,s,o),vc(c,s,o)),s={cache:Gp()},i.payload=s;return}s=s.return}}function fx(i,s,o){var c=$n();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},nf(i)?$T(s,o):(o=Up(i,s,o,c),o!==null&&(Cn(o,i,c),QT(o,s,c)))}function KT(i,s,o){var c=$n();gc(i,s,o,c)}function gc(i,s,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(nf(i))$T(s,f);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,b=g(T,o);if(f.hasEagerState=!0,f.eagerState=b,qn(b,T))return zd(i,s,f,0),ot===null&&Ud(),!1}catch{}finally{}if(o=Up(i,s,f,c),o!==null)return Cn(o,i,c),QT(o,s,c),!0}return!1}function ug(i,s,o,c){if(c={lane:2,revertLane:Zg(),action:c,hasEagerState:!1,eagerState:null,next:null},nf(i)){if(s)throw Error(r(479))}else s=Up(i,o,c,2),s!==null&&Cn(s,i,2)}function nf(i){var s=i.alternate;return i===ke||s!==null&&s===ke}function $T(i,s){ml=Wd=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function QT(i,s,o){if((o&4194176)!==0){var c=s.lanes;c&=i.pendingLanes,o|=c,s.lanes=o,hs(i,o)}}var qr={readContext:_n,use:Zd,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot};qr.useCacheRefresh=Ot,qr.useMemoCache=Ot,qr.useHostTransitionStatus=Ot,qr.useFormState=Ot,qr.useActionState=Ot,qr.useOptimistic=Ot;var $a={readContext:_n,use:Zd,useCallback:function(i,s){return Mn().memoizedState=[i,s===void 0?null:s],i},useContext:_n,useEffect:OT,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,ef(4194308,4,MT.bind(null,s,i),o)},useLayoutEffect:function(i,s){return ef(4194308,4,i,s)},useInsertionEffect:function(i,s){ef(4,2,i,s)},useMemo:function(i,s){var o=Mn();s=s===void 0?null:s;var c=i();if(Ka){xr(!0);try{i()}finally{xr(!1)}}return o.memoizedState=[c,s],c},useReducer:function(i,s,o){var c=Mn();if(o!==void 0){var f=o(s);if(Ka){xr(!0);try{o(s)}finally{xr(!1)}}}else f=s;return c.memoizedState=c.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},c.queue=i,i=i.dispatch=fx.bind(null,ke,i),[c.memoizedState,i]},useRef:function(i){var s=Mn();return i={current:i},s.memoizedState=i},useState:function(i){i=ng(i);var s=i.queue,o=KT.bind(null,ke,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:sg,useDeferredValue:function(i,s){var o=Mn();return ag(o,i,s)},useTransition:function(){var i=ng(!1);return i=FT.bind(null,ke,i.queue,!0,!1),Mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var c=ke,f=Mn();if(Ye){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ot===null)throw Error(r(349));(Ge&60)!==0||_T(c,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,OT(vT.bind(null,c,g,i),[i]),c.flags|=2048,gl(9,yT.bind(null,c,g,o,s),{destroy:void 0},null),o},useId:function(){var i=Mn(),s=ot.identifierPrefix;if(Ye){var o=Ii,c=bi;o=(c&~(1<<32-In(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=Yd++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=ox++,s=":"+s+"r"+o.toString(32)+":";return i.memoizedState=s},useCacheRefresh:function(){return Mn().memoizedState=dx.bind(null,ke)}};$a.useMemoCache=Jp,$a.useHostTransitionStatus=lg,$a.useFormState=CT,$a.useActionState=CT,$a.useOptimistic=function(i){var s=Mn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=ug.bind(null,ke,!0,o),o.dispatch=s,[i,s]};var As={readContext:_n,use:Zd,useCallback:UT,useContext:_n,useEffect:ig,useImperativeHandle:LT,useInsertionEffect:VT,useLayoutEffect:kT,useMemo:zT,useReducer:Jd,useRef:NT,useState:function(){return Jd(Si)},useDebugValue:sg,useDeferredValue:function(i,s){var o=Ut();return BT(o,it.memoizedState,i,s)},useTransition:function(){var i=Jd(Si)[0],s=Ut().memoizedState;return[typeof i=="boolean"?i:pc(i),s]},useSyncExternalStore:gT,useId:HT};As.useCacheRefresh=GT,As.useMemoCache=Jp,As.useHostTransitionStatus=lg,As.useFormState=DT,As.useActionState=DT,As.useOptimistic=function(i,s){var o=Ut();return wT(o,it,i,s)};var Qa={readContext:_n,use:Zd,useCallback:UT,useContext:_n,useEffect:ig,useImperativeHandle:LT,useInsertionEffect:VT,useLayoutEffect:kT,useMemo:zT,useReducer:tg,useRef:NT,useState:function(){return tg(Si)},useDebugValue:sg,useDeferredValue:function(i,s){var o=Ut();return it===null?ag(o,i,s):BT(o,it.memoizedState,i,s)},useTransition:function(){var i=tg(Si)[0],s=Ut().memoizedState;return[typeof i=="boolean"?i:pc(i),s]},useSyncExternalStore:gT,useId:HT};Qa.useCacheRefresh=GT,Qa.useMemoCache=Jp,Qa.useHostTransitionStatus=lg,Qa.useFormState=PT,Qa.useActionState=PT,Qa.useOptimistic=function(i,s){var o=Ut();return it!==null?wT(o,it,i,s):(o.baseState=i,[i,o.queue.dispatch])};function cg(i,s,o,c){s=i.memoizedState,o=o(c,s),o=o==null?s:x({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var hg={isMounted:function(i){return(i=i._reactInternals)?he(i)===i:!1},enqueueSetState:function(i,s,o){i=i._reactInternals;var c=$n(),f=Cs(c);f.payload=s,o!=null&&(f.callback=o),s=Ds(i,f,c),s!==null&&(Cn(s,i,c),vc(s,i,c))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var c=$n(),f=Cs(c);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ds(i,f,c),s!==null&&(Cn(s,i,c),vc(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=$n(),c=Cs(o);c.tag=2,s!=null&&(c.callback=s),s=Ds(i,c,o),s!==null&&(Cn(s,i,o),vc(s,i,o))}};function WT(i,s,o,c,f,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!rc(o,c)||!rc(f,g):!0}function YT(i,s,o,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==i&&hg.enqueueReplaceState(s,s.state,null)}function Wa(i,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(i=i.defaultProps){o===s&&(o=x({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var rf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function XT(i){rf(i)}function ZT(i){console.error(i)}function JT(i){rf(i)}function sf(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function ew(i,s,o){try{var c=i.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function dg(i,s,o){return o=Cs(o),o.tag=3,o.payload={element:null},o.callback=function(){sf(i,s)},o}function tw(i){return i=Cs(i),i.tag=3,i}function nw(i,s,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;i.payload=function(){return f(g)},i.callback=function(){ew(s,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){ew(s,o,c),typeof f!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function mx(i,s,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&yc(s,o,f,!0),o=ur.current,o!==null){switch(o.tag){case 13:return jr===null?$g():o.alternate===null&&Rt===0&&(Rt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===jp?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Wg(i,c,f)),!1;case 22:return o.flags|=65536,c===jp?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Wg(i,c,f)),!1}throw Error(r(435,o.tag))}return Wg(i,c,f),$g(),!1}if(Ye)return s=ur.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Fp&&(i=Error(r(422),{cause:c}),oc(ar(i,o)))):(c!==Fp&&(s=Error(r(423),{cause:c}),oc(ar(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,c=ar(c,o),f=dg(i.stateNode,c,f),Rg(i,f),Rt!==4&&(Rt=2)),!1;var g=Error(r(520),{cause:c});if(g=ar(g,o),Rc===null?Rc=[g]:Rc.push(g),Rt!==4&&(Rt=2),s===null)return!0;c=ar(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=dg(o.stateNode,c,i),Rg(o,i),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ks===null||!ks.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=tw(f),nw(f,i,o,c),Rg(o,f),!1}o=o.return}while(o!==null);return!1}var rw=Error(r(461)),en=!1;function cn(i,s,o,c){s.child=i===null?lT(s,null,o,c):Ha(s,i.child,o,c)}function iw(i,s,o,c,f){o=o.render;var g=s.ref;if("ref"in c){var T={};for(var b in c)b!=="ref"&&(T[b]=c[b])}else T=c;return Xa(s),c=Wp(i,s,o,T,g,f),b=Yp(),i!==null&&!en?(Xp(i,s,f),Ri(i,s,f)):(Ye&&b&&zp(s),s.flags|=1,cn(i,s,c,f),s.child)}function sw(i,s,o,c,f){if(i===null){var g=o.type;return typeof g=="function"&&!kg(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,aw(i,s,g,c,f)):(i=cf(o.type,null,c,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!Tg(i,f)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:rc,o(T,c)&&i.ref===s.ref)return Ri(i,s,f)}return s.flags|=1,i=Os(g,c),i.ref=s.ref,i.return=s,s.child=i}function aw(i,s,o,c,f){if(i!==null){var g=i.memoizedProps;if(rc(g,c)&&i.ref===s.ref)if(en=!1,s.pendingProps=c=g,Tg(i,f))(i.flags&131072)!==0&&(en=!0);else return s.lanes=i.lanes,Ri(i,s,f)}return fg(i,s,o,c,f)}function ow(i,s,o){var c=s.pendingProps,f=c.children,g=(s.stateNode._pendingVisibility&2)!==0,T=i!==null?i.memoizedState:null;if(_c(i,s),c.mode==="hidden"||g){if((s.flags&128)!==0){if(c=T!==null?T.baseLanes|o:o,i!==null){for(f=s.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return lw(i,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Qd(s,T!==null?T.cachePool:null),T!==null?uT(s,T):qp(),cT(s);else return s.lanes=s.childLanes=536870912,lw(i,s,T!==null?T.baseLanes|o:o,o)}else T!==null?(Qd(s,T.cachePool),uT(s,T),bs(),s.memoizedState=null):(i!==null&&Qd(s,null),qp(),bs());return cn(i,s,f,o),s.child}function lw(i,s,o,c){var f=$p();return f=f===null?null:{parent:$t._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&Qd(s,null),qp(),cT(s),i!==null&&yc(i,s,c,!0),null}function _c(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=2097664)}}function fg(i,s,o,c,f){return Xa(s),o=Wp(i,s,o,c,void 0,f),c=Yp(),i!==null&&!en?(Xp(i,s,f),Ri(i,s,f)):(Ye&&c&&zp(s),s.flags|=1,cn(i,s,o,f),s.child)}function uw(i,s,o,c,f,g){return Xa(s),s.updateQueue=null,o=pT(s,c,o,f),mT(i),c=Yp(),i!==null&&!en?(Xp(i,s,g),Ri(i,s,g)):(Ye&&c&&zp(s),s.flags|=1,cn(i,s,o,g),s.child)}function cw(i,s,o,c,f){if(Xa(s),s.stateNode===null){var g=ol,T=o.contextType;typeof T=="object"&&T!==null&&(g=_n(T)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=hg,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Ag(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?_n(T):ol,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(cg(s,o,T,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&hg.enqueueReplaceState(g,g.state,null),Tc(s,c,g,f),Ec(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){g=s.stateNode;var b=s.memoizedProps,D=Wa(o,b);g.props=D;var L=g.context,Z=o.contextType;T=ol,typeof Z=="object"&&Z!==null&&(T=_n(Z));var ie=o.getDerivedStateFromProps;Z=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b||L!==T)&&YT(s,g,c,T),Rs=!1;var K=s.memoizedState;g.state=K,Tc(s,c,g,f),Ec(),L=s.memoizedState,b||K!==L||Rs?(typeof ie=="function"&&(cg(s,o,ie,c),L=s.memoizedState),(D=Rs||WT(s,o,D,c,K,L,T))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=L),g.props=c,g.state=L,g.context=T,c=D):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Sg(i,s),T=s.memoizedProps,Z=Wa(o,T),g.props=Z,ie=s.pendingProps,K=g.context,L=o.contextType,D=ol,typeof L=="object"&&L!==null&&(D=_n(L)),b=o.getDerivedStateFromProps,(L=typeof b=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==ie||K!==D)&&YT(s,g,c,D),Rs=!1,K=s.memoizedState,g.state=K,Tc(s,c,g,f),Ec();var X=s.memoizedState;T!==ie||K!==X||Rs||i!==null&&i.dependencies!==null&&af(i.dependencies)?(typeof b=="function"&&(cg(s,o,b,c),X=s.memoizedState),(Z=Rs||WT(s,o,Z,c,K,X,D)||i!==null&&i.dependencies!==null&&af(i.dependencies))?(L||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,X,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,X,D)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),g.props=c,g.state=X,g.context=D,c=Z):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=1024),c=!1)}return g=c,_c(i,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&c?(s.child=Ha(s,i.child,null,f),s.child=Ha(s,null,o,f)):cn(i,s,o,f),s.memoizedState=g.state,i=s.child):i=Ri(i,s,f),i}function hw(i,s,o,c){return ac(),s.flags|=256,cn(i,s,o,c),s.child}var mg={dehydrated:null,treeContext:null,retryLane:0};function pg(i){return{baseLanes:i,cachePool:fT()}}function gg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=fr),i}function dw(i,s,o){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(Kt.current&2)!==0),T&&(f=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ye){if(f?ws(s):bs(),Ye){var b=un,D;if(D=b){e:{for(D=b,b=Fr;D.nodeType!==8;){if(!b){b=null;break e}if(D=br(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(s.memoizedState={dehydrated:b,treeContext:Fa!==null?{id:bi,overflow:Ii}:null,retryLane:536870912},D=dr(18,null,null,0),D.stateNode=b,D.return=s,s.child=D,Rn=s,un=null,D=!0):D=!1}D||qa(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return b.data==="$!"?s.lanes=16:s.lanes=536870912,null;Ai(s)}return b=c.children,c=c.fallback,f?(bs(),f=s.mode,b=yg({mode:"hidden",children:b},f),c=Ja(c,f,o,null),b.return=s,c.return=s,b.sibling=c,s.child=b,f=s.child,f.memoizedState=pg(o),f.childLanes=gg(i,T,o),s.memoizedState=mg,c):(ws(s),_g(s,b))}if(D=i.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(g)s.flags&256?(ws(s),s.flags&=-257,s=vg(i,s,o)):s.memoizedState!==null?(bs(),s.child=i.child,s.flags|=128,s=null):(bs(),f=c.fallback,b=s.mode,c=yg({mode:"visible",children:c.children},b),f=Ja(f,b,o,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,Ha(s,i.child,null,o),c=s.child,c.memoizedState=pg(o),c.childLanes=gg(i,T,o),s.memoizedState=mg,s=f);else if(ws(s),b.data==="$!"){if(T=b.nextSibling&&b.nextSibling.dataset,T)var L=T.dgst;T=L,c=Error(r(419)),c.stack="",c.digest=T,oc({value:c,source:null,stack:null}),s=vg(i,s,o)}else if(en||yc(i,s,o,!1),T=(o&i.childLanes)!==0,en||T){if(T=ot,T!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(T.suspendedLanes|o))!==0?0:c,c!==0&&c!==D.retryLane)throw D.retryLane=c,Ts(i,c),Cn(T,i,c),rw}b.data==="$?"||$g(),s=vg(i,s,o)}else b.data==="$?"?(s.flags|=128,s.child=i.child,s=Dx.bind(null,i),b._reactRetry=s,s=null):(i=D.treeContext,un=br(b.nextSibling),Rn=s,Ye=!0,Tr=null,Fr=!1,i!==null&&(or[lr++]=bi,or[lr++]=Ii,or[lr++]=Fa,bi=i.id,Ii=i.overflow,Fa=s),s=_g(s,c.children),s.flags|=4096);return s}return f?(bs(),f=c.fallback,b=s.mode,D=i.child,L=D.sibling,c=Os(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&31457280,L!==null?f=Os(L,f):(f=Ja(f,b,o,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,b=i.child.memoizedState,b===null?b=pg(o):(D=b.cachePool,D!==null?(L=$t._currentValue,D=D.parent!==L?{parent:L,pool:L}:D):D=fT(),b={baseLanes:b.baseLanes|o,cachePool:D}),f.memoizedState=b,f.childLanes=gg(i,T,o),s.memoizedState=mg,c):(ws(s),o=i.child,i=o.sibling,o=Os(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=o,s.memoizedState=null,o)}function _g(i,s){return s=yg({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function yg(i,s){return Uw(i,s,0,null)}function vg(i,s,o){return Ha(s,i.child,null,o),i=_g(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function fw(i,s,o){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),bg(i.return,s,o)}function Eg(i,s,o,c,f){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=f)}function mw(i,s,o){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(cn(i,s,c.children,o),c=Kt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fw(i,o,s);else if(i.tag===19)fw(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(tt(Kt,c),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&$d(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Eg(s,!1,f,o,g);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&$d(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Eg(s,!0,o,null,g);break;case"together":Eg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ri(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),Vs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(yc(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Os(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Os(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Tg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&af(i)))}function px(i,s,o){switch(s.tag){case 3:ss(s,s.stateNode.containerInfo),Ss(s,$t,i.memoizedState.cache),ac();break;case 27:case 5:Mu(s);break;case 4:ss(s,s.stateNode.containerInfo);break;case 10:Ss(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ws(s),s.flags|=128,null):(o&s.child.childLanes)!==0?dw(i,s,o):(ws(s),i=Ri(i,s,o),i!==null?i.sibling:null);ws(s);break;case 19:var f=(i.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(yc(i,s,o,!1),c=(o&s.childLanes)!==0),f){if(c)return mw(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(Kt,Kt.current),c)break;return null;case 22:case 23:return s.lanes=0,ow(i,s,o);case 24:Ss(s,$t,i.memoizedState.cache)}return Ri(i,s,o)}function pw(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)en=!0;else{if(!Tg(i,o)&&(s.flags&128)===0)return en=!1,px(i,s,o);en=(i.flags&131072)!==0}else en=!1,Ye&&(s.flags&1048576)!==0&&JE(s,jd,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")kg(c)?(i=Wa(c,i),s.tag=1,s=cw(null,s,c,i,o)):(s.tag=0,s=fg(null,s,c,i,o));else{if(c!=null){if(f=c.$$typeof,f===N){s.tag=11,s=iw(null,s,c,i,o);break e}else if(f===G){s.tag=14,s=sw(null,s,c,i,o);break e}}throw s=S(c)||c,Error(r(306,s,""))}}return s;case 0:return fg(i,s,s.type,s.pendingProps,o);case 1:return c=s.type,f=Wa(c,s.pendingProps),cw(i,s,c,f,o);case 3:e:{if(ss(s,s.stateNode.containerInfo),i===null)throw Error(r(387));var g=s.pendingProps;f=s.memoizedState,c=f.element,Sg(i,s),Tc(s,g,null,o);var T=s.memoizedState;if(g=T.cache,Ss(s,$t,g),g!==f.cache&&Ig(s,[$t],o,!0),Ec(),g=T.element,f.isDehydrated)if(f={element:g,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=hw(i,s,g,o);break e}else if(g!==c){c=ar(Error(r(424)),s),oc(c),s=hw(i,s,g,o);break e}else for(un=br(s.stateNode.containerInfo.firstChild),Rn=s,Ye=!0,Tr=null,Fr=!0,o=lT(s,null,g,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ac(),g===c){s=Ri(i,s,o);break e}cn(i,s,g,o)}s=s.child}return s;case 26:return _c(i,s),i===null?(o=yb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ye||(o=s.type,i=s.pendingProps,c=wf(Zn.current).createElement(o),c[Xt]=s,c[qt]=i,hn(c,o,i),_t(c),s.stateNode=c):s.memoizedState=yb(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Mu(s),i===null&&Ye&&(c=s.stateNode=pb(s.type,s.pendingProps,Zn.current),Rn=s,Fr=!0,un=br(c.firstChild)),c=s.pendingProps.children,i!==null||Ye?cn(i,s,c,o):s.child=Ha(s,null,c,o),_c(i,s),s.child;case 5:return i===null&&Ye&&((f=c=un)&&(c=Gx(c,s.type,s.pendingProps,Fr),c!==null?(s.stateNode=c,Rn=s,un=br(c.firstChild),Fr=!1,f=!0):f=!1),f||qa(s)),Mu(s),f=s.type,g=s.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,o_(f,g)?c=null:T!==null&&o_(f,T)&&(s.flags|=32),s.memoizedState!==null&&(f=Wp(i,s,lx,null,null,o),Mc._currentValue=f),_c(i,s),cn(i,s,c,o),s.child;case 6:return i===null&&Ye&&((i=o=un)&&(o=Kx(o,s.pendingProps,Fr),o!==null?(s.stateNode=o,Rn=s,un=null,i=!0):i=!1),i||qa(s)),null;case 13:return dw(i,s,o);case 4:return ss(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=Ha(s,null,c,o):cn(i,s,c,o),s.child;case 11:return iw(i,s,s.type,s.pendingProps,o);case 7:return cn(i,s,s.pendingProps,o),s.child;case 8:return cn(i,s,s.pendingProps.children,o),s.child;case 12:return cn(i,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Ss(s,s.type,c.value),cn(i,s,c.children,o),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,Xa(s),f=_n(f),c=c(f),s.flags|=1,cn(i,s,c,o),s.child;case 14:return sw(i,s,s.type,s.pendingProps,o);case 15:return aw(i,s,s.type,s.pendingProps,o);case 19:return mw(i,s,o);case 22:return ow(i,s,o);case 24:return Xa(s),c=_n($t),i===null?(f=$p(),f===null&&(f=ot,g=Gp(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:c,cache:f},Ag(s),Ss(s,$t,f)):((i.lanes&o)!==0&&(Sg(i,s),Tc(s,null,null,o),Ec()),f=i.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ss(s,$t,c)):(c=g.cache,Ss(s,$t,c),c!==f.cache&&Ig(s,[$t],o,!0))),cn(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}var wg=Qe(null),Ya=null,Ci=null;function Ss(i,s,o){tt(wg,s._currentValue),s._currentValue=o}function Di(i){i._currentValue=wg.current,It(wg)}function bg(i,s,o){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===o)break;i=i.return}}function Ig(i,s,o,c){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var g=f.dependencies;if(g!==null){var T=f.child;g=g.firstContext;e:for(;g!==null;){var b=g;g=f;for(var D=0;D<s.length;D++)if(b.context===s[D]){g.lanes|=o,b=g.alternate,b!==null&&(b.lanes|=o),bg(g.return,o,i),c||(T=null);break e}g=b.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(r(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),bg(T,o,i),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===i){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function yc(i,s,o,c){i=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var b=f.type;qn(f.pendingProps.value,T.value)||(i!==null?i.push(b):i=[b])}}else if(f===is.current){if(T=f.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(Mc):i=[Mc])}f=f.return}i!==null&&Ig(s,i,o,c),s.flags|=262144}function af(i){for(i=i.firstContext;i!==null;){if(!qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xa(i){Ya=i,Ci=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function _n(i){return gw(Ya,i)}function of(i,s){return Ya===null&&Xa(i),gw(i,s)}function gw(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ci===null){if(i===null)throw Error(r(308));Ci=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ci=Ci.next=s;return o}var Rs=!1;function Ag(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sg(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Cs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ds(i,s,o){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(vt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Bd(i),XE(i,null,o),s}return zd(i,c,s,o),Bd(i)}function vc(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194176)!==0)){var c=s.lanes;c&=i.pendingLanes,o|=c,s.lanes=o,hs(i,o)}}function Rg(i,s){var o=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Cg=!1;function Ec(){if(Cg){var i=fl;if(i!==null)throw i}}function Tc(i,s,o,c){Cg=!1;var f=i.updateQueue;Rs=!1;var g=f.firstBaseUpdate,T=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var D=b,L=D.next;D.next=null,T===null?g=L:T.next=L,T=D;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==T&&(b===null?Z.firstBaseUpdate=L:b.next=L,Z.lastBaseUpdate=D))}if(g!==null){var ie=f.baseState;T=0,Z=L=D=null,b=g;do{var K=b.lane&-536870913,X=K!==b.lane;if(X?(Ge&K)===K:(c&K)===K){K!==0&&K===dl&&(Cg=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var we=i,Ne=b;K=s;var Ct=o;switch(Ne.tag){case 1:if(we=Ne.payload,typeof we=="function"){ie=we.call(Ct,ie,K);break e}ie=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ne.payload,K=typeof we=="function"?we.call(Ct,ie,K):we,K==null)break e;ie=x({},ie,K);break e;case 2:Rs=!0}}K=b.callback,K!==null&&(i.flags|=64,X&&(i.flags|=8192),X=f.callbacks,X===null?f.callbacks=[K]:X.push(K))}else X={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(L=Z=X,D=ie):Z=Z.next=X,T|=K;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;X=b,b=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);Z===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=L,f.lastBaseUpdate=Z,g===null&&(f.shared.lanes=0),Vs|=T,i.lanes=T,i.memoizedState=ie}}function _w(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function yw(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)_w(o[i],s)}function wc(i,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&i)===i){c=void 0;var g=o.create,T=o.inst;c=g(),T.destroy=c}o=o.next}while(o!==f)}}catch(b){at(s,s.return,b)}}function xs(i,s,o){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){var T=c.inst,b=T.destroy;if(b!==void 0){T.destroy=void 0,f=s;var D=o;try{b()}catch(L){at(f,D,L)}}}c=c.next}while(c!==g)}}catch(L){at(s,s.return,L)}}function vw(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{yw(s,o)}catch(c){at(i,i.return,c)}}}function Ew(i,s,o){o.props=Wa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(c){at(i,s,c)}}function Za(i,s){try{var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var f=c;break;default:f=c}typeof o=="function"?i.refCleanup=o(f):o.current=f}}catch(g){at(i,s,g)}}function Hn(i,s){var o=i.ref,c=i.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){at(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){at(i,s,f)}else o.current=null}function Tw(i){var s=i.type,o=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){at(i,i.return,f)}}function ww(i,s,o){try{var c=i.stateNode;Bx(c,i.type,o,s),c[qt]=s}catch(f){at(i,i.return,f)}}function bw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Dg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||bw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xg(i,s,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(i,s):o.insertBefore(i,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(i,o)):(s=o,s.appendChild(i)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Tf));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(xg(i,s,o),i=i.sibling;i!==null;)xg(i,s,o),i=i.sibling}function lf(i,s,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(lf(i,s,o),i=i.sibling;i!==null;)lf(i,s,o),i=i.sibling}var xi=!1,St=!1,Pg=!1,Iw=typeof WeakSet=="function"?WeakSet:Set,tn=null,Aw=!1;function gx(i,s){if(i=i.containerInfo,s_=Cf,i=jE(i),Op(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,b=-1,D=-1,L=0,Z=0,ie=i,K=null;t:for(;;){for(var X;ie!==o||f!==0&&ie.nodeType!==3||(b=T+f),ie!==g||c!==0&&ie.nodeType!==3||(D=T+c),ie.nodeType===3&&(T+=ie.nodeValue.length),(X=ie.firstChild)!==null;)K=ie,ie=X;for(;;){if(ie===i)break t;if(K===o&&++L===f&&(b=T),K===g&&++Z===c&&(D=T),(X=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=X}o=b===-1||D===-1?null:{start:b,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(a_={focusedElem:i,selectionRange:o},Cf=!1,tn=s;tn!==null;)if(s=tn,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,tn=i;else for(;tn!==null;){switch(s=tn,g=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var we=Wa(o.type,f,o.elementType===o.type);i=c.getSnapshotBeforeUpdate(we,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){at(o,o.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)c_(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":c_(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,tn=i;break}tn=s.return}return we=Aw,Aw=!1,we}function Sw(i,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ni(i,o),c&4&&wc(5,o);break;case 1:if(Ni(i,o),c&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(b){at(o,o.return,b)}else{var f=Wa(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(b){at(o,o.return,b)}}c&64&&vw(o),c&512&&Za(o,o.return);break;case 3:if(Ni(i,o),c&64&&(c=o.updateQueue,c!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{yw(c,i)}catch(b){at(o,o.return,b)}}break;case 26:Ni(i,o),c&512&&Za(o,o.return);break;case 27:case 5:Ni(i,o),s===null&&c&4&&Tw(o),c&512&&Za(o,o.return);break;case 12:Ni(i,o);break;case 13:Ni(i,o),c&4&&Dw(i,o);break;case 22:if(f=o.memoizedState!==null||xi,!f){s=s!==null&&s.memoizedState!==null||St;var g=xi,T=St;xi=f,(St=s)&&!T?Ps(i,o,(o.subtreeFlags&8772)!==0):Ni(i,o),xi=g,St=T}c&512&&(o.memoizedProps.mode==="manual"?Za(o,o.return):Hn(o,o.return));break;default:Ni(i,o)}}function Rw(i){var s=i.alternate;s!==null&&(i.alternate=null,Rw(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ca(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var zt=null,Gn=!1;function Pi(i,s,o){for(o=o.child;o!==null;)Cw(i,s,o),o=o.sibling}function Cw(i,s,o){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(as,o)}catch{}switch(o.tag){case 26:St||Hn(o,s),Pi(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:St||Hn(o,s);var c=zt,f=Gn;for(zt=o.stateNode,Pi(i,s,o),o=o.stateNode,s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Ca(o),zt=c,Gn=f;break;case 5:St||Hn(o,s);case 6:f=zt;var g=Gn;if(zt=null,Pi(i,s,o),zt=f,Gn=g,zt!==null)if(Gn)try{i=zt,c=o.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(T){at(o,s,T)}else try{zt.removeChild(o.stateNode)}catch(T){at(o,s,T)}break;case 18:zt!==null&&(Gn?(s=zt,o=o.stateNode,s.nodeType===8?u_(s.parentNode,o):s.nodeType===1&&u_(s,o),Bc(s)):u_(zt,o.stateNode));break;case 4:c=zt,f=Gn,zt=o.stateNode.containerInfo,Gn=!0,Pi(i,s,o),zt=c,Gn=f;break;case 0:case 11:case 14:case 15:St||xs(2,o,s),St||xs(4,o,s),Pi(i,s,o);break;case 1:St||(Hn(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Ew(o,s,c)),Pi(i,s,o);break;case 21:Pi(i,s,o);break;case 22:St||Hn(o,s),St=(c=St)||o.memoizedState!==null,Pi(i,s,o),St=c;break;default:Pi(i,s,o)}}function Dw(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Bc(i)}catch(o){at(s,s.return,o)}}function _x(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Iw),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Iw),s;default:throw Error(r(435,i.tag))}}function Ng(i,s){var o=_x(i);s.forEach(function(c){var f=xx.bind(null,i,c);o.has(c)||(o.add(c),c.then(f,f))})}function cr(i,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=i,T=s,b=T;e:for(;b!==null;){switch(b.tag){case 27:case 5:zt=b.stateNode,Gn=!1;break e;case 3:zt=b.stateNode.containerInfo,Gn=!0;break e;case 4:zt=b.stateNode.containerInfo,Gn=!0;break e}b=b.return}if(zt===null)throw Error(r(160));Cw(g,T,f),zt=null,Gn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)xw(s,i),s=s.sibling}var wr=null;function xw(i,s){var o=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:cr(s,i),hr(i),c&4&&(xs(3,i,i.return),wc(3,i),xs(5,i,i.return));break;case 1:cr(s,i),hr(i),c&512&&(St||o===null||Hn(o,o.return)),c&64&&xi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=wr;if(cr(s,i),hr(i),c&512&&(St||o===null||Hn(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=i.memoizedState,o===null)if(c===null)if(i.stateNode===null){e:{c=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[fs]||g[Xt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),hn(g,c,o),g[Xt]=i,_t(g),c=g;break e;case"link":var T=Tb("link","href",f).get(c+(o.href||""));if(T){for(var b=0;b<T.length;b++)if(g=T[b],g.getAttribute("href")===(o.href==null?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(b,1);break t}}g=f.createElement(c),hn(g,c,o),f.head.appendChild(g);break;case"meta":if(T=Tb("meta","content",f).get(c+(o.content||""))){for(b=0;b<T.length;b++)if(g=T[b],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(b,1);break t}}g=f.createElement(c),hn(g,c,o),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[Xt]=i,_t(g),c=g}i.stateNode=c}else wb(f,i.type,i.stateNode);else i.stateNode=Eb(f,c,i.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?wb(f,i.type,i.stateNode):Eb(f,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ww(i,i.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){f=i.stateNode,g=i.memoizedProps;try{for(var D=f.firstChild;D;){var L=D.nextSibling,Z=D.nodeName;D[fs]||Z==="HEAD"||Z==="BODY"||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=L}for(var ie=i.type,K=f.attributes;K.length;)f.removeAttributeNode(K[0]);hn(f,ie,g),f[Xt]=i,f[qt]=g}catch(we){at(i,i.return,we)}}case 5:if(cr(s,i),hr(i),c&512&&(St||o===null||Hn(o,o.return)),i.flags&32){f=i.stateNode;try{tr(f,"")}catch(we){at(i,i.return,we)}}c&4&&i.stateNode!=null&&(f=i.memoizedProps,ww(i,f,o!==null?o.memoizedProps:f)),c&1024&&(Pg=!0);break;case 6:if(cr(s,i),hr(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,o=i.stateNode;try{o.nodeValue=c}catch(we){at(i,i.return,we)}}break;case 3:if(Af=null,f=wr,wr=bf(s.containerInfo),cr(s,i),wr=f,hr(i),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Bc(s.containerInfo)}catch(we){at(i,i.return,we)}Pg&&(Pg=!1,Pw(i));break;case 4:c=wr,wr=bf(i.stateNode.containerInfo),cr(s,i),hr(i),wr=c;break;case 12:cr(s,i),hr(i);break;case 13:cr(s,i),hr(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Fg=Vn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ng(i,c)));break;case 22:if(c&512&&(St||o===null||Hn(o,o.return)),D=i.memoizedState!==null,L=o!==null&&o.memoizedState!==null,Z=xi,ie=St,xi=Z||D,St=ie||L,cr(s,i),St=ie,xi=Z,hr(i),s=i.stateNode,s._current=i,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=D?s._visibility&-2:s._visibility|1,D&&(s=xi||St,o===null||L||s||_l(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(o=null,s=i;;){if(s.tag===5||s.tag===26||s.tag===27){if(o===null){L=o=s;try{if(f=L.stateNode,D)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{T=L.stateNode,b=L.memoizedProps.style;var X=b!=null&&b.hasOwnProperty("display")?b.display:null;T.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(we){at(L,L.return,we)}}}else if(s.tag===6){if(o===null){L=s;try{L.stateNode.nodeValue=D?"":L.memoizedProps}catch(we){at(L,L.return,we)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Ng(i,o))));break;case 19:cr(s,i),hr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ng(i,c)));break;case 21:break;default:cr(s,i),hr(i)}}function hr(i){var s=i.flags;if(s&2){try{if(i.tag!==27){e:{for(var o=i.return;o!==null;){if(bw(o)){var c=o;break e}o=o.return}throw Error(r(160))}switch(c.tag){case 27:var f=c.stateNode,g=Dg(i);lf(i,g,f);break;case 5:var T=c.stateNode;c.flags&32&&(tr(T,""),c.flags&=-33);var b=Dg(i);lf(i,b,T);break;case 3:case 4:var D=c.stateNode.containerInfo,L=Dg(i);xg(i,L,D);break;default:throw Error(r(161))}}}catch(Z){at(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Pw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Pw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Ni(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Sw(i,s.alternate,s),s=s.sibling}function _l(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:xs(4,s,s.return),_l(s);break;case 1:Hn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Ew(s,s.return,o),_l(s);break;case 26:case 27:case 5:Hn(s,s.return),_l(s);break;case 22:Hn(s,s.return),s.memoizedState===null&&_l(s);break;default:_l(s)}i=i.sibling}}function Ps(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=i,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:Ps(f,g,o),wc(4,g);break;case 1:if(Ps(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(L){at(c,c.return,L)}if(c=g,f=c.updateQueue,f!==null){var b=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)_w(D[f],b)}catch(L){at(c,c.return,L)}}o&&T&64&&vw(g),Za(g,g.return);break;case 26:case 27:case 5:Ps(f,g,o),o&&c===null&&T&4&&Tw(g),Za(g,g.return);break;case 12:Ps(f,g,o);break;case 13:Ps(f,g,o),o&&T&4&&Dw(f,g);break;case 22:g.memoizedState===null&&Ps(f,g,o),Za(g,g.return);break;default:Ps(f,g,o)}s=s.sibling}}function Og(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&dc(o))}function Vg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&dc(i))}function Ns(i,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Nw(i,s,o,c),s=s.sibling}function Nw(i,s,o,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ns(i,s,o,c),f&2048&&wc(9,s);break;case 3:Ns(i,s,o,c),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&dc(i)));break;case 12:if(f&2048){Ns(i,s,o,c),i=s.stateNode;try{var g=s.memoizedProps,T=g.id,b=g.onPostCommit;typeof b=="function"&&b(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){at(s,s.return,D)}}else Ns(i,s,o,c);break;case 23:break;case 22:g=s.stateNode,s.memoizedState!==null?g._visibility&4?Ns(i,s,o,c):bc(i,s):g._visibility&4?Ns(i,s,o,c):(g._visibility|=4,yl(i,s,o,c,(s.subtreeFlags&10256)!==0)),f&2048&&Og(s.alternate,s);break;case 24:Ns(i,s,o,c),f&2048&&Vg(s.alternate,s);break;default:Ns(i,s,o,c)}}function yl(i,s,o,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=i,T=s,b=o,D=c,L=T.flags;switch(T.tag){case 0:case 11:case 15:yl(g,T,b,D,f),wc(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&4?yl(g,T,b,D,f):bc(g,T):(Z._visibility|=4,yl(g,T,b,D,f)),f&&L&2048&&Og(T.alternate,T);break;case 24:yl(g,T,b,D,f),f&&L&2048&&Vg(T.alternate,T);break;default:yl(g,T,b,D,f)}s=s.sibling}}function bc(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,c=s,f=c.flags;switch(c.tag){case 22:bc(o,c),f&2048&&Og(c.alternate,c);break;case 24:bc(o,c),f&2048&&Vg(c.alternate,c);break;default:bc(o,c)}s=s.sibling}}var Ic=8192;function vl(i){if(i.subtreeFlags&Ic)for(i=i.child;i!==null;)Ow(i),i=i.sibling}function Ow(i){switch(i.tag){case 26:vl(i),i.flags&Ic&&i.memoizedState!==null&&sP(wr,i.memoizedState,i.memoizedProps);break;case 5:vl(i);break;case 3:case 4:var s=wr;wr=bf(i.stateNode.containerInfo),vl(i),wr=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Ic,Ic=16777216,vl(i),Ic=s):vl(i));break;default:vl(i)}}function Vw(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ac(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];tn=c,Mw(c,i)}Vw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)kw(i),i=i.sibling}function kw(i){switch(i.tag){case 0:case 11:case 15:Ac(i),i.flags&2048&&xs(9,i,i.return);break;case 3:Ac(i);break;case 12:Ac(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&4&&(i.return===null||i.return.tag!==13)?(s._visibility&=-5,uf(i)):Ac(i);break;default:Ac(i)}}function uf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];tn=c,Mw(c,i)}Vw(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:xs(8,s,s.return),uf(s);break;case 22:o=s.stateNode,o._visibility&4&&(o._visibility&=-5,uf(s));break;default:uf(s)}i=i.sibling}}function Mw(i,s){for(;tn!==null;){var o=tn;switch(o.tag){case 0:case 11:case 15:xs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:dc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,tn=c;else e:for(o=i;tn!==null;){c=tn;var f=c.sibling,g=c.return;if(Rw(c),c===o){tn=null;break e}if(f!==null){f.return=g,tn=f;break e}tn=g}}}function yx(i,s,o,c){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(i,s,o,c){return new yx(i,s,o,c)}function kg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Os(i,s){var o=i.alternate;return o===null?(o=dr(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&31457280,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function Lw(i,s){i.flags&=31457282;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function cf(i,s,o,c,f,g){var T=0;if(c=i,typeof i=="function")kg(i)&&(T=1);else if(typeof i=="string")T=rP(i,o,bn.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case m:return Ja(o.children,f,g,s);case p:T=8,f|=24;break;case y:return i=dr(12,o,s,f|2),i.elementType=y,i.lanes=g,i;case M:return i=dr(13,o,s,f),i.elementType=M,i.lanes=g,i;case U:return i=dr(19,o,s,f),i.elementType=U,i.lanes=g,i;case Y:return Uw(o,f,g,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case v:case R:T=10;break e;case w:T=9;break e;case N:T=11;break e;case G:T=14;break e;case J:T=16,c=null;break e}T=29,o=Error(r(130,i===null?"null":typeof i,"")),c=null}return s=dr(T,o,s,f),s.elementType=i,s.type=c,s.lanes=g,s}function Ja(i,s,o,c){return i=dr(7,i,c,s),i.lanes=o,i}function Uw(i,s,o,c){i=dr(22,i,c,s),i.elementType=Y,i.lanes=o;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=f._current;if(g===null)throw Error(r(456));if((f._pendingVisibility&2)===0){var T=Ts(g,2);T!==null&&(f._pendingVisibility|=2,Cn(T,g,2))}},attach:function(){var g=f._current;if(g===null)throw Error(r(456));if((f._pendingVisibility&2)!==0){var T=Ts(g,2);T!==null&&(f._pendingVisibility&=-3,Cn(T,g,2))}}};return i.stateNode=f,i}function Mg(i,s,o){return i=dr(6,i,null,s),i.lanes=o,i}function Lg(i,s,o){return s=dr(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function Oi(i){i.flags|=4}function zw(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!bb(s)){if(s=ur.current,s!==null&&((Ge&4194176)===Ge?jr!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||s!==jr))throw uc=jp,nT;i.flags|=8192}}function hf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?us():536870912,i.lanes|=s,Tl|=s)}function Sc(i,s){if(!Ye)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function yt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,c=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&31457280,c|=f.flags&31457280,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=c,i.childLanes=o,s}function vx(i,s,o){var c=s.pendingProps;switch(Bp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(s),null;case 1:return yt(s),null;case 3:return o=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Di($t),di(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(sc(s)?Oi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Tr!==null&&(Gg(Tr),Tr=null))),yt(s),null;case 26:return o=s.memoizedState,i===null?(Oi(s),o!==null?(yt(s),zw(s,o)):(yt(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Oi(s),yt(s),zw(s,o)):(yt(s),s.flags&=-16777217):(i.memoizedProps!==c&&Oi(s),yt(s),s.flags&=-16777217),null;case 27:Bo(s),o=Zn.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Oi(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return yt(s),null}i=bn.current,sc(s)?eT(s):(i=pb(f,c,o),s.stateNode=i,Oi(s))}return yt(s),null;case 5:if(Bo(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Oi(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return yt(s),null}if(i=bn.current,sc(s))eT(s);else{switch(f=wf(Zn.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}i[Xt]=s,i[qt]=c;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;e:switch(hn(i,o,c),o){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Oi(s)}}return yt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&Oi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(i=Zn.current,sc(s)){if(i=s.stateNode,o=s.memoizedProps,c=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}i[Xt]=s,i=!!(i.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||ub(i.nodeValue,o)),i||qa(s)}else i=wf(i).createTextNode(c),i[Xt]=s,s.stateNode=i}return yt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=sc(s),c!==null&&c.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Xt]=s}else ac(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;yt(s),f=!1}else Tr!==null&&(Gg(Tr),Tr=null),f=!0;if(!f)return s.flags&256?(Ai(s),s):(Ai(s),null)}if(Ai(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,i=i!==null&&i.memoizedState!==null,o){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),hf(s,s.updateQueue),yt(s),null;case 4:return di(),i===null&&n_(s.stateNode.containerInfo),yt(s),null;case 10:return Di(s.type),yt(s),null;case 19:if(It(Kt),f=s.memoizedState,f===null)return yt(s),null;if(c=(s.flags&128)!==0,g=f.rendering,g===null)if(c)Sc(f,!1);else{if(Rt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=$d(i),g!==null){for(s.flags|=128,Sc(f,!1),i=g.updateQueue,s.updateQueue=i,hf(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)Lw(o,i),o=o.sibling;return tt(Kt,Kt.current&1|2),s.child}i=i.sibling}f.tail!==null&&Vn()>df&&(s.flags|=128,c=!0,Sc(f,!1),s.lanes=4194304)}else{if(!c)if(i=$d(g),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,hf(s,i),Sc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ye)return yt(s),null}else 2*Vn()-f.renderingStartTime>df&&o!==536870912&&(s.flags|=128,c=!0,Sc(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(i=f.last,i!==null?i.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Vn(),s.sibling=null,i=Kt.current,tt(Kt,c?i&1|2:i&1),s):(yt(s),null);case 22:case 23:return Ai(s),Hp(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(yt(s),s.subtreeFlags&6&&(s.flags|=8192)):yt(s),o=s.updateQueue,o!==null&&hf(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),i!==null&&It(Ga),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Di($t),yt(s),null;case 25:return null}throw Error(r(156,s.tag))}function Ex(i,s){switch(Bp(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Di($t),di(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Bo(s),null;case 13:if(Ai(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ac()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return It(Kt),null;case 4:return di(),null;case 10:return Di(s.type),null;case 22:case 23:return Ai(s),Hp(),i!==null&&It(Ga),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Di($t),null;case 25:return null;default:return null}}function Bw(i,s){switch(Bp(s),s.tag){case 3:Di($t),di();break;case 26:case 27:case 5:Bo(s);break;case 4:di();break;case 13:Ai(s);break;case 19:It(Kt);break;case 10:Di(s.type);break;case 22:case 23:Ai(s),Hp(),i!==null&&It(Ga);break;case 24:Di($t)}}var Tx={getCacheForType:function(i){var s=_n($t),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},wx=typeof WeakMap=="function"?WeakMap:Map,vt=0,ot=null,Le=null,Ge=0,lt=0,Kn=null,Vi=!1,El=!1,Ug=!1,ki=0,Rt=0,Vs=0,eo=0,zg=0,fr=0,Tl=0,Rc=null,Hr=null,Bg=!1,Fg=0,df=1/0,ff=null,ks=null,mf=!1,to=null,Cc=0,jg=0,qg=null,Dc=0,Hg=null;function $n(){if((vt&2)!==0&&Ge!==0)return Ge&-Ge;if(A.T!==null){var i=dl;return i!==0?i:Zg()}return vd()}function Fw(){fr===0&&(fr=(Ge&536870912)===0||Ye?Fu():536870912);var i=ur.current;return i!==null&&(i.flags|=32),fr}function Cn(i,s,o){(i===ot&&lt===2||i.cancelPendingCommit!==null)&&(wl(i,0),Mi(i,Ge,fr,!1)),Nt(i,o),((vt&2)===0||i!==ot)&&(i===ot&&((vt&2)===0&&(eo|=o),Rt===4&&Mi(i,Ge,fr,!1)),Gr(i))}function jw(i,s,o){if((vt&6)!==0)throw Error(r(327));var c=!o&&(s&60)===0&&(s&i.expiredLanes)===0||ls(i,s),f=c?Ax(i,s):Qg(i,s,!0),g=c;do{if(f===0){El&&!c&&Mi(i,s,0,!1);break}else if(f===6)Mi(i,s,0,!Vi);else{if(o=i.current.alternate,g&&!bx(o)){f=Qg(i,s,!1),g=!1;continue}if(f===2){if(g=s,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var b=i;f=Rc;var D=b.current.memoizedState.isDehydrated;if(D&&(wl(b,T).flags|=256),T=Qg(b,T,!1),T!==2){if(Ug&&!D){b.errorRecoveryDisabledLanes|=g,eo|=g,f=4;break e}g=Hr,Hr=f,g!==null&&Gg(g)}f=T}if(g=!1,f!==2)continue}}if(f===1){wl(i,0),Mi(i,s,0,!0);break}e:{switch(c=i,f){case 0:case 1:throw Error(r(345));case 4:if((s&4194176)===s){Mi(c,s,fr,!Vi);break e}break;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=o,c.finishedLanes=s,(s&62914560)===s&&(g=Fg+300-Vn(),10<g)){if(Mi(c,s,fr,!Vi),Jn(c,0)!==0)break e;c.timeoutHandle=db(qw.bind(null,c,o,Hr,ff,Bg,s,fr,eo,Tl,Vi,2,-0,0),g);break e}qw(c,o,Hr,ff,Bg,s,fr,eo,Tl,Vi,0,-0,0)}}break}while(!0);Gr(i)}function Gg(i){Hr===null?Hr=i:Hr.push.apply(Hr,i)}function qw(i,s,o,c,f,g,T,b,D,L,Z,ie,K){var X=s.subtreeFlags;if((X&8192||(X&16785408)===16785408)&&(kc={stylesheets:null,count:0,unsuspend:iP},Ow(s),s=aP(),s!==null)){i.cancelPendingCommit=s(Yw.bind(null,i,o,c,f,T,b,D,1,ie,K)),Mi(i,g,T,!L);return}Yw(i,o,c,f,T,b,D,Z,ie,K)}function bx(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!qn(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Mi(i,s,o,c){s&=~zg,s&=~eo,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var f=s;0<f;){var g=31-In(f),T=1<<g;c[g]=-1,f&=~T}o!==0&&cs(i,o,s)}function pf(){return(vt&6)===0?(xc(0),!1):!0}function Kg(){if(Le!==null){if(lt===0)var i=Le.return;else i=Le,Ci=Ya=null,Zp(i),cl=null,cc=0,i=Le;for(;i!==null;)Bw(i.alternate,i),i=i.return;Le=null}}function wl(i,s){i.finishedWork=null,i.finishedLanes=0;var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,jx(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Kg(),ot=i,Le=o=Os(i.current,null),Ge=s,lt=0,Kn=null,Vi=!1,El=ls(i,s),Ug=!1,Tl=fr=zg=eo=Vs=Rt=0,Hr=Rc=null,Bg=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var f=31-In(c),g=1<<f;s|=i[f],c&=~g}return ki=s,Ud(),o}function Hw(i,s){ke=null,A.H=qr,s===lc?(s=sT(),lt=3):s===nT?(s=sT(),lt=4):lt=s===rw?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,Le===null&&(Rt=1,sf(i,ar(s,i.current)))}function Gw(){var i=A.H;return A.H=qr,i===null?qr:i}function Kw(){var i=A.A;return A.A=Tx,i}function $g(){Rt=4,Vi||(Ge&4194176)!==Ge&&ur.current!==null||(El=!0),(Vs&134217727)===0&&(eo&134217727)===0||ot===null||Mi(ot,Ge,fr,!1)}function Qg(i,s,o){var c=vt;vt|=2;var f=Gw(),g=Kw();(ot!==i||Ge!==s)&&(ff=null,wl(i,s)),s=!1;var T=Rt;e:do try{if(lt!==0&&Le!==null){var b=Le,D=Kn;switch(lt){case 8:Kg(),T=6;break e;case 3:case 2:case 6:ur.current===null&&(s=!0);var L=lt;if(lt=0,Kn=null,bl(i,b,D,L),o&&El){T=0;break e}break;default:L=lt,lt=0,Kn=null,bl(i,b,D,L)}}Ix(),T=Rt;break}catch(Z){Hw(i,Z)}while(!0);return s&&i.shellSuspendCounter++,Ci=Ya=null,vt=c,A.H=f,A.A=g,Le===null&&(ot=null,Ge=0,Ud()),T}function Ix(){for(;Le!==null;)$w(Le)}function Ax(i,s){var o=vt;vt|=2;var c=Gw(),f=Kw();ot!==i||Ge!==s?(ff=null,df=Vn()+500,wl(i,s)):El=ls(i,s);e:do try{if(lt!==0&&Le!==null){s=Le;var g=Kn;t:switch(lt){case 1:lt=0,Kn=null,bl(i,s,g,1);break;case 2:if(rT(g)){lt=0,Kn=null,Qw(s);break}s=function(){lt===2&&ot===i&&(lt=7),Gr(i)},g.then(s,s);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:rT(g)?(lt=0,Kn=null,Qw(s)):(lt=0,Kn=null,bl(i,s,g,7));break;case 5:var T=null;switch(Le.tag){case 26:T=Le.memoizedState;case 5:case 27:var b=Le;if(!T||bb(T)){lt=0,Kn=null;var D=b.sibling;if(D!==null)Le=D;else{var L=b.return;L!==null?(Le=L,gf(L)):Le=null}break t}}lt=0,Kn=null,bl(i,s,g,5);break;case 6:lt=0,Kn=null,bl(i,s,g,6);break;case 8:Kg(),Rt=6;break e;default:throw Error(r(462))}}Sx();break}catch(Z){Hw(i,Z)}while(!0);return Ci=Ya=null,A.H=c,A.A=f,vt=o,Le!==null?0:(ot=null,Ge=0,Ud(),Rt)}function Sx(){for(;Le!==null&&!wp();)$w(Le)}function $w(i){var s=pw(i.alternate,i,ki);i.memoizedProps=i.pendingProps,s===null?gf(i):Le=s}function Qw(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=uw(o,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=uw(o,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:Zp(s);default:Bw(o,s),s=Le=Lw(s,ki),s=pw(o,s,ki)}i.memoizedProps=i.pendingProps,s===null?gf(i):Le=s}function bl(i,s,o,c){Ci=Ya=null,Zp(s),cl=null,cc=0;var f=s.return;try{if(mx(i,f,s,o,Ge)){Rt=1,sf(i,ar(o,i.current)),Le=null;return}}catch(g){if(f!==null)throw Le=f,g;Rt=1,sf(i,ar(o,i.current)),Le=null;return}s.flags&32768?(Ye||c===1?i=!0:El||(Ge&536870912)!==0?i=!1:(Vi=i=!0,(c===2||c===3||c===6)&&(c=ur.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ww(s,i)):gf(s)}function gf(i){var s=i;do{if((s.flags&32768)!==0){Ww(s,Vi);return}i=s.return;var o=vx(s.alternate,s,ki);if(o!==null){Le=o;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=i}while(s!==null);Rt===0&&(Rt=5)}function Ww(i,s){do{var o=Ex(i.alternate,i);if(o!==null){o.flags&=32767,Le=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Le=i;return}Le=i=o}while(i!==null);Rt=6,Le=null}function Yw(i,s,o,c,f,g,T,b,D,L){var Z=A.T,ie=me.p;try{me.p=2,A.T=null,Rx(i,s,o,c,ie,f,g,T,b,D,L)}finally{A.T=Z,me.p=ie}}function Rx(i,s,o,c,f,g,T,b){do Il();while(to!==null);if((vt&6)!==0)throw Error(r(327));var D=i.finishedWork;if(c=i.finishedLanes,D===null)return null;if(i.finishedWork=null,i.finishedLanes=0,D===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var L=D.lanes|D.childLanes;if(L|=Lp,_d(i,c,L,g,T,b),i===ot&&(Le=ot=null,Ge=0),(D.subtreeFlags&10256)===0&&(D.flags&10256)===0||mf||(mf=!0,jg=L,qg=o,Px(fi,function(){return Il(),null})),o=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||o?(o=A.T,A.T=null,g=me.p,me.p=2,T=vt,vt|=4,gx(i,D),xw(D,i),XD(a_,i.containerInfo),Cf=!!s_,a_=s_=null,i.current=D,Sw(i,D.alternate,D),Lu(),vt=T,me.p=g,A.T=o):i.current=D,mf?(mf=!1,to=i,Cc=c):Xw(i,L),L=i.pendingLanes,L===0&&(ks=null),zu(D.stateNode),Gr(i),s!==null)for(f=i.onRecoverableError,D=0;D<s.length;D++)L=s[D],f(L.value,{componentStack:L.stack});return(Cc&3)!==0&&Il(),L=i.pendingLanes,(c&4194218)!==0&&(L&42)!==0?i===Hg?Dc++:(Dc=0,Hg=i):Dc=0,xc(0),null}function Xw(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,dc(s)))}function Il(){if(to!==null){var i=to,s=jg;jg=0;var o=yd(Cc),c=A.T,f=me.p;try{if(me.p=32>o?32:o,A.T=null,to===null)var g=!1;else{o=qg,qg=null;var T=to,b=Cc;if(to=null,Cc=0,(vt&6)!==0)throw Error(r(331));var D=vt;if(vt|=4,kw(T.current),Nw(T,T.current,b,o),vt=D,xc(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(as,T)}catch{}g=!0}return g}finally{me.p=f,A.T=c,Xw(i,s)}}return!1}function Zw(i,s,o){s=ar(o,s),s=dg(i.stateNode,s,2),i=Ds(i,s,2),i!==null&&(Nt(i,2),Gr(i))}function at(i,s,o){if(i.tag===3)Zw(i,i,o);else for(;s!==null;){if(s.tag===3){Zw(s,i,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ks===null||!ks.has(c))){i=ar(o,i),o=tw(2),c=Ds(s,o,2),c!==null&&(nw(o,c,s,i),Nt(c,2),Gr(c));break}}s=s.return}}function Wg(i,s,o){var c=i.pingCache;if(c===null){c=i.pingCache=new wx;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(o)||(Ug=!0,f.add(o),i=Cx.bind(null,i,s,o),s.then(i,i))}function Cx(i,s,o){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ot===i&&(Ge&o)===o&&(Rt===4||Rt===3&&(Ge&62914560)===Ge&&300>Vn()-Fg?(vt&2)===0&&wl(i,0):zg|=o,Tl===Ge&&(Tl=0)),Gr(i)}function Jw(i,s){s===0&&(s=us()),i=Ts(i,s),i!==null&&(Nt(i,s),Gr(i))}function Dx(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),Jw(i,o)}function xx(i,s){var o=0;switch(i.tag){case 13:var c=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),Jw(i,o)}function Px(i,s){return Aa(i,s)}var _f=null,Al=null,Yg=!1,yf=!1,Xg=!1,no=0;function Gr(i){i!==Al&&i.next===null&&(Al===null?_f=Al=i:Al=Al.next=i),yf=!0,Yg||(Yg=!0,Ox(Nx))}function xc(i,s){if(!Xg&&yf){Xg=!0;do for(var o=!1,c=_f;c!==null;){if(i!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var T=c.suspendedLanes,b=c.pingedLanes;g=(1<<31-In(42|i)+1)-1,g&=f&~(T&~b),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(o=!0,nb(c,g))}else g=Ge,g=Jn(c,c===ot?g:0),(g&3)===0||ls(c,g)||(o=!0,nb(c,g));c=c.next}while(o);Xg=!1}}function Nx(){yf=Yg=!1;var i=0;no!==0&&(Fx()&&(i=no),no=0);for(var s=Vn(),o=null,c=_f;c!==null;){var f=c.next,g=eb(c,s);g===0?(c.next=null,o===null?_f=f:o.next=f,f===null&&(Al=o)):(o=c,(i!==0||(g&3)!==0)&&(yf=!0)),c=f}xc(i)}function eb(i,s){for(var o=i.suspendedLanes,c=i.pingedLanes,f=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-In(g),b=1<<T,D=f[T];D===-1?((b&o)===0||(b&c)!==0)&&(f[T]=qo(b,s)):D<=s&&(i.expiredLanes|=b),g&=~b}if(s=ot,o=Ge,o=Jn(i,i===s?o:0),c=i.callbackNode,o===0||i===s&&lt===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&jo(c),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||ls(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(c!==null&&jo(c),yd(o)){case 2:case 8:o=Yt;break;case 32:o=fi;break;case 268435456:o=Uu;break;default:o=fi}return c=tb.bind(null,i),o=Aa(o,c),i.callbackPriority=s,i.callbackNode=o,s}return c!==null&&c!==null&&jo(c),i.callbackPriority=2,i.callbackNode=null,2}function tb(i,s){var o=i.callbackNode;if(Il()&&i.callbackNode!==o)return null;var c=Ge;return c=Jn(i,i===ot?c:0),c===0?null:(jw(i,c,s),eb(i,Vn()),i.callbackNode!=null&&i.callbackNode===o?tb.bind(null,i):null)}function nb(i,s){if(Il())return null;jw(i,s,!0)}function Ox(i){qx(function(){(vt&6)!==0?Aa(jt,i):i()})}function Zg(){return no===0&&(no=Fu()),no}function rb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Vr(""+i)}function ib(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function Vx(i,s,o,c,f){if(s==="submit"&&o&&o.stateNode===f){var g=rb((f[qt]||null).action),T=c.submitter;T&&(s=(s=T[qt]||null)?rb(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var b=new Yo("action","action",null,c,f);i.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(no!==0){var D=T?ib(f,T):new FormData(f);og(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(b.preventDefault(),D=T?ib(f,T):new FormData(f),og(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var Jg=0;Jg<YE.length;Jg++){var e_=YE[Jg],kx=e_.toLowerCase(),Mx=e_[0].toUpperCase()+e_.slice(1);Er(kx,"on"+Mx)}Er(GE,"onAnimationEnd"),Er(KE,"onAnimationIteration"),Er($E,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(JD,"onTransitionRun"),Er(ex,"onTransitionStart"),Er(tx,"onTransitionCancel"),Er(QE,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function sb(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var c=i[o],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var b=c[T],D=b.instance,L=b.currentTarget;if(b=b.listener,D!==g&&f.isPropagationStopped())break e;g=b,f.currentTarget=L;try{g(f)}catch(Z){rf(Z)}f.currentTarget=null,g=D}else for(T=0;T<c.length;T++){if(b=c[T],D=b.instance,L=b.currentTarget,b=b.listener,D!==g&&f.isPropagationStopped())break e;g=b,f.currentTarget=L;try{g(f)}catch(Z){rf(Z)}f.currentTarget=null,g=D}}}}function je(i,s){var o=s[Ra];o===void 0&&(o=s[Ra]=new Set);var c=i+"__bubble";o.has(c)||(ab(s,i,2,!1),o.add(c))}function t_(i,s,o){var c=0;s&&(c|=4),ab(o,i,c,s)}var vf="_reactListening"+Math.random().toString(36).slice(2);function n_(i){if(!i[vf]){i[vf]=!0,qu.forEach(function(o){o!=="selectionchange"&&(Lx.has(o)||t_(o,!1,i),t_(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[vf]||(s[vf]=!0,t_("selectionchange",!1,s))}}function ab(i,s,o,c){switch(Db(s)){case 2:var f=uP;break;case 8:f=cP;break;default:f=p_}o=f.bind(null,s,o,i),f=void 0,!rr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function r_(i,s,o,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var b=c.stateNode.containerInfo;if(b===f||b.nodeType===8&&b.parentNode===f)break;if(T===4)for(T=c.return;T!==null;){var D=T.tag;if((D===3||D===4)&&(D=T.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;T=T.return}for(;b!==null;){if(T=vr(b),T===null)return;if(D=T.tag,D===5||D===6||D===26||D===27){c=g=T;continue e}b=b.parentNode}}c=c.return}bd(function(){var L=g,Z=Wo(o),ie=[];e:{var K=WE.get(i);if(K!==void 0){var X=Yo,we=i;switch(i){case"keypress":if(Mr(o)===0)break e;case"keydown":case"keyup":X=nl;break;case"focusin":we="focus",X=Jo;break;case"focusout":we="blur",X=Jo;break;case"beforeblur":case"afterblur":X=Jo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Dp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Pd;break;case GE:case KE:case $E:X=el;break;case QE:X=Od;break;case"scroll":case"scrollend":X=Id;break;case"wheel":X=rl;break;case"copy":case"cut":case"paste":X=tl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=tc;break;case"toggle":case"beforetoggle":X=kd}var Ne=(s&4)!==0,Ct=!Ne&&(i==="scroll"||i==="scrollend"),B=Ne?K!==null?K+"Capture":null:K;Ne=[];for(var k=L,H;k!==null;){var ee=k;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||B===null||(ee=Na(k,B),ee!=null&&Ne.push(Nc(k,ee,H))),Ct)break;k=k.return}0<Ne.length&&(K=new X(K,we,null,o,Z),ie.push({event:K,listeners:Ne}))}}if((s&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",K&&o!==nr&&(we=o.relatedTarget||o.fromElement)&&(vr(we)||we[mi]))break e;if((X||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,X?(we=o.relatedTarget||o.toElement,X=L,we=we?vr(we):null,we!==null&&(Ct=he(we),Ne=we.tag,we!==Ct||Ne!==5&&Ne!==27&&Ne!==6)&&(we=null)):(X=null,we=L),X!==we)){if(Ne=ir,ee="onMouseLeave",B="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=tc,ee="onPointerLeave",B="onPointerEnter",k="pointer"),Ct=X==null?K:ms(X),H=we==null?K:ms(we),K=new Ne(ee,k+"leave",X,o,Z),K.target=Ct,K.relatedTarget=H,ee=null,vr(Z)===L&&(Ne=new Ne(B,k+"enter",we,o,Z),Ne.target=H,Ne.relatedTarget=Ct,ee=Ne),Ct=ee,X&&we)t:{for(Ne=X,B=we,k=0,H=Ne;H;H=Sl(H))k++;for(H=0,ee=B;ee;ee=Sl(ee))H++;for(;0<k-H;)Ne=Sl(Ne),k--;for(;0<H-k;)B=Sl(B),H--;for(;k--;){if(Ne===B||B!==null&&Ne===B.alternate)break t;Ne=Sl(Ne),B=Sl(B)}Ne=null}else Ne=null;X!==null&&ob(ie,K,X,Ne,!1),we!==null&&Ct!==null&&ob(ie,Ct,we,Ne,!0)}}e:{if(K=L?ms(L):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var _e=VE;else if(Gt(K))if(kE)_e=WD;else{_e=$D;var Me=KD}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?L&&Qu(L.elementType)&&(_e=VE):_e=QD;if(_e&&(_e=_e(i,L))){wi(ie,_e,o,Z);break e}Me&&Me(i,K,L),i==="focusout"&&L&&K.type==="number"&&L.memoizedProps.value!=null&&Qo(K,"number",K.value)}switch(Me=L?ms(L):window,i){case"focusin":(Gt(Me)||Me.contentEditable==="true")&&(il=Me,Vp=L,ic=null);break;case"focusout":ic=Vp=il=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,qE(ie,o,Z);break;case"selectionchange":if(ZD)break;case"keydown":case"keyup":qE(ie,o,Z)}var Ie;if(zr)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else qe?W(i,o)&&(Re="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(E&&o.locale!=="ko"&&(qe||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&qe&&(Ie=Yu()):(kr=Z,Es="value"in kr?kr.value:kr.textContent,qe=!0)),Me=Ef(L,Re),0<Me.length&&(Re=new Ju(Re,i,null,o,Z),ie.push({event:Re,listeners:Me}),Ie?Re.data=Ie:(Ie=ue(o),Ie!==null&&(Re.data=Ie)))),(Ie=_?Ht(i,o):He(i,o))&&(Re=Ef(L,"onBeforeInput"),0<Re.length&&(Me=new Ju("onBeforeInput","beforeinput",null,o,Z),ie.push({event:Me,listeners:Re}),Me.data=Ie)),Vx(ie,i,L,o,Z)}sb(ie,s)})}function Nc(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Ef(i,s){for(var o=s+"Capture",c=[];i!==null;){var f=i,g=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Na(i,o),f!=null&&c.unshift(Nc(i,f,g)),f=Na(i,s),f!=null&&c.push(Nc(i,f,g))),i=i.return}return c}function Sl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ob(i,s,o,c,f){for(var g=s._reactName,T=[];o!==null&&o!==c;){var b=o,D=b.alternate,L=b.stateNode;if(b=b.tag,D!==null&&D===c)break;b!==5&&b!==26&&b!==27||L===null||(D=L,f?(L=Na(o,g),L!=null&&T.unshift(Nc(o,L,D))):f||(L=Na(o,g),L!=null&&T.push(Nc(o,L,D)))),o=o.return}T.length!==0&&i.push({event:s,listeners:T})}var Ux=/\r\n?/g,zx=/\u0000|\uFFFD/g;function lb(i){return(typeof i=="string"?i:""+i).replace(Ux,`
`).replace(zx,"")}function ub(i,s){return s=lb(s),lb(i)===s}function Tf(){}function st(i,s,o,c,f,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||tr(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&tr(i,""+c);break;case"className":_s(i,"class",c);break;case"tabIndex":_s(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_s(i,o,c);break;case"style":wd(i,c,g);break;case"data":if(s!=="object"){_s(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Vr(""+c),i.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&st(i,s,"name",f.name,f,null),st(i,s,"formEncType",f.formEncType,f,null),st(i,s,"formMethod",f.formMethod,f,null),st(i,s,"formTarget",f.formTarget,f,null)):(st(i,s,"encType",f.encType,f,null),st(i,s,"method",f.method,f,null),st(i,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Vr(""+c),i.setAttribute(o,c);break;case"onClick":c!=null&&(i.onclick=Tf);break;case"onScroll":c!=null&&je("scroll",i);break;case"onScrollEnd":c!=null&&je("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}o=Vr(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""+c):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":c===!0?i.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,c):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(o,c):i.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(o):i.setAttribute(o,c);break;case"popover":je("beforetoggle",i),je("toggle",i),gs(i,"popover",c);break;case"xlinkActuate":er(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":er(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":er(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":er(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":er(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":er(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":er(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":er(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":er(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":gs(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Rp.get(o)||o,gs(i,o,c))}}function i_(i,s,o,c,f,g){switch(o){case"style":wd(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof c=="string"?tr(i,c):(typeof c=="number"||typeof c=="bigint")&&tr(i,""+c);break;case"onScroll":c!=null&&je("scroll",i);break;case"onScrollEnd":c!=null&&je("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Tf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=i[qt]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,c,f);break e}o in i?i[o]=c:c===!0?i.setAttribute(o,""):gs(i,o,c)}}}function hn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",i),je("load",i);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(i,s,g,T,o,null)}}f&&st(i,s,"srcSet",o.srcSet,o,null),c&&st(i,s,"src",o.src,o,null);return;case"input":je("invalid",i);var b=g=T=f=null,D=null,L=null;for(c in o)if(o.hasOwnProperty(c)){var Z=o[c];if(Z!=null)switch(c){case"name":f=Z;break;case"type":T=Z;break;case"checked":D=Z;break;case"defaultChecked":L=Z;break;case"value":g=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:st(i,s,c,Z,o,null)}}xa(i,g,b,D,L,T,f,!1),Da(i);return;case"select":je("invalid",i),c=T=g=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":g=b;break;case"defaultValue":T=b;break;case"multiple":c=b;default:st(i,s,f,b,o,null)}s=g,o=T,i.multiple=!!c,s!=null?We(i,!!c,s,!1):o!=null&&We(i,!!c,o,!0);return;case"textarea":je("invalid",i),g=f=c=null;for(T in o)if(o.hasOwnProperty(T)&&(b=o[T],b!=null))switch(T){case"value":c=b;break;case"defaultValue":f=b;break;case"children":g=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:st(i,s,T,b,o,null)}vs(i,c,f,g),Da(i);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(i,s,D,c,o,null)}return;case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":je("load",i);break;case"video":case"audio":for(c=0;c<Pc.length;c++)je(Pc[c],i);break;case"image":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"embed":case"source":case"link":je("error",i),je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in o)if(o.hasOwnProperty(L)&&(c=o[L],c!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(i,s,L,c,o,null)}return;default:if(Qu(s)){for(Z in o)o.hasOwnProperty(Z)&&(c=o[Z],c!==void 0&&i_(i,s,Z,c,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(c=o[b],c!=null&&st(i,s,b,c,o,null))}function Bx(i,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,T=null,b=null,D=null,L=null,Z=null;for(X in o){var ie=o[X];if(o.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ie;default:c.hasOwnProperty(X)||st(i,s,X,null,c,ie)}}for(var K in c){var X=c[K];if(ie=o[K],c.hasOwnProperty(K)&&(X!=null||ie!=null))switch(K){case"type":g=X;break;case"name":f=X;break;case"checked":L=X;break;case"defaultChecked":Z=X;break;case"value":T=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:X!==ie&&st(i,s,K,X,c,ie)}}ys(i,T,b,D,L,Z,g,f);return;case"select":X=T=b=K=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":X=D;default:c.hasOwnProperty(g)||st(i,s,g,null,c,D)}for(f in c)if(g=c[f],D=o[f],c.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":K=g;break;case"defaultValue":b=g;break;case"multiple":T=g;default:g!==D&&st(i,s,f,g,c,D)}s=b,o=T,c=X,K!=null?We(i,!!o,K,!1):!!c!=!!o&&(s!=null?We(i,!!o,s,!0):We(i,!!o,o?[]:"",!1));return;case"textarea":X=K=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:st(i,s,b,null,c,f)}for(T in c)if(f=c[T],g=o[T],c.hasOwnProperty(T)&&(f!=null||g!=null))switch(T){case"value":K=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&st(i,s,T,f,c,g)}Pa(i,K,X);return;case"option":for(var we in o)if(K=o[we],o.hasOwnProperty(we)&&K!=null&&!c.hasOwnProperty(we))switch(we){case"selected":i.selected=!1;break;default:st(i,s,we,null,c,K)}for(D in c)if(K=c[D],X=o[D],c.hasOwnProperty(D)&&K!==X&&(K!=null||X!=null))switch(D){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:st(i,s,D,K,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in o)K=o[Ne],o.hasOwnProperty(Ne)&&K!=null&&!c.hasOwnProperty(Ne)&&st(i,s,Ne,null,c,K);for(L in c)if(K=c[L],X=o[L],c.hasOwnProperty(L)&&K!==X&&(K!=null||X!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:st(i,s,L,K,c,X)}return;default:if(Qu(s)){for(var Ct in o)K=o[Ct],o.hasOwnProperty(Ct)&&K!==void 0&&!c.hasOwnProperty(Ct)&&i_(i,s,Ct,void 0,c,K);for(Z in c)K=c[Z],X=o[Z],!c.hasOwnProperty(Z)||K===X||K===void 0&&X===void 0||i_(i,s,Z,K,c,X);return}}for(var B in o)K=o[B],o.hasOwnProperty(B)&&K!=null&&!c.hasOwnProperty(B)&&st(i,s,B,null,c,K);for(ie in c)K=c[ie],X=o[ie],!c.hasOwnProperty(ie)||K===X||K==null&&X==null||st(i,s,ie,K,c,X)}var s_=null,a_=null;function wf(i){return i.nodeType===9?i:i.ownerDocument}function cb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hb(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function o_(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var l_=null;function Fx(){var i=window.event;return i&&i.type==="popstate"?i===l_?!1:(l_=i,!0):(l_=null,!1)}var db=typeof setTimeout=="function"?setTimeout:void 0,jx=typeof clearTimeout=="function"?clearTimeout:void 0,fb=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof fb<"u"?function(i){return fb.resolve(null).then(i).catch(Hx)}:db;function Hx(i){setTimeout(function(){throw i})}function u_(i,s){var o=s,c=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(c===0){i.removeChild(f),Bc(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=f}while(o);Bc(s)}function c_(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":c_(o),Ca(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function Gx(i,s,o,c){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[fs])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==f.rel||i.getAttribute("href")!==(f.href==null?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=br(i.nextSibling),i===null)break}return null}function Kx(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=br(i.nextSibling),i===null))return null;return i}function br(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}function mb(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function pb(i,s,o){switch(s=wf(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var mr=new Map,gb=new Set;function bf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Li=me.d;me.d={f:$x,r:Qx,D:Wx,C:Yx,L:Xx,m:Zx,X:eP,S:Jx,M:tP};function $x(){var i=Li.f(),s=pf();return i||s}function Qx(i){var s=pi(i);s!==null&&s.tag===5&&s.type==="form"?qT(s):Li.r(i)}var Rl=typeof document>"u"?null:document;function _b(i,s,o){var c=Rl;if(c&&typeof s=="string"&&s){var f=At(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),gb.has(f)||(gb.add(f),i={rel:i,crossOrigin:o,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),hn(s,"link",i),_t(s),c.head.appendChild(s)))}}function Wx(i){Li.D(i),_b("dns-prefetch",i,null)}function Yx(i,s){Li.C(i,s),_b("preconnect",i,s)}function Xx(i,s,o){Li.L(i,s,o);var c=Rl;if(c&&i&&s){var f='link[rel="preload"][as="'+At(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+At(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+At(o.imageSizes)+'"]')):f+='[href="'+At(i)+'"]';var g=f;switch(s){case"style":g=Cl(i);break;case"script":g=Dl(i)}mr.has(g)||(i=x({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),mr.set(g,i),c.querySelector(f)!==null||s==="style"&&c.querySelector(Oc(g))||s==="script"&&c.querySelector(Vc(g))||(s=c.createElement("link"),hn(s,"link",i),_t(s),c.head.appendChild(s)))}}function Zx(i,s){Li.m(i,s);var o=Rl;if(o&&i){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+At(c)+'"][href="'+At(i)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Dl(i)}if(!mr.has(g)&&(i=x({rel:"modulepreload",href:i},s),mr.set(g,i),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Vc(g)))return}c=o.createElement("link"),hn(c,"link",i),_t(c),o.head.appendChild(c)}}}function Jx(i,s,o){Li.S(i,s,o);var c=Rl;if(c&&i){var f=ps(c).hoistableStyles,g=Cl(i);s=s||"default";var T=f.get(g);if(!T){var b={loading:0,preload:null};if(T=c.querySelector(Oc(g)))b.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":s},o),(o=mr.get(g))&&h_(i,o);var D=T=c.createElement("link");_t(D),hn(D,"link",i),D._p=new Promise(function(L,Z){D.onload=L,D.onerror=Z}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,If(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:b},f.set(g,T)}}}function eP(i,s){Li.X(i,s);var o=Rl;if(o&&i){var c=ps(o).hoistableScripts,f=Dl(i),g=c.get(f);g||(g=o.querySelector(Vc(f)),g||(i=x({src:i,async:!0},s),(s=mr.get(f))&&d_(i,s),g=o.createElement("script"),_t(g),hn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function tP(i,s){Li.M(i,s);var o=Rl;if(o&&i){var c=ps(o).hoistableScripts,f=Dl(i),g=c.get(f);g||(g=o.querySelector(Vc(f)),g||(i=x({src:i,async:!0,type:"module"},s),(s=mr.get(f))&&d_(i,s),g=o.createElement("script"),_t(g),hn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function yb(i,s,o,c){var f=(f=Zn.current)?bf(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Cl(o.href),o=ps(f).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Cl(o.href);var g=ps(f).hoistableStyles,T=g.get(i);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=f.querySelector(Oc(i)))&&!g._p&&(T.instance=g,T.state.loading=5),mr.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mr.set(i,o),g||nP(f,i,o,T.state))),s&&c===null)throw Error(r(528,""));return T}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Dl(o),o=ps(f).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Cl(i){return'href="'+At(i)+'"'}function Oc(i){return'link[rel="stylesheet"]['+i+"]"}function vb(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function nP(i,s,o,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),hn(s,"link",o),_t(s),i.head.appendChild(s))}function Dl(i){return'[src="'+At(i)+'"]'}function Vc(i){return"script[async]"+i}function Eb(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+At(o.href)+'"]');if(c)return s.instance=c,_t(c),c;var f=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),_t(c),hn(c,"style",f),If(c,o.precedence,i),s.instance=c;case"stylesheet":f=Cl(o.href);var g=i.querySelector(Oc(f));if(g)return s.state.loading|=4,s.instance=g,_t(g),g;c=vb(o),(f=mr.get(f))&&h_(c,f),g=(i.ownerDocument||i).createElement("link"),_t(g);var T=g;return T._p=new Promise(function(b,D){T.onload=b,T.onerror=D}),hn(g,"link",c),s.state.loading|=4,If(g,o.precedence,i),s.instance=g;case"script":return g=Dl(o.src),(f=i.querySelector(Vc(g)))?(s.instance=f,_t(f),f):(c=o,(f=mr.get(g))&&(c=x({},o),d_(c,f)),i=i.ownerDocument||i,f=i.createElement("script"),_t(f),hn(f,"link",c),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,If(c,o.precedence,i));return s.instance}function If(i,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,T=0;T<c.length;T++){var b=c[T];if(b.dataset.precedence===s)g=b;else if(g!==f)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function h_(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function d_(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Af=null;function Tb(i,s,o){if(Af===null){var c=new Map,f=Af=new Map;f.set(o,c)}else f=Af,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(i))return c;for(c.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var g=o[f];if(!(g[fs]||g[Xt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=i+T;var b=c.get(T);b?b.push(g):c.set(T,[g])}}return c}function wb(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function rP(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function bb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var kc=null;function iP(){}function sP(i,s,o){if(kc===null)throw Error(r(475));var c=kc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Cl(o.href),g=i.querySelector(Oc(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=Sf.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=g,_t(g);return}g=i.ownerDocument||i,o=vb(o),(f=mr.get(f))&&h_(o,f),g=g.createElement("link"),_t(g);var T=g;T._p=new Promise(function(b,D){T.onload=b,T.onerror=D}),hn(g,"link",o),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Sf.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function aP(){if(kc===null)throw Error(r(475));var i=kc;return i.stylesheets&&i.count===0&&f_(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&f_(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Sf(){if(this.count--,this.count===0){if(this.stylesheets)f_(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rf=null;function f_(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rf=new Map,s.forEach(oP,i),Rf=null,Sf.call(i))}function oP(i,s){if(!(s.state.loading&4)){var o=Rf.get(i);if(o)var c=o.get(null);else{o=new Map,Rf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var T=f[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}f=s.instance,T=f.getAttribute("data-precedence"),g=o.get(T)||c,g===c&&o.set(null,f),o.set(T,f),this.count++,c=Sf.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var Mc={$$typeof:R,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function lP(i,s,o,c,f,g,T,b){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ho(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ho(0),this.hiddenUpdates=Ho(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Ib(i,s,o,c,f,g,T,b,D,L,Z,ie){return i=new lP(i,s,o,T,b,D,L,ie),s=1,g===!0&&(s|=24),g=dr(3,null,null,s),i.current=g,g.stateNode=i,s=Gp(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Ag(g),i}function Ab(i){return i?(i=ol,i):ol}function Sb(i,s,o,c,f,g){f=Ab(f),c.context===null?c.context=f:c.pendingContext=f,c=Cs(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Ds(i,c,s),o!==null&&(Cn(o,i,s),vc(o,i,s))}function Rb(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function m_(i,s){Rb(i,s),(i=i.alternate)&&Rb(i,s)}function Cb(i){if(i.tag===13){var s=Ts(i,67108864);s!==null&&Cn(s,i,67108864),m_(i,67108864)}}var Cf=!0;function uP(i,s,o,c){var f=A.T;A.T=null;var g=me.p;try{me.p=2,p_(i,s,o,c)}finally{me.p=g,A.T=f}}function cP(i,s,o,c){var f=A.T;A.T=null;var g=me.p;try{me.p=8,p_(i,s,o,c)}finally{me.p=g,A.T=f}}function p_(i,s,o,c){if(Cf){var f=g_(c);if(f===null)r_(i,s,c,Df,o),xb(i,c);else if(dP(f,i,s,o,c))c.stopPropagation();else if(xb(i,c),s&4&&-1<hP.indexOf(i)){for(;f!==null;){var g=pi(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=yr(g.pendingLanes);if(T!==0){var b=g;for(b.pendingLanes|=2,b.entangledLanes|=2;T;){var D=1<<31-In(T);b.entanglements[1]|=D,T&=~D}Gr(g),(vt&6)===0&&(df=Vn()+500,xc(0))}}break;case 13:b=Ts(g,2),b!==null&&Cn(b,g,2),pf(),m_(g,2)}if(g=g_(c),g===null&&r_(i,s,c,Df,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else r_(i,s,c,null,o)}}function g_(i){return i=Wo(i),__(i)}var Df=null;function __(i){if(Df=null,i=vr(i),i!==null){var s=he(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=Ce(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Df=i,null}function Db(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fd()){case jt:return 2;case Yt:return 8;case fi:case md:return 32;case Uu:return 268435456;default:return 32}default:return 32}}var y_=!1,Ms=null,Ls=null,Us=null,Lc=new Map,Uc=new Map,zs=[],hP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xb(i,s){switch(i){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":Lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(s.pointerId)}}function zc(i,s,o,c,f,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=pi(s),s!==null&&Cb(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function dP(i,s,o,c,f){switch(s){case"focusin":return Ms=zc(Ms,i,s,o,c,f),!0;case"dragenter":return Ls=zc(Ls,i,s,o,c,f),!0;case"mouseover":return Us=zc(Us,i,s,o,c,f),!0;case"pointerover":var g=f.pointerId;return Lc.set(g,zc(Lc.get(g)||null,i,s,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Uc.set(g,zc(Uc.get(g)||null,i,s,o,c,f)),!0}return!1}function Pb(i){var s=vr(i.target);if(s!==null){var o=he(s);if(o!==null){if(s=o.tag,s===13){if(s=Ce(o),s!==null){i.blockedOn=s,ds(i.priority,function(){if(o.tag===13){var c=$n(),f=Ts(o,c);f!==null&&Cn(f,o,c),m_(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=g_(i.nativeEvent);if(o===null){o=i.nativeEvent;var c=new o.constructor(o.type,o);nr=c,o.target.dispatchEvent(c),nr=null}else return s=pi(o),s!==null&&Cb(s),i.blockedOn=o,!1;s.shift()}return!0}function Nb(i,s,o){xf(i)&&o.delete(s)}function fP(){y_=!1,Ms!==null&&xf(Ms)&&(Ms=null),Ls!==null&&xf(Ls)&&(Ls=null),Us!==null&&xf(Us)&&(Us=null),Lc.forEach(Nb),Uc.forEach(Nb)}function Pf(i,s){i.blockedOn===s&&(i.blockedOn=null,y_||(y_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fP)))}var Nf=null;function Ob(i){Nf!==i&&(Nf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nf===i&&(Nf=null);for(var s=0;s<i.length;s+=3){var o=i[s],c=i[s+1],f=i[s+2];if(typeof c!="function"){if(__(c||o)===null)continue;break}var g=pi(o);g!==null&&(i.splice(s,3),s-=3,og(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Bc(i){function s(D){return Pf(D,i)}Ms!==null&&Pf(Ms,i),Ls!==null&&Pf(Ls,i),Us!==null&&Pf(Us,i),Lc.forEach(s),Uc.forEach(s);for(var o=0;o<zs.length;o++){var c=zs[o];c.blockedOn===i&&(c.blockedOn=null)}for(;0<zs.length&&(o=zs[0],o.blockedOn===null);)Pb(o),o.blockedOn===null&&zs.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],T=f[qt]||null;if(typeof g=="function")T||Ob(o);else if(T){var b=null;if(g&&g.hasAttribute("formAction")){if(f=g,T=g[qt]||null)b=T.formAction;else if(__(f)!==null)continue}else b=T.action;typeof b=="function"?o[c+1]=b:(o.splice(c,3),c-=3),Ob(o)}}}function v_(i){this._internalRoot=i}Of.prototype.render=v_.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=$n();Sb(o,c,i,s,null,null)},Of.prototype.unmount=v_.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;i.tag===0&&Il(),Sb(i.current,2,null,i,null,null),pf(),s[mi]=null}};function Of(i){this._internalRoot=i}Of.prototype.unstable_scheduleHydration=function(i){if(i){var s=vd();i={blockedOn:null,target:i,priority:s};for(var o=0;o<zs.length&&s!==0&&s<zs[o].priority;o++);zs.splice(o,0,i),o===0&&Pb(i)}};var Vb=e.version;if(Vb!=="19.0.0")throw Error(r(527,Vb,"19.0.0"));me.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=ae(s),i=i!==null?Te(i):null,i=i===null?null:i.stateNode,i};var mP={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:A,findFiberByHostInstance:vr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vf.isDisabled&&Vf.supportsFiber)try{as=Vf.inject(mP),gn=Vf}catch{}}return jc.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,c="",f=XT,g=ZT,T=JT,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Ib(i,1,!1,null,null,o,c,f,g,T,b,null),i[mi]=s.current,n_(i.nodeType===8?i.parentNode:i),new v_(s)},jc.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var c=!1,f="",g=XT,T=ZT,b=JT,D=null,L=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(L=o.formState)),s=Ib(i,1,!0,s,o??null,c,f,g,T,b,D,L),s.context=Ab(null),o=s.current,c=$n(),f=Cs(c),f.callback=null,Ds(o,f,c),s.current.lanes=c,Nt(s,c),Gr(s),i[mi]=s.current,n_(i),new Of(s)},jc.version="19.0.0",jc}var Hb;function IP(){if(Hb)return w_.exports;Hb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),w_.exports=bP(),w_.exports}var AP=IP(),qc={},Gb;function SP(){if(Gb)return qc;Gb=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.parse=u,qc.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function u(w,R){const N=new l,M=w.length;if(M<2)return N;const U=(R==null?void 0:R.decode)||y;let G=0;do{const J=w.indexOf("=",G);if(J===-1)break;const Y=w.indexOf(";",G),de=Y===-1?M:Y;if(J>de){G=w.lastIndexOf(";",J-1)+1;continue}const le=d(w,G,J),te=m(w,J,le),C=w.slice(le,te);if(N[C]===void 0){let S=d(w,J+1,de),A=m(w,de,S);const x=U(w.slice(S,A));N[C]=x}G=de+1}while(G<M);return N}function d(w,R,N){do{const M=w.charCodeAt(R);if(M!==32&&M!==9)return R}while(++R<N);return N}function m(w,R,N){for(;R>N;){const M=w.charCodeAt(--R);if(M!==32&&M!==9)return R+1}return N}function p(w,R,N){const M=(N==null?void 0:N.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const U=M(R);if(!e.test(U))throw new TypeError(`argument val is invalid: ${R}`);let G=w+"="+U;if(!N)return G;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);G+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);G+="; Domain="+N.domain}if(N.path){if(!r.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);G+="; Path="+N.path}if(N.expires){if(!v(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);G+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(G+="; HttpOnly"),N.secure&&(G+="; Secure"),N.partitioned&&(G+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":G+="; Priority=Low";break;case"medium":G+="; Priority=Medium";break;case"high":G+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":G+="; SameSite=Strict";break;case"lax":G+="; SameSite=Lax";break;case"none":G+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return G}function y(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function v(w){return a.call(w)==="[object Date]"}return qc}SP();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Kb="popstate";function RP(n={}){function e(r,a){let{pathname:l,search:u,hash:d}=r.location;return W_("",{pathname:l,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:yh(a)}return DP(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Sr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CP(){return Math.random().toString(36).substring(2,10)}function $b(n,e){return{usr:n.state,key:n.key,idx:e}}function W_(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vu(e):e,state:t,key:e&&e.key||r||CP()}}function yh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function DP(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,u=a.history,d="POP",m=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){d="POP";let U=y(),G=U==null?null:U-p;p=U,m&&m({action:d,location:M.location,delta:G})}function w(U,G){d="PUSH";let J=W_(M.location,U,G);p=y()+1;let Y=$b(J,p),de=M.createHref(J);try{u.pushState(Y,"",de)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(de)}l&&m&&m({action:d,location:M.location,delta:1})}function R(U,G){d="REPLACE";let J=W_(M.location,U,G);p=y();let Y=$b(J,p),de=M.createHref(J);u.replaceState(Y,"",de),l&&m&&m({action:d,location:M.location,delta:0})}function N(U){let G=a.location.origin!=="null"?a.location.origin:a.location.href,J=typeof U=="string"?U:yh(U);return J=J.replace(/ $/,"%20"),Et(G,`No window.location.(origin|href) available to create URL for href: ${J}`),new URL(J,G)}let M={get action(){return d},get location(){return n(a,u)},listen(U){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Kb,v),m=U,()=>{a.removeEventListener(Kb,v),m=null}},createHref(U){return e(a,U)},createURL:N,encodeLocation(U){let G=N(U);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:w,replace:R,go(U){return u.go(U)}};return M}function oA(n,e,t="/"){return xP(n,e,t,!1)}function xP(n,e,t,r){let a=typeof e=="string"?vu(e):e,l=Hi(a.pathname||"/",t);if(l==null)return null;let u=lA(n);PP(u);let d=null;for(let m=0;d==null&&m<u.length;++m){let p=jP(l);d=BP(u[m],p,r)}return d}function lA(n,e=[],t=[],r=""){let a=(l,u,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(Et(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=ji([r,m.relativePath]),y=t.concat(m);l.children&&l.children.length>0&&(Et(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),lA(l.children,e,y,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:UP(p,l.index),routesMeta:y})};return n.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let m of uA(l.path))a(l,u,m)}),e}function uA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let u=uA(r.join("/")),d=[];return d.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...u),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function PP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:zP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var NP=/^:[\w-]+$/,OP=3,VP=2,kP=1,MP=10,LP=-2,Qb=n=>n==="*";function UP(n,e){let t=n.split("/"),r=t.length;return t.some(Qb)&&(r+=LP),e&&(r+=VP),t.filter(a=>!Qb(a)).reduce((a,l)=>a+(NP.test(l)?OP:l===""?kP:MP),r)}function zP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function BP(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",u=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=lm({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),w=m.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=lm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:ji([l,v.pathname]),pathnameBase:KP(ji([l,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(l=ji([l,v.pathnameBase]))}return u}function lm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=FP(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:v},w)=>{if(y==="*"){let N=d[w]||"";u=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const R=d[w];return v&&!R?p[y]=void 0:p[y]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function FP(n,e=!1,t=!0){Sr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function jP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Hi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function qP(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?vu(n):n;return{pathname:t?t.startsWith("/")?t:HP(t,e):e,search:$P(r),hash:QP(a)}}function HP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function S_(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cA(n){let e=GP(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function hA(n,e,t,r=!1){let a;typeof n=="string"?a=vu(n):(a={...n},Et(!a.pathname||!a.pathname.includes("?"),S_("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),S_("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),S_("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,d;if(u==null)d=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;a.pathname=w.join("/")}d=v>=0?e[v]:"/"}let m=qP(a,d),p=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var ji=n=>n.join("/").replace(/\/\/+/g,"/"),KP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$P=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function WP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var dA=["POST","PUT","PATCH","DELETE"];new Set(dA);var YP=["GET",...dA];new Set(YP);var Eu=q.createContext(null);Eu.displayName="DataRouter";var Mm=q.createContext(null);Mm.displayName="DataRouterState";var fA=q.createContext({isTransitioning:!1});fA.displayName="ViewTransition";var XP=q.createContext(new Map);XP.displayName="Fetchers";var ZP=q.createContext(null);ZP.displayName="Await";var ci=q.createContext(null);ci.displayName="Navigation";var qh=q.createContext(null);qh.displayName="Location";var Dr=q.createContext({outlet:null,matches:[],isDataRoute:!1});Dr.displayName="Route";var jy=q.createContext(null);jy.displayName="RouteError";function JP(n,{relative:e}={}){Et(Hh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(ci),{hash:a,pathname:l,search:u}=Gh(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:ji([t,l])),r.createHref({pathname:d,search:u,hash:a})}function Hh(){return q.useContext(qh)!=null}function ga(){return Et(Hh(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(qh).location}var mA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pA(n){q.useContext(ci).static||q.useLayoutEffect(n)}function Tu(){let{isDataRoute:n}=q.useContext(Dr);return n?mN():eN()}function eN(){Et(Hh(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext(Eu),{basename:e,navigator:t}=q.useContext(ci),{matches:r}=q.useContext(Dr),{pathname:a}=ga(),l=JSON.stringify(cA(r)),u=q.useRef(!1);return pA(()=>{u.current=!0}),q.useCallback((m,p={})=>{if(Sr(u.current,mA),!u.current)return;if(typeof m=="number"){t.go(m);return}let y=hA(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ji([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}var tN=q.createContext(null);function nN(n){let e=q.useContext(Dr).outlet;return e&&q.createElement(tN.Provider,{value:n},e)}function gA(){let{matches:n}=q.useContext(Dr),e=n[n.length-1];return e?e.params:{}}function Gh(n,{relative:e}={}){let{matches:t}=q.useContext(Dr),{pathname:r}=ga(),a=JSON.stringify(cA(t));return q.useMemo(()=>hA(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function rN(n,e){return _A(n,e)}function _A(n,e,t,r){var J;Et(Hh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=q.useContext(ci),{matches:u}=q.useContext(Dr),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",v=d&&d.route;{let Y=v&&v.path||"";yA(p,!v||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let w=ga(),R;if(e){let Y=typeof e=="string"?vu(e):e;Et(y==="/"||((J=Y.pathname)==null?void 0:J.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),R=Y}else R=w;let N=R.pathname||"/",M=N;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");M="/"+N.replace(/^\//,"").split("/").slice(Y.length).join("/")}let U=!l&&t&&t.matches&&t.matches.length>0?t.matches:oA(n,{pathname:M});Sr(v||U!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Sr(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=lN(U&&U.map(Y=>Object.assign({},Y,{params:Object.assign({},m,Y.params),pathname:ji([y,a.encodeLocation?a.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:ji([y,a.encodeLocation?a.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),u,t,r);return e&&G?q.createElement(qh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},G):G}function iN(){let n=fN(),e=WP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:a},t):null,u)}var sN=q.createElement(iN,null),aN=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?q.createElement(Dr.Provider,{value:this.props.routeContext},q.createElement(jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oN({routeContext:n,match:e,children:t}){let r=q.useContext(Eu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Dr.Provider,{value:n},t)}function lN(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Et(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:y,errors:v}=t,w=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,y)=>{let v,w=!1,R=null,N=null;t&&(v=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||sN,u&&(d<0&&y===0?(yA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):d===y&&(w=!0,N=p.route.hydrateFallbackElement||null)));let M=e.concat(a.slice(0,y+1)),U=()=>{let G;return v?G=R:w?G=N:p.route.Component?G=q.createElement(p.route.Component,null):p.route.element?G=p.route.element:G=m,q.createElement(oN,{match:p,routeContext:{outlet:m,matches:M,isDataRoute:t!=null},children:G})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?q.createElement(aN,{location:t.location,revalidation:t.revalidation,component:R,error:v,children:U(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):U()},null)}function qy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uN(n){let e=q.useContext(Eu);return Et(e,qy(n)),e}function cN(n){let e=q.useContext(Mm);return Et(e,qy(n)),e}function hN(n){let e=q.useContext(Dr);return Et(e,qy(n)),e}function Hy(n){let e=hN(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function dN(){return Hy("useRouteId")}function fN(){var r;let n=q.useContext(jy),e=cN("useRouteError"),t=Hy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function mN(){let{router:n}=uN("useNavigate"),e=Hy("useNavigate"),t=q.useRef(!1);return pA(()=>{t.current=!0}),q.useCallback(async(a,l={})=>{Sr(t.current,mA),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Wb={};function yA(n,e,t){!e&&!Wb[n]&&(Wb[n]=!0,Sr(!1,t))}q.memo(pN);function pN({routes:n,future:e,state:t}){return _A(n,void 0,t,e)}function gN(n){return nN(n.context)}function Kr(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _N({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){Et(!Hh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=vu(t));let{pathname:m="/",search:p="",hash:y="",state:v=null,key:w="default"}=t,R=q.useMemo(()=>{let N=Hi(m,u);return N==null?null:{location:{pathname:N,search:p,hash:y,state:v,key:w},navigationType:r}},[u,m,p,y,v,w,r]);return Sr(R!=null,`<Router basename="${u}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:q.createElement(ci.Provider,{value:d},q.createElement(qh.Provider,{children:e,value:R}))}function yN({children:n,location:e}){return rN(Y_(n),e)}function Y_(n,e=[]){let t=[];return q.Children.forEach(n,(r,a)=>{if(!q.isValidElement(r))return;let l=[...e,a];if(r.type===q.Fragment){t.push.apply(t,Y_(r.props.children,l));return}Et(r.type===Kr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Y_(r.props.children,l)),t.push(u)}),t}var Kf="get",$f="application/x-www-form-urlencoded";function Lm(n){return n!=null&&typeof n.tagName=="string"}function vN(n){return Lm(n)&&n.tagName.toLowerCase()==="button"}function EN(n){return Lm(n)&&n.tagName.toLowerCase()==="form"}function TN(n){return Lm(n)&&n.tagName.toLowerCase()==="input"}function wN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bN(n,e){return n.button===0&&(!e||e==="_self")&&!wN(n)}function X_(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(a=>[t,a]):[[t,r]])},[]))}function IN(n,e){let t=X_(n);return e&&e.forEach((r,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var kf=null;function AN(){if(kf===null)try{new FormData(document.createElement("form"),0),kf=!1}catch{kf=!0}return kf}var SN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function R_(n){return n!=null&&!SN.has(n)?(Sr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$f}"`),null):n}function RN(n,e){let t,r,a,l,u;if(EN(n)){let d=n.getAttribute("action");r=d?Hi(d,e):null,t=n.getAttribute("method")||Kf,a=R_(n.getAttribute("enctype"))||$f,l=new FormData(n)}else if(vN(n)||TN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(r=m?Hi(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Kf,a=R_(n.getAttribute("formenctype"))||R_(d.getAttribute("enctype"))||$f,l=new FormData(d,n),!AN()){let{name:p,type:y,value:v}=n;if(y==="image"){let w=p?`${p}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else p&&l.append(p,v)}}else{if(Lm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Kf,r=null,a=$f,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:u}}function Gy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function CN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function xN(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await CN(l,t);return u.links?u.links():[]}return[]}));return VN(r.flat(1).filter(DN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Yb(n,e,t,r,a,l){let u=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>u(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var v;let y=r.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function PN(n,e,{includeHydrateFallback:t}={}){return NN(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function NN(n){return[...new Set(n)]}function ON(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function VN(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(ON(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function kN(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Hi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function vA(){let n=q.useContext(Eu);return Gy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function MN(){let n=q.useContext(Mm);return Gy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ky=q.createContext(void 0);Ky.displayName="FrameworkContext";function EA(){let n=q.useContext(Ky);return Gy(n,"You must render this element inside a <HydratedRouter> element"),n}function LN(n,e){let t=q.useContext(Ky),[r,a]=q.useState(!1),[l,u]=q.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,w=q.useRef(null);q.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=G=>{G.forEach(J=>{u(J.isIntersecting)})},U=new IntersectionObserver(M,{threshold:.5});return w.current&&U.observe(w.current),()=>{U.disconnect()}}},[n]),q.useEffect(()=>{if(r){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[r]);let R=()=>{a(!0)},N=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:Hc(d,R),onBlur:Hc(m,N),onMouseEnter:Hc(p,R),onMouseLeave:Hc(y,N),onTouchStart:Hc(v,R)}]:[!1,w,{}]}function Hc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function UN({page:n,...e}){let{router:t}=vA(),r=q.useMemo(()=>oA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?q.createElement(BN,{page:n,matches:r,...e}):null}function zN(n){let{manifest:e,routeModules:t}=EA(),[r,a]=q.useState([]);return q.useEffect(()=>{let l=!1;return xN(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),r}function BN({page:n,matches:e,...t}){let r=ga(),{manifest:a,routeModules:l}=EA(),{basename:u}=vA(),{loaderData:d,matches:m}=MN(),p=q.useMemo(()=>Yb(n,e,m,a,r,"data"),[n,e,m,a,r]),y=q.useMemo(()=>Yb(n,e,m,a,r,"assets"),[n,e,m,a,r]),v=q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let N=new Set,M=!1;if(e.forEach(G=>{var Y;let J=a.routes[G.route.id];!J||!J.hasLoader||(!p.some(de=>de.route.id===G.route.id)&&G.route.id in d&&((Y=l[G.route.id])!=null&&Y.shouldRevalidate)||J.hasClientLoader?M=!0:N.add(G.route.id))}),N.size===0)return[];let U=kN(n,u);return M&&N.size>0&&U.searchParams.set("_routes",e.filter(G=>N.has(G.route.id)).map(G=>G.route.id).join(",")),[U.pathname+U.search]},[u,d,r,a,p,e,n,l]),w=q.useMemo(()=>PN(y,a),[y,a]),R=zN(y);return q.createElement(q.Fragment,null,v.map(N=>q.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),w.map(N=>q.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),R.map(({key:N,link:M})=>q.createElement("link",{key:N,...M})))}function FN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var TA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TA&&(window.__reactRouterVersion="7.4.0")}catch{}function jN({basename:n,children:e,window:t}){let r=q.useRef();r.current==null&&(r.current=RP({window:t,v5Compat:!0}));let a=r.current,[l,u]=q.useState({action:a.action,location:a.location}),d=q.useCallback(m=>{q.startTransition(()=>u(m))},[u]);return q.useLayoutEffect(()=>a.listen(d),[a,d]),q.createElement(_N,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var wA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gi=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:u,state:d,target:m,to:p,preventScrollReset:y,viewTransition:v,...w},R){let{basename:N}=q.useContext(ci),M=typeof p=="string"&&wA.test(p),U,G=!1;if(typeof p=="string"&&M&&(U=p,TA))try{let A=new URL(window.location.href),x=p.startsWith("//")?new URL(A.protocol+p):new URL(p),V=Hi(x.pathname,N);x.origin===A.origin&&V!=null?p=V+x.search+x.hash:G=!0}catch{Sr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=JP(p,{relative:a}),[Y,de,le]=LN(r,w),te=KN(p,{replace:u,state:d,target:m,preventScrollReset:y,relative:a,viewTransition:v});function C(A){e&&e(A),A.defaultPrevented||te(A)}let S=q.createElement("a",{...w,...le,href:U||J,onClick:G||l?e:C,ref:FN(R,de),target:m,"data-discover":!M&&t==="render"?"true":void 0});return Y&&!M?q.createElement(q.Fragment,null,S,q.createElement(UN,{page:J})):S});Gi.displayName="Link";var qN=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:u,viewTransition:d,children:m,...p},y){let v=Gh(u,{relative:p.relative}),w=ga(),R=q.useContext(Mm),{navigator:N,basename:M}=q.useContext(ci),U=R!=null&&ZN(v)&&d===!0,G=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,J=w.pathname,Y=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(J=J.toLowerCase(),Y=Y?Y.toLowerCase():null,G=G.toLowerCase()),Y&&M&&(Y=Hi(Y,M)||Y);const de=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let le=J===G||!a&&J.startsWith(G)&&J.charAt(de)==="/",te=Y!=null&&(Y===G||!a&&Y.startsWith(G)&&Y.charAt(G.length)==="/"),C={isActive:le,isPending:te,isTransitioning:U},S=le?e:void 0,A;typeof r=="function"?A=r(C):A=[r,le?"active":null,te?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let x=typeof l=="function"?l(C):l;return q.createElement(Gi,{...p,"aria-current":S,className:A,ref:y,style:x,to:u,viewTransition:d},typeof m=="function"?m(C):m)});qN.displayName="NavLink";var HN=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:u=Kf,action:d,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,...w},R)=>{let N=YN(),M=XN(d,{relative:p}),U=u.toLowerCase()==="get"?"get":"post",G=typeof d=="string"&&wA.test(d),J=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let de=Y.nativeEvent.submitter,le=(de==null?void 0:de.getAttribute("formmethod"))||u;N(de||Y.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:v})};return q.createElement("form",{ref:R,method:U,action:M,onSubmit:r?m:J,...w,"data-discover":!G&&n==="render"?"true":void 0})});HN.displayName="Form";function GN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bA(n){let e=q.useContext(Eu);return Et(e,GN(n)),e}function KN(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:u}={}){let d=Tu(),m=ga(),p=Gh(n,{relative:l});return q.useCallback(y=>{if(bN(y,e)){y.preventDefault();let v=t!==void 0?t:yh(m)===yh(p);d(n,{replace:v,state:r,preventScrollReset:a,relative:l,viewTransition:u})}},[m,d,p,t,r,e,n,a,l,u])}function $N(n){Sr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=q.useRef(X_(n)),t=q.useRef(!1),r=ga(),a=q.useMemo(()=>IN(r.search,t.current?null:e.current),[r.search]),l=Tu(),u=q.useCallback((d,m)=>{const p=X_(typeof d=="function"?d(a):d);t.current=!0,l("?"+p,m)},[l,a]);return[a,u]}var QN=0,WN=()=>`__${String(++QN)}__`;function YN(){let{router:n}=bA("useSubmit"),{basename:e}=q.useContext(ci),t=dN();return q.useCallback(async(r,a={})=>{let{action:l,method:u,encType:d,formData:m,body:p}=RN(r,e);if(a.navigate===!1){let y=a.fetcherKey||WN();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function XN(n,{relative:e}={}){let{basename:t}=q.useContext(ci),r=q.useContext(Dr);Et(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Gh(n||".",{relative:e})},u=ga();if(n==null){l.search=u.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(v=>v).forEach(v=>d.append("index",v));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ji([t,l.pathname])),yh(l)}function ZN(n,e={}){let t=q.useContext(fA);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bA("useViewTransitionState"),a=Gh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Hi(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Hi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return lm(a.pathname,u)!=null||lm(a.pathname,l)!=null}new TextEncoder;const JN=()=>$.jsxs("div",{className:"w-full h-screen col justify-center items-center gap-y-5",children:[$.jsxs("div",{className:"col gap-y-2.5 max-w-100",children:[$.jsx("h1",{className:"text-4xl font-black",children:"아직도 엑셀로 요구사항을??"}),$.jsx("h2",{className:"font-light text-lg",children:"파이어베이스로 연동해둔 데이터베이스로 지하철, 버스, 택시 등 이동 시간에 짬 내서 빨리빨리 추가하시고 수정하시고 삭제하세요!"})]}),$.jsx(Gi,{to:"signin",className:"button",children:"지금 시작하세요"})]}),e1=n=>n.length===0?!1:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i.test(n),t1=["개발자","디자이너","기획자","고객","기타"],IA={initialized:!1,user:null,signin:async()=>({}),signout:async()=>({}),signup:async()=>({})},AA=q.createContext(IA),Xi=()=>q.useContext(AA),$y="-",n1=n=>{const e=i1(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:u=>{const d=u.split($y);return d[0]===""&&d.length!==1&&d.shift(),SA(d,e)||r1(u)},getConflictingClassGroupIds:(u,d)=>{const m=t[u]||[];return d&&r[u]?[...m,...r[u]]:m}}},SA=(n,e)=>{var u;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),a=r?SA(n.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const l=n.join($y);return(u=e.validators.find(({validator:d})=>d(l)))==null?void 0:u.classGroupId},Xb=/^\[(.+)\]$/,r1=n=>{if(Xb.test(n)){const e=Xb.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},i1=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const a in t)Z_(t[a],r,a,e);return r},Z_=(n,e,t,r)=>{n.forEach(a=>{if(typeof a=="string"){const l=a===""?e:Zb(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(s1(a)){Z_(a(r),e,t,r);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{Z_(u,Zb(e,l),t,r)})})},Zb=(n,e)=>{let t=n;return e.split($y).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},s1=n=>n.isThemeGetter,a1=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const a=(l,u)=>{t.set(l,u),e++,e>n&&(e=0,r=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=r.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},J_="!",ey=":",o1=ey.length,l1=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=a=>{const l=[];let u=0,d=0,m=0,p;for(let N=0;N<a.length;N++){let M=a[N];if(u===0&&d===0){if(M===ey){l.push(a.slice(m,N)),m=N+o1;continue}if(M==="/"){p=N;continue}}M==="["?u++:M==="]"?u--:M==="("?d++:M===")"&&d--}const y=l.length===0?a:a.substring(m),v=u1(y),w=v!==y,R=p&&p>m?p-m:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:v,maybePostfixModifierPosition:R}};if(e){const a=e+ey,l=r;r=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=r;r=l=>t({className:l,parseClassName:a})}return r},u1=n=>n.endsWith(J_)?n.substring(0,n.length-1):n.startsWith(J_)?n.substring(1):n,c1=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let l=[];return r.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},h1=n=>({cache:a1(n.cacheSize),parseClassName:l1(n),sortModifiers:c1(n),...n1(n)}),d1=/\s+/,f1=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],d=n.trim().split(d1);let m="";for(let p=d.length-1;p>=0;p-=1){const y=d[p],{isExternal:v,modifiers:w,hasImportantModifier:R,baseClassName:N,maybePostfixModifierPosition:M}=t(y);if(v){m=y+(m.length>0?" "+m:m);continue}let U=!!M,G=r(U?N.substring(0,M):N);if(!G){if(!U){m=y+(m.length>0?" "+m:m);continue}if(G=r(N),!G){m=y+(m.length>0?" "+m:m);continue}U=!1}const J=l(w).join(":"),Y=R?J+J_:J,de=Y+G;if(u.includes(de))continue;u.push(de);const le=a(G,U);for(let te=0;te<le.length;++te){const C=le[te];u.push(Y+C)}m=y+(m.length>0?" "+m:m)}return m};function m1(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=RA(e))&&(r&&(r+=" "),r+=t);return r}const RA=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=RA(n[r]))&&(t&&(t+=" "),t+=e);return t};function p1(n,...e){let t,r,a,l=u;function u(m){const p=e.reduce((y,v)=>v(y),n());return t=h1(p),r=t.cache.get,a=t.cache.set,l=d,d(m)}function d(m){const p=r(m);if(p)return p;const y=f1(m,t);return a(m,y),y}return function(){return l(m1.apply(null,arguments))}}const rn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},CA=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,DA=/^\((?:(\w[\w-]*):)?(.+)\)$/i,g1=/^\d+\/\d+$/,_1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,y1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,E1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xl=n=>g1.test(n),ze=n=>!!n&&!Number.isNaN(Number(n)),ro=n=>!!n&&Number.isInteger(Number(n)),Jb=n=>n.endsWith("%")&&ze(n.slice(0,-1)),Fs=n=>_1.test(n),w1=()=>!0,b1=n=>y1.test(n)&&!v1.test(n),Qy=()=>!1,I1=n=>E1.test(n),A1=n=>T1.test(n),S1=n=>!ye(n)&&!ve(n),R1=n=>wu(n,NA,Qy),ye=n=>CA.test(n),io=n=>wu(n,OA,b1),C_=n=>wu(n,U1,ze),C1=n=>wu(n,xA,Qy),D1=n=>wu(n,PA,A1),x1=n=>wu(n,Qy,I1),ve=n=>DA.test(n),Mf=n=>bu(n,OA),P1=n=>bu(n,z1),N1=n=>bu(n,xA),O1=n=>bu(n,NA),V1=n=>bu(n,PA),k1=n=>bu(n,B1,!0),wu=(n,e,t)=>{const r=CA.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},bu=(n,e,t=!1)=>{const r=DA.exec(n);return r?r[1]?e(r[1]):t:!1},xA=n=>n==="position",M1=new Set(["image","url"]),PA=n=>M1.has(n),L1=new Set(["length","size","percentage"]),NA=n=>L1.has(n),OA=n=>n==="length",U1=n=>n==="number",z1=n=>n==="family-name",B1=n=>n==="shadow",F1=()=>{const n=rn("color"),e=rn("font"),t=rn("text"),r=rn("font-weight"),a=rn("tracking"),l=rn("leading"),u=rn("breakpoint"),d=rn("container"),m=rn("spacing"),p=rn("radius"),y=rn("shadow"),v=rn("inset-shadow"),w=rn("drop-shadow"),R=rn("blur"),N=rn("perspective"),M=rn("aspect"),U=rn("ease"),G=rn("animate"),J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["auto","hidden","clip","visible","scroll"],le=()=>["auto","contain","none"],te=()=>[ve,ye,m],C=()=>[xl,"full","auto",...te()],S=()=>[ro,"none","subgrid",ve,ye],A=()=>["auto",{span:["full",ro,ve,ye]},ve,ye],x=()=>[ro,"auto",ve,ye],V=()=>["auto","min","max","fr",ve,ye],z=()=>["start","end","center","between","around","evenly","stretch","baseline"],P=()=>["start","end","center","stretch"],$e=()=>["auto",...te()],Je=()=>[xl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...te()],ne=()=>[n,ve,ye],Ae=()=>[Jb,io],he=()=>["","none","full",p,ve,ye],Ce=()=>["",ze,Mf,io],O=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>["","none",R,ve,ye],pe=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ve,ye],me=()=>["none",ze,ve,ye],De=()=>["none",ze,ve,ye],xe=()=>[ze,ve,ye],ct=()=>[xl,"full",...te()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Fs],breakpoint:[Fs],color:[w1],container:[Fs],"drop-shadow":[Fs],ease:["in","out","in-out"],font:[S1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Fs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Fs],shadow:[Fs],spacing:["px",ze],text:[Fs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xl,ye,ve,M]}],container:["container"],columns:[{columns:[ze,ye,ve,d]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),ye,ve]}],overflow:[{overflow:de()}],"overflow-x":[{"overflow-x":de()}],"overflow-y":[{"overflow-y":de()}],overscroll:[{overscroll:le()}],"overscroll-x":[{"overscroll-x":le()}],"overscroll-y":[{"overscroll-y":le()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[ro,"auto",ve,ye]}],basis:[{basis:[xl,"full","auto",d,...te()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ze,xl,"auto","initial","none",ye]}],grow:[{grow:["",ze,ve,ye]}],shrink:[{shrink:["",ze,ve,ye]}],order:[{order:[ro,"first","last","none",ve,ye]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":x()}],"col-end":[{"col-end":x()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":x()}],"row-end":[{"row-end":x()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:te()}],"gap-x":[{"gap-x":te()}],"gap-y":[{"gap-y":te()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...P(),"normal"]}],"justify-self":[{"justify-self":["auto",...P()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...P(),"baseline"]}],"align-self":[{self:["auto",...P(),"baseline"]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...P(),"baseline"]}],"place-self":[{"place-self":["auto",...P()]}],p:[{p:te()}],px:[{px:te()}],py:[{py:te()}],ps:[{ps:te()}],pe:[{pe:te()}],pt:[{pt:te()}],pr:[{pr:te()}],pb:[{pb:te()}],pl:[{pl:te()}],m:[{m:$e()}],mx:[{mx:$e()}],my:[{my:$e()}],ms:[{ms:$e()}],me:[{me:$e()}],mt:[{mt:$e()}],mr:[{mr:$e()}],mb:[{mb:$e()}],ml:[{ml:$e()}],"space-x":[{"space-x":te()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":te()}],"space-y-reverse":["space-y-reverse"],size:[{size:Je()}],w:[{w:[d,"screen",...Je()]}],"min-w":[{"min-w":[d,"screen","none",...Je()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[u]},...Je()]}],h:[{h:["screen",...Je()]}],"min-h":[{"min-h":["screen","none",...Je()]}],"max-h":[{"max-h":["screen",...Je()]}],"font-size":[{text:["base",t,Mf,io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,C_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Jb,ye]}],"font-family":[{font:[P1,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ve,ye]}],"line-clamp":[{"line-clamp":[ze,"none",ve,C_]}],leading:[{leading:[l,...te()]}],"list-image":[{"list-image":["none",ve,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:[ze,"from-font","auto",ve,io]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[ze,"auto",ve,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:te()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),N1,C1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",O1,R1]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ro,ve,ye],radial:["",ve,ye],conic:[ro,ve,ye]},V1,D1]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:Ae()}],"gradient-via-pos":[{via:Ae()}],"gradient-to-pos":[{to:Ae()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:Ce()}],"border-w-x":[{"border-x":Ce()}],"border-w-y":[{"border-y":Ce()}],"border-w-s":[{"border-s":Ce()}],"border-w-e":[{"border-e":Ce()}],"border-w-t":[{"border-t":Ce()}],"border-w-r":[{"border-r":Ce()}],"border-w-b":[{"border-b":Ce()}],"border-w-l":[{"border-l":Ce()}],"divide-x":[{"divide-x":Ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...O(),"hidden","none"]}],"divide-style":[{divide:[...O(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...O(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ze,ve,ye]}],"outline-w":[{outline:["",ze,Mf,io]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",y,k1,x1]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",ve,ye,v]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:Ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[ze,io]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":Ce()}],"inset-ring-color":[{"inset-ring":ne()}],opacity:[{opacity:[ze,ve,ye]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none",ve,ye]}],blur:[{blur:Te()}],brightness:[{brightness:[ze,ve,ye]}],contrast:[{contrast:[ze,ve,ye]}],"drop-shadow":[{"drop-shadow":["","none",w,ve,ye]}],grayscale:[{grayscale:["",ze,ve,ye]}],"hue-rotate":[{"hue-rotate":[ze,ve,ye]}],invert:[{invert:["",ze,ve,ye]}],saturate:[{saturate:[ze,ve,ye]}],sepia:[{sepia:["",ze,ve,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,ye]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[ze,ve,ye]}],"backdrop-contrast":[{"backdrop-contrast":[ze,ve,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ze,ve,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ze,ve,ye]}],"backdrop-invert":[{"backdrop-invert":["",ze,ve,ye]}],"backdrop-opacity":[{"backdrop-opacity":[ze,ve,ye]}],"backdrop-saturate":[{"backdrop-saturate":[ze,ve,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",ze,ve,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":te()}],"border-spacing-x":[{"border-spacing-x":te()}],"border-spacing-y":[{"border-spacing-y":te()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ze,"initial",ve,ye]}],ease:[{ease:["linear","initial",U,ve,ye]}],delay:[{delay:[ze,ve,ye]}],animate:[{animate:["none",G,ve,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,ve,ye]}],"perspective-origin":[{"perspective-origin":pe()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:De()}],"scale-x":[{"scale-x":De()}],"scale-y":[{"scale-y":De()}],"scale-z":[{"scale-z":De()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[ve,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:pe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ct()}],"translate-x":[{"translate-x":ct()}],"translate-y":[{"translate-y":ct()}],"translate-z":[{"translate-z":ct()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":te()}],"scroll-mx":[{"scroll-mx":te()}],"scroll-my":[{"scroll-my":te()}],"scroll-ms":[{"scroll-ms":te()}],"scroll-me":[{"scroll-me":te()}],"scroll-mt":[{"scroll-mt":te()}],"scroll-mr":[{"scroll-mr":te()}],"scroll-mb":[{"scroll-mb":te()}],"scroll-ml":[{"scroll-ml":te()}],"scroll-p":[{"scroll-p":te()}],"scroll-px":[{"scroll-px":te()}],"scroll-py":[{"scroll-py":te()}],"scroll-ps":[{"scroll-ps":te()}],"scroll-pe":[{"scroll-pe":te()}],"scroll-pt":[{"scroll-pt":te()}],"scroll-pr":[{"scroll-pr":te()}],"scroll-pb":[{"scroll-pb":te()}],"scroll-pl":[{"scroll-pl":te()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,ye]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[ze,Mf,io,C_]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},j1=p1(F1),Qs=({id:n,label:e,onChange:t,isSelectTag:r,ref:a,value:l,data:u,placeholder:d,type:m})=>{const p="ti-input";return $.jsxs("div",{className:"ti-div",children:[$.jsx("label",{htmlFor:n,className:"ti-label",children:e}),r?$.jsxs("select",{id:n,onChange:y=>t(y.target.value),value:l,ref:a,className:p,children:[$.jsx("option",{value:"",children:d??"선택"}),u==null?void 0:u.map(y=>$.jsx("option",{value:y,children:y},y))]}):$.jsx("input",{className:j1(p,"px-1.5"),id:n,onChange:y=>t(y.target.value),value:l,placeholder:d,ref:a,type:m??"text"})]})},q1=()=>{const n=$N()[0].get("content"),[e,t]=q.useState(""),[r,a]=q.useState(""),[l,u]=q.useState(""),[d,m]=q.useState(""),p=q.useRef(null),y=q.useRef(null),v=q.useRef(null),w=q.useRef(null),{signin:R,signup:N}=Xi(),M=Tu(),U=async()=>{var de,le,te,C;if(n){if(l.length===0)return alert("이름을 입력해주세요."),(de=v.current)==null?void 0:de.focus();if(d.length===0)return alert("종사직종을 선택해주세요."),(le=w.current)==null?void 0:le.showPicker()}if(!e1(e))return alert("이메일을 확인해주세요."),(te=p.current)==null?void 0:te.focus();if(r.length<6||r.length>18)return alert("비밀번호를 확인해주세요. 6-18자 사이 입니다."),(C=y.current)==null?void 0:C.focus();if(!n){const{success:S,message:A}=await R(e,r);if(!S)return A==="존재하지 않는 유저입니다."?confirm(A+" 회원가입 하시겠습니까?")?(M("/signin?content=new"),setTimeout(()=>{var x;(x=v.current)==null||x.focus()},300)):void 0:alert(A);alert("환영합니다."),M("/project");return}const{success:J,message:Y}=await N({email:e,jobDesc:d,name:l,password:r});if(!J)return alert(Y);alert("회원가입을 진심으로 축하드립니다. 프로젝트를 생성해보세요!"),M("/project")};return $.jsx("div",{children:$.jsxs("form",{className:"col gap-y-2.5 max-w-100 mx-auto p-5",onSubmit:G=>{G.preventDefault();//! 새로고침 방지
U()},children:[n&&$.jsxs($.Fragment,{children:[$.jsx(Qs,{ref:v,type:"text",id:"name",value:l,onChange:u,placeholder:"박보검",label:"이름"}),$.jsx(Qs,{ref:w,id:"jobDesc",value:d,onChange:G=>m(G),label:"직종",data:t1,placeholder:"직종 선택",isSelectTag:!0})]}),$.jsx(Qs,{ref:p,type:"email",id:"email",value:e,onChange:t,placeholder:"email@email.com",label:"이메일"}),$.jsx(Qs,{label:"비밀번호",type:"password",id:"password",value:r,onChange:a,placeholder:"* * * * * * * *",ref:y}),$.jsx("button",{className:"button mt-2.5",children:n?"회원가입":"로그인"}),$.jsx(Gi,{to:n?"/signin":"/signin?content=new",className:"button cancel",children:n?"돌아가기":"회원가입"})]})})},H1=()=>{};var eI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},G1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},kA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,d=u?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let w=(d&15)<<2|p>>6,R=p&63;m||(R=64,u||(w=64)),r.push(t[y],t[v],t[w],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):G1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||p==null||v==null)throw new K1;const w=l<<2|d>>4;if(r.push(w),p!==64){const R=d<<4&240|p>>2;if(r.push(R),v!==64){const N=p<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class K1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $1=function(n){const e=VA(n);return kA.encodeByteArray(e,!0)},um=function(n){return $1(n).replace(/\./g,"")},Wy=function(n){try{return kA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cm(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Q1(t)||(n[t]=cm(n[t],e[t]));return n}function Q1(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=()=>MA().__FIREBASE_DEFAULTS__,Y1=()=>{if(typeof process>"u"||typeof eI>"u")return;const n=eI.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},X1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Wy(n[1]);return e&&JSON.parse(e)},Yy=()=>{try{return H1()||W1()||Y1()||X1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},LA=()=>{var n;return(n=Yy())===null||n===void 0?void 0:n.config},Z1=n=>{var e;return(e=Yy())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[um(JSON.stringify(t)),um(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function Xy(){var n;const e=(n=Yy())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nO(){return typeof window<"u"||UA()}function UA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function rO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Zy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const n=wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FA(){return!Xy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vh(){try{return typeof indexedDB=="object"}catch{return!1}}function iO(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="FirebaseError";class Pn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sO,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?aO(l,r):"Error",d=`${this.serviceName}: ${u} (${a}).`;return new Pn(a,d,r)}}function aO(n,e){return n.replace(oO,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const oO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function lO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ra(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],u=e[a];if(nI(l)&&nI(u)){if(!ra(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function nI(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ql(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function eh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function jA(n,e){const t=new uO(n,e);return t.subscribe.bind(t)}class uO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");cO(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=D_),a.error===void 0&&(a.error=D_),a.complete===void 0&&(a.complete=D_);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function D_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n){return n&&n._delegate?n._delegate:n}class ii{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new J1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fO(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&u.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dO(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dO(n){return n===ao?void 0:n}function fO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=[];var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const HA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},mO=Ue.INFO,pO={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},gO=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=pO[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=mO,this._logHandler=gO,this._userLogHandler=null,Jy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}function _O(n){Jy.forEach(e=>{e.setLogLevel(n)})}function yO(n,e){for(const t of Jy){let r=null;e&&e.level&&(r=HA[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const d=u.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&n({level:Ue[l].toLowerCase(),message:d,args:u,type:a.name})}}}const vO=(n,e)=>e.some(t=>n instanceof t);let rI,iI;function EO(){return rI||(rI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TO(){return iI||(iI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GA=new WeakMap,ty=new WeakMap,KA=new WeakMap,x_=new WeakMap,ev=new WeakMap;function wO(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Zs(n.result)),a()},u=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&GA.set(t,n)}).catch(()=>{}),ev.set(e,n),e}function bO(n){if(ty.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});ty.set(n,e)}let ny={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ty.get(n);if(e==="objectStoreNames")return n.objectStoreNames||KA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IO(n){ny=n(ny)}function AO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(P_(this),e,...t);return KA.set(r,e.sort?e.sort():[e]),Zs(r)}:TO().includes(n)?function(...e){return n.apply(P_(this),e),Zs(GA.get(this))}:function(...e){return Zs(n.apply(P_(this),e))}}function SO(n){return typeof n=="function"?AO(n):(n instanceof IDBTransaction&&bO(n),vO(n,EO())?new Proxy(n,ny):n)}function Zs(n){if(n instanceof IDBRequest)return wO(n);if(x_.has(n))return x_.get(n);const e=SO(n);return e!==n&&(x_.set(n,e),ev.set(e,n)),e}const P_=n=>ev.get(n);function RO(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),d=Zs(u);return r&&u.addEventListener("upgradeneeded",m=>{r(Zs(u.result),m.oldVersion,m.newVersion,Zs(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const CO=["get","getKey","getAll","getAllKeys","count"],DO=["put","add","delete","clear"],N_=new Map;function sI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(N_.get(e))return N_.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=DO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||CO.includes(t)))return;const l=async function(u,...d){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return N_.set(e,l),l}IO(n=>({...n,get:(e,t,r)=>sI(e,t)||n.get(e,t,r),has:(e,t)=>!!sI(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PO(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function PO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hm="@firebase/app",ry="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Um("@firebase/app"),NO="@firebase/app-compat",OO="@firebase/analytics-compat",VO="@firebase/analytics",kO="@firebase/app-check-compat",MO="@firebase/app-check",LO="@firebase/auth",UO="@firebase/auth-compat",zO="@firebase/database",BO="@firebase/data-connect",FO="@firebase/database-compat",jO="@firebase/functions",qO="@firebase/functions-compat",HO="@firebase/installations",GO="@firebase/installations-compat",KO="@firebase/messaging",$O="@firebase/messaging-compat",QO="@firebase/performance",WO="@firebase/performance-compat",YO="@firebase/remote-config",XO="@firebase/remote-config-compat",ZO="@firebase/storage",JO="@firebase/storage-compat",eV="@firebase/firestore",tV="@firebase/vertexai",nV="@firebase/firestore-compat",rV="firebase",iV="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="[DEFAULT]",sV={[hm]:"fire-core",[NO]:"fire-core-compat",[VO]:"fire-analytics",[OO]:"fire-analytics-compat",[MO]:"fire-app-check",[kO]:"fire-app-check-compat",[LO]:"fire-auth",[UO]:"fire-auth-compat",[zO]:"fire-rtdb",[BO]:"fire-data-connect",[FO]:"fire-rtdb-compat",[jO]:"fire-fn",[qO]:"fire-fn-compat",[HO]:"fire-iid",[GO]:"fire-iid-compat",[KO]:"fire-fcm",[$O]:"fire-fcm-compat",[QO]:"fire-perf",[WO]:"fire-perf-compat",[YO]:"fire-rc",[XO]:"fire-rc-compat",[ZO]:"fire-gcs",[JO]:"fire-gcs-compat",[eV]:"fire-fst",[nV]:"fire-fst-compat",[tV]:"fire-vertex","fire-js":"fire-js",[rV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new Map,Yl=new Map,Xl=new Map;function Eh(n,e){try{n.container.addComponent(e)}catch(t){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $A(n,e){n.container.addOrOverwriteComponent(e)}function aa(n){const e=n.name;if(Xl.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;Xl.set(e,n);for(const t of sa.values())Eh(t,n);for(const t of Yl.values())Eh(t,n);return!0}function QA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function aV(n,e,t=ia){QA(n,e).clearInstance(t)}function WA(n){return n.options!==void 0}function ft(n){return n==null?!1:n.settings!==void 0}function oV(){Xl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Vo("app","Firebase",lV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YA=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n,e){const t=Wy(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class uV extends YA{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,u={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const d=e;super(d.options,u,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&aI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&aI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ar(hm,ry,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){nv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw gr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=iV;function tv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ia,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw gr.create("bad-app-name",{appName:String(a)});if(t||(t=LA()),!t)throw gr.create("no-options");const l=sa.get(a);if(l){if(ra(t,l.options)&&ra(r,l.config))return l;throw gr.create("duplicate-app",{appName:a})}const u=new qA(a);for(const m of Xl.values())u.addComponent(m);const d=new YA(t,r,u);return sa.set(a,d),d}function cV(n,e){if(nO()&&!UA())throw gr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;WA(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((y,v)=>Math.imul(31,y)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw gr.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),u=Yl.get(l);if(u)return u.incRefCount(e.releaseOnDeref),u;const d=new qA(l);for(const p of Xl.values())d.addComponent(p);const m=new uV(t,e,l,d);return Yl.set(l,m),m}function hV(n=ia){const e=sa.get(n);if(!e&&n===ia&&LA())return tv();if(!e)throw gr.create("no-app",{appName:n});return e}function dV(){return Array.from(sa.values())}async function nv(n){let e=!1;const t=n.name;sa.has(t)?(e=!0,sa.delete(t)):Yl.has(t)&&n.decRefCount()<=0&&(Yl.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Ar(n,e,t){var r;let a=(r=sV[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(d.join(" "));return}aa(new ii(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function XA(n,e){if(n!==null&&typeof n!="function")throw gr.create("invalid-log-argument");yO(n,e)}function ZA(n){_O(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="firebase-heartbeat-database",mV=1,Th="firebase-heartbeat-store";let O_=null;function JA(){return O_||(O_=RO(fV,mV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Th)}catch(t){console.warn(t)}}}}).catch(n=>{throw gr.create("idb-open",{originalErrorMessage:n.message})})),O_}async function pV(n){try{const t=(await JA()).transaction(Th),r=await t.objectStore(Th).get(eS(n));return await t.done,r}catch(e){if(e instanceof Pn)Ki.warn(e.message);else{const t=gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ki.warn(t.message)}}}async function oI(n,e){try{const r=(await JA()).transaction(Th,"readwrite");await r.objectStore(Th).put(e,eS(n)),await r.done}catch(t){if(t instanceof Pn)Ki.warn(t.message);else{const r=gr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ki.warn(r.message)}}}function eS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=1024,_V=30;class yV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EV(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=lI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_V){const u=TV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ki.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lI(),{heartbeatsToSend:r,unsentEntries:a}=vV(this._heartbeatsCache.heartbeats),l=um(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ki.warn(t),""}}}function lI(){return new Date().toISOString().substring(0,10)}function vV(n,e=gV){const t=[];let r=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),uI(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),uI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class EV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vh()?iO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function uI(n){return um(JSON.stringify({version:2,heartbeats:n})).length}function TV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(n){aa(new ii("platform-logger",e=>new xO(e),"PRIVATE")),aa(new ii("heartbeat",e=>new yV(e),"PRIVATE")),Ar(hm,ry,n),Ar(hm,ry,"esm2017"),Ar("fire-js","")}wV("");const bV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pn,SDK_VERSION:_a,_DEFAULT_ENTRY_NAME:ia,_addComponent:Eh,_addOrOverwriteComponent:$A,_apps:sa,_clearComponents:oV,_components:Xl,_getProvider:QA,_isFirebaseApp:WA,_isFirebaseServerApp:ft,_registerComponent:aa,_removeServiceInstance:aV,_serverApps:Yl,deleteApp:nv,getApp:hV,getApps:dV,initializeApp:tv,initializeServerApp:cV,onLog:XA,registerVersion:Ar,setLogLevel:ZA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t){this._delegate=e,this.firebase=t,Eh(e,new ii("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),nv(this._delegate)))}_getService(e,t=ia){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=ia){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Eh(this._delegate,e)}_addOrOverwriteComponent(e){$A(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},cI=new Vo("app-compat","Firebase",AV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(n){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Ar,setLogLevel:ZA,onLog:XA,apps:null,SDK_VERSION:_a,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:bV}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(p){delete e[p]}function a(p){if(p=p||ia,!tI(e,p))throw cI.create("no-app",{appName:p});return e[p]}a.App=n;function l(p,y={}){const v=tv(p,y);if(tI(e,v.name))return e[v.name];const w=new n(v,t);return e[v.name]=w,w}function u(){return Object.keys(e).map(p=>e[p])}function d(p){const y=p.name,v=y.replace("-compat","");if(aa(p)&&p.type==="PUBLIC"){const w=(R=a())=>{if(typeof R[v]!="function")throw cI.create("invalid-app-argument",{appName:y});return R[v]()};p.serviceProps!==void 0&&cm(w,p.serviceProps),t[v]=w,n.prototype[v]=function(...R){return this._getService.bind(this,y).apply(this,p.multipleInstances?R:[])}}return p.type==="PUBLIC"?t[v]:null}function m(p,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){const n=SV(IV);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:tS,extendNamespace:e,createSubscribe:jA,ErrorFactory:Vo,deepExtend:cm});function e(t){cm(n,t)}return n}const RV=tS();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new Um("@firebase/app-compat"),CV="@firebase/app-compat",DV="0.2.51";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(n){Ar(CV,DV,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=MA();if(n.firebase!==void 0){hI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&hI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ya=RV;xV();var PV="firebase",NV="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ya.registerVersion(PV,NV,"app-compat");var dI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,nS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function A(){}A.prototype=S.prototype,C.D=S.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(x,V,z){for(var P=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)P[$e-2]=arguments[$e];return S.prototype[V].apply(x,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,A){A||(A=0);var x=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)x[V]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(V=0;16>V;++V)x[V]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=C.g[0],A=C.g[1],V=C.g[2];var z=C.g[3],P=S+(z^A&(V^z))+x[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=z+(V^S&(A^V))+x[1]+3905402710&4294967295,z=S+(P<<12&4294967295|P>>>20),P=V+(A^z&(S^A))+x[2]+606105819&4294967295,V=z+(P<<17&4294967295|P>>>15),P=A+(S^V&(z^S))+x[3]+3250441966&4294967295,A=V+(P<<22&4294967295|P>>>10),P=S+(z^A&(V^z))+x[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=z+(V^S&(A^V))+x[5]+1200080426&4294967295,z=S+(P<<12&4294967295|P>>>20),P=V+(A^z&(S^A))+x[6]+2821735955&4294967295,V=z+(P<<17&4294967295|P>>>15),P=A+(S^V&(z^S))+x[7]+4249261313&4294967295,A=V+(P<<22&4294967295|P>>>10),P=S+(z^A&(V^z))+x[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=z+(V^S&(A^V))+x[9]+2336552879&4294967295,z=S+(P<<12&4294967295|P>>>20),P=V+(A^z&(S^A))+x[10]+4294925233&4294967295,V=z+(P<<17&4294967295|P>>>15),P=A+(S^V&(z^S))+x[11]+2304563134&4294967295,A=V+(P<<22&4294967295|P>>>10),P=S+(z^A&(V^z))+x[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=z+(V^S&(A^V))+x[13]+4254626195&4294967295,z=S+(P<<12&4294967295|P>>>20),P=V+(A^z&(S^A))+x[14]+2792965006&4294967295,V=z+(P<<17&4294967295|P>>>15),P=A+(S^V&(z^S))+x[15]+1236535329&4294967295,A=V+(P<<22&4294967295|P>>>10),P=S+(V^z&(A^V))+x[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=z+(A^V&(S^A))+x[6]+3225465664&4294967295,z=S+(P<<9&4294967295|P>>>23),P=V+(S^A&(z^S))+x[11]+643717713&4294967295,V=z+(P<<14&4294967295|P>>>18),P=A+(z^S&(V^z))+x[0]+3921069994&4294967295,A=V+(P<<20&4294967295|P>>>12),P=S+(V^z&(A^V))+x[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=z+(A^V&(S^A))+x[10]+38016083&4294967295,z=S+(P<<9&4294967295|P>>>23),P=V+(S^A&(z^S))+x[15]+3634488961&4294967295,V=z+(P<<14&4294967295|P>>>18),P=A+(z^S&(V^z))+x[4]+3889429448&4294967295,A=V+(P<<20&4294967295|P>>>12),P=S+(V^z&(A^V))+x[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=z+(A^V&(S^A))+x[14]+3275163606&4294967295,z=S+(P<<9&4294967295|P>>>23),P=V+(S^A&(z^S))+x[3]+4107603335&4294967295,V=z+(P<<14&4294967295|P>>>18),P=A+(z^S&(V^z))+x[8]+1163531501&4294967295,A=V+(P<<20&4294967295|P>>>12),P=S+(V^z&(A^V))+x[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=z+(A^V&(S^A))+x[2]+4243563512&4294967295,z=S+(P<<9&4294967295|P>>>23),P=V+(S^A&(z^S))+x[7]+1735328473&4294967295,V=z+(P<<14&4294967295|P>>>18),P=A+(z^S&(V^z))+x[12]+2368359562&4294967295,A=V+(P<<20&4294967295|P>>>12),P=S+(A^V^z)+x[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=z+(S^A^V)+x[8]+2272392833&4294967295,z=S+(P<<11&4294967295|P>>>21),P=V+(z^S^A)+x[11]+1839030562&4294967295,V=z+(P<<16&4294967295|P>>>16),P=A+(V^z^S)+x[14]+4259657740&4294967295,A=V+(P<<23&4294967295|P>>>9),P=S+(A^V^z)+x[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=z+(S^A^V)+x[4]+1272893353&4294967295,z=S+(P<<11&4294967295|P>>>21),P=V+(z^S^A)+x[7]+4139469664&4294967295,V=z+(P<<16&4294967295|P>>>16),P=A+(V^z^S)+x[10]+3200236656&4294967295,A=V+(P<<23&4294967295|P>>>9),P=S+(A^V^z)+x[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=z+(S^A^V)+x[0]+3936430074&4294967295,z=S+(P<<11&4294967295|P>>>21),P=V+(z^S^A)+x[3]+3572445317&4294967295,V=z+(P<<16&4294967295|P>>>16),P=A+(V^z^S)+x[6]+76029189&4294967295,A=V+(P<<23&4294967295|P>>>9),P=S+(A^V^z)+x[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=z+(S^A^V)+x[12]+3873151461&4294967295,z=S+(P<<11&4294967295|P>>>21),P=V+(z^S^A)+x[15]+530742520&4294967295,V=z+(P<<16&4294967295|P>>>16),P=A+(V^z^S)+x[2]+3299628645&4294967295,A=V+(P<<23&4294967295|P>>>9),P=S+(V^(A|~z))+x[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=z+(A^(S|~V))+x[7]+1126891415&4294967295,z=S+(P<<10&4294967295|P>>>22),P=V+(S^(z|~A))+x[14]+2878612391&4294967295,V=z+(P<<15&4294967295|P>>>17),P=A+(z^(V|~S))+x[5]+4237533241&4294967295,A=V+(P<<21&4294967295|P>>>11),P=S+(V^(A|~z))+x[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=z+(A^(S|~V))+x[3]+2399980690&4294967295,z=S+(P<<10&4294967295|P>>>22),P=V+(S^(z|~A))+x[10]+4293915773&4294967295,V=z+(P<<15&4294967295|P>>>17),P=A+(z^(V|~S))+x[1]+2240044497&4294967295,A=V+(P<<21&4294967295|P>>>11),P=S+(V^(A|~z))+x[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=z+(A^(S|~V))+x[15]+4264355552&4294967295,z=S+(P<<10&4294967295|P>>>22),P=V+(S^(z|~A))+x[6]+2734768916&4294967295,V=z+(P<<15&4294967295|P>>>17),P=A+(z^(V|~S))+x[13]+1309151649&4294967295,A=V+(P<<21&4294967295|P>>>11),P=S+(V^(A|~z))+x[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=z+(A^(S|~V))+x[11]+3174756917&4294967295,z=S+(P<<10&4294967295|P>>>22),P=V+(S^(z|~A))+x[2]+718787259&4294967295,V=z+(P<<15&4294967295|P>>>17),P=A+(z^(V|~S))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+z&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var A=S-this.blockSize,x=this.B,V=this.h,z=0;z<S;){if(V==0)for(;z<=A;)a(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<S;)if(x[V++]=C.charCodeAt(z++),V==this.blockSize){a(this,x),V=0;break}}else for(;z<S;)if(x[V++]=C[z++],V==this.blockSize){a(this,x),V=0;break}}this.h=V,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var A=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=A&255,A/=256;for(this.u(C),C=Array(16),S=A=0;4>S;++S)for(var x=0;32>x;x+=8)C[A++]=this.g[S]>>>x&255;return C};function l(C,S){var A=d;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=S(C)}function u(C,S){this.h=S;for(var A=[],x=!0,V=C.length-1;0<=V;V--){var z=C[V]|0;x&&z==S||(A[V]=z,x=!1)}this.g=A}var d={};function m(C){return-128<=C&&128>C?l(C,function(S){return new u([S|0],0>S?-1:0)}):new u([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return U(p(-C));for(var S=[],A=1,x=0;C>=A;x++)S[x]=C/A|0,A*=4294967296;return new u(S,0)}function y(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return U(y(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(S,8)),x=v,V=0;V<C.length;V+=8){var z=Math.min(8,C.length-V),P=parseInt(C.substring(V,V+z),S);8>z?(z=p(Math.pow(S,z)),x=x.j(z).add(p(P))):(x=x.j(A),x=x.add(p(P)))}return x}var v=m(0),w=m(1),R=m(16777216);n=u.prototype,n.m=function(){if(M(this))return-U(this).m();for(var C=0,S=1,A=0;A<this.g.length;A++){var x=this.i(A);C+=(0<=x?x:4294967296+x)*S,S*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N(this))return"0";if(M(this))return"-"+U(this).toString(C);for(var S=p(Math.pow(C,6)),A=this,x="";;){var V=de(A,S).g;A=G(A,V.j(S));var z=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=V,N(A))return z+x;for(;6>z.length;)z="0"+z;x=z+x}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function N(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function M(C){return C.h==-1}n.l=function(C){return C=G(this,C),M(C)?-1:N(C)?0:1};function U(C){for(var S=C.g.length,A=[],x=0;x<S;x++)A[x]=~C.g[x];return new u(A,~C.h).add(w)}n.abs=function(){return M(this)?U(this):this},n.add=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],x=0,V=0;V<=S;V++){var z=x+(this.i(V)&65535)+(C.i(V)&65535),P=(z>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);x=P>>>16,z&=65535,P&=65535,A[V]=P<<16|z}return new u(A,A[A.length-1]&-2147483648?-1:0)};function G(C,S){return C.add(U(S))}n.j=function(C){if(N(this)||N(C))return v;if(M(this))return M(C)?U(this).j(U(C)):U(U(this).j(C));if(M(C))return U(this.j(U(C)));if(0>this.l(R)&&0>C.l(R))return p(this.m()*C.m());for(var S=this.g.length+C.g.length,A=[],x=0;x<2*S;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var V=0;V<C.g.length;V++){var z=this.i(x)>>>16,P=this.i(x)&65535,$e=C.i(V)>>>16,Je=C.i(V)&65535;A[2*x+2*V]+=P*Je,J(A,2*x+2*V),A[2*x+2*V+1]+=z*Je,J(A,2*x+2*V+1),A[2*x+2*V+1]+=P*$e,J(A,2*x+2*V+1),A[2*x+2*V+2]+=z*$e,J(A,2*x+2*V+2)}for(x=0;x<S;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=S;x<2*S;x++)A[x]=0;return new u(A,0)};function J(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function Y(C,S){this.g=C,this.h=S}function de(C,S){if(N(S))throw Error("division by zero");if(N(C))return new Y(v,v);if(M(C))return S=de(U(C),S),new Y(U(S.g),U(S.h));if(M(S))return S=de(C,U(S)),new Y(U(S.g),S.h);if(30<C.g.length){if(M(C)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var A=w,x=S;0>=x.l(C);)A=le(A),x=le(x);var V=te(A,1),z=te(x,1);for(x=te(x,2),A=te(A,2);!N(x);){var P=z.add(x);0>=P.l(C)&&(V=V.add(A),z=P),x=te(x,1),A=te(A,1)}return S=G(C,V.j(S)),new Y(V,S)}for(V=v;0<=C.l(S);){for(A=Math.max(1,Math.floor(C.m()/S.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),z=p(A),P=z.j(S);M(P)||0<P.l(C);)A-=x,z=p(A),P=z.j(S);N(z)&&(z=w),V=V.add(z),C=G(C,P)}return new Y(V,C)}n.A=function(C){return de(this,C).h},n.and=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)&C.i(x);return new u(A,this.h&C.h)},n.or=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)|C.i(x);return new u(A,this.h|C.h)},n.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)^C.i(x);return new u(A,this.h^C.h)};function le(C){for(var S=C.g.length+1,A=[],x=0;x<S;x++)A[x]=C.i(x)<<1|C.i(x-1)>>>31;return new u(A,C.h)}function te(C,S){var A=S>>5;S%=32;for(var x=C.g.length-A,V=[],z=0;z<x;z++)V[z]=0<S?C.i(z+A)>>>S|C.i(z+A+1)<<32-S:C.i(z+A);return new u(V,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nS=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Js=u}).apply(typeof dI<"u"?dI:typeof self<"u"?self:typeof window<"u"?window:{});var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rS,th,iS,Qf,iy,sS,aS,oS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lf=="object"&&Lf];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function a(h,_){if(_)e:{var E=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var F=h[I];if(!(F in E))break e;E=E[F]}h=h[h.length-1],I=E[h],_=_(I),_!=I&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,I=!1,F={next:function(){if(!I&&E<h.length){var W=E++;return{value:_(W,h[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,I),h.apply(_,F)}}return function(){return h.apply(_,arguments)}}function w(h,_,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,w.apply(null,arguments)}function R(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function N(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(I,F,W){for(var ue=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ue[qe-2]=arguments[qe];return _.prototype[F].apply(I,ue)}}function M(h){const _=h.length;if(0<_){const E=Array(_);for(let I=0;I<_;I++)E[I]=h[I];return E}return[]}function U(h,_){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(m(I)){const F=h.length||0,W=I.length||0;h.length=F+W;for(let ue=0;ue<W;ue++)h[F+ue]=I[ue]}else h.push(I)}}class G{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function J(h){return/^[\s\xa0]*$/.test(h)}function Y(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function de(h){return de[" "](h),h}de[" "]=function(){};var le=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function te(h,_,E){for(const I in h)_.call(E,h[I],I,h)}function C(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function S(h){const _={};for(const E in h)_[E]=h[E];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(h,_){let E,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(E in I)h[E]=I[E];for(let W=0;W<A.length;W++)E=A[W],Object.prototype.hasOwnProperty.call(I,E)&&(h[E]=I[E])}}function V(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function z(h){d.setTimeout(()=>{throw h},0)}function P(){var h=Ce;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class $e{constructor(){this.h=this.g=null}add(_,E){const I=Je.get();I.set(_,E),this.h?this.h.next=I:this.g=I,this.h=I}}var Je=new G(()=>new ne,h=>h.reset());class ne{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,he=!1,Ce=new $e,O=()=>{const h=d.Promise.resolve(void 0);Ae=()=>{h.then(ae)}};var ae=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(E){z(E)}var _=Je;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}he=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function De(h,_){if(pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(le){e:{try{de(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:xe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&De.aa.h.call(this)}}N(De,pe);var xe={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function It(h,_,E,I,F){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!I,this.ha=F,this.key=++Qe,this.da=this.fa=!1}function tt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function bn(h){this.src=h,this.g={},this.h=0}bn.prototype.add=function(h,_,E,I,F){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var ue=Zn(h,_,I,F);return-1<ue?(_=h[ue],E||(_.fa=!1)):(_=new It(_,this.src,W,!!I,F),_.fa=E,h.push(_)),_};function hi(h,_){var E=_.type;if(E in h.g){var I=h.g[E],F=Array.prototype.indexOf.call(I,_,void 0),W;(W=0<=F)&&Array.prototype.splice.call(I,F,1),W&&(tt(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Zn(h,_,E,I){for(var F=0;F<h.length;++F){var W=h[F];if(!W.da&&W.listener==_&&W.capture==!!E&&W.ha==I)return F}return-1}var is="closure_lm_"+(1e6*Math.random()|0),ss={};function di(h,_,E,I,F){if(Array.isArray(_)){for(var W=0;W<_.length;W++)di(h,_[W],E,I,F);return null}return E=fd(E),h&&h[ct]?h.K(_,E,p(I)?!!I.capture:!1,F):Mu(h,_,E,!1,I,F)}function Mu(h,_,E,I,F,W){if(!_)throw Error("Invalid event type");var ue=p(F)?!!F.capture:!!F,qe=Lu(h);if(qe||(h[is]=qe=new bn(h)),E=qe.add(_,E,I,ue,W),E.proxy)return E;if(I=Bo(),E.proxy=I,I.src=h,I.listener=E,h.addEventListener)me||(F=ue),F===void 0&&(F=!1),h.addEventListener(_.toString(),I,F);else if(h.attachEvent)h.attachEvent(jo(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Bo(){function h(E){return _.call(h.src,h.listener,E)}const _=wp;return h}function Fo(h,_,E,I,F){if(Array.isArray(_))for(var W=0;W<_.length;W++)Fo(h,_[W],E,I,F);else I=p(I)?!!I.capture:!!I,E=fd(E),h&&h[ct]?(h=h.i,_=String(_).toString(),_ in h.g&&(W=h.g[_],E=Zn(W,E,I,F),-1<E&&(tt(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete h.g[_],h.h--)))):h&&(h=Lu(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Zn(_,E,I,F)),(E=-1<h?_[h]:null)&&Aa(E))}function Aa(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ct])hi(_.i,h);else{var E=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(E,I,h.capture):_.detachEvent?_.detachEvent(jo(E),I):_.addListener&&_.removeListener&&_.removeListener(I),(E=Lu(_))?(hi(E,h),E.h==0&&(E.src=null,_[is]=null)):tt(h)}}}function jo(h){return h in ss?ss[h]:ss[h]="on"+h}function wp(h,_){if(h.da)h=!0;else{_=new De(_,this);var E=h.listener,I=h.ha||h.src;h.fa&&Aa(h),h=E.call(I,_)}return h}function Lu(h){return h=h[is],h instanceof bn?h:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fd(h){return typeof h=="function"?h:(h[Vn]||(h[Vn]=function(_){return h.handleEvent(_)}),h[Vn])}function jt(){Te.call(this),this.i=new bn(this),this.M=this,this.F=null}N(jt,Te),jt.prototype[ct]=!0,jt.prototype.removeEventListener=function(h,_,E,I){Fo(this,h,_,E,I)};function Yt(h,_){var E,I=h.F;if(I)for(E=[];I;I=I.F)E.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new pe(_,h);else if(_ instanceof pe)_.target=_.target||h;else{var F=_;_=new pe(I,h),x(_,F)}if(F=!0,E)for(var W=E.length-1;0<=W;W--){var ue=_.g=E[W];F=fi(ue,I,!0,_)&&F}if(ue=_.g=h,F=fi(ue,I,!0,_)&&F,F=fi(ue,I,!1,_)&&F,E)for(W=0;W<E.length;W++)ue=_.g=E[W],F=fi(ue,I,!1,_)&&F}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],I=0;I<E.length;I++)tt(E[I]);delete h.g[_],h.h--}}this.F=null},jt.prototype.K=function(h,_,E,I){return this.i.add(String(h),_,!1,E,I)},jt.prototype.L=function(h,_,E,I){return this.i.add(String(h),_,!0,E,I)};function fi(h,_,E,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,W=0;W<_.length;++W){var ue=_[W];if(ue&&!ue.da&&ue.capture==E){var qe=ue.listener,Ht=ue.ha||ue.src;ue.fa&&hi(h.i,ue),F=qe.call(Ht,I)!==!1&&F}}return F&&!I.defaultPrevented}function md(h,_,E){if(typeof h=="function")E&&(h=w(h,E));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Uu(h){h.g=md(()=>{h.g=null,h.i&&(h.i=!1,Uu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class bp extends Te{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Uu(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(h){Te.call(this),this.h=h,this.g={}}N(Sa,Te);var as=[];function gn(h){te(h.g,function(_,E){this.g.hasOwnProperty(E)&&Aa(_)},h),h.g={}}Sa.prototype.N=function(){Sa.aa.N.call(this),gn(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zu=d.JSON.stringify,xr=d.JSON.parse,In=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Bu(){}Bu.prototype.h=null;function pd(h){return h.h||(h.h=h.i())}function gd(){}var Pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function os(){pe.call(this,"d")}N(os,pe);function yr(){pe.call(this,"c")}N(yr,pe);var Jn={},ls=null;function qo(){return ls=ls||new jt}Jn.La="serverreachability";function Fu(h){pe.call(this,Jn.La,h)}N(Fu,pe);function us(h){const _=qo();Yt(_,new Fu(_))}Jn.STAT_EVENT="statevent";function Ho(h,_){pe.call(this,Jn.STAT_EVENT,h),this.stat=_}N(Ho,pe);function Nt(h){const _=qo();Yt(_,new Ho(_,h))}Jn.Ma="timingevent";function _d(h,_){pe.call(this,Jn.Ma,h),this.size=_}N(_d,pe);function cs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function hs(){this.g=!0}hs.prototype.xa=function(){this.g=!1};function yd(h,_,E,I,F,W){h.info(function(){if(h.g)if(W)for(var ue="",qe=W.split("&"),Ht=0;Ht<qe.length;Ht++){var He=qe[Ht].split("=");if(1<He.length){var Jt=He[0];He=He[1];var Gt=Jt.split("_");ue=2<=Gt.length&&Gt[1]=="type"?ue+(Jt+"="+He+"&"):ue+(Jt+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+_+`
`+E+`
`+ue})}function vd(h,_,E,I,F,W,ue){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+_+`
`+E+`
`+W+" "+ue})}function ds(h,_,E,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Xt(h,E)+(I?" "+I:"")})}function Nr(h,_){h.info(function(){return"TIMEOUT: "+_})}hs.prototype.info=function(){};function Xt(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var I=E[h];if(!(2>I.length)){var F=I[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<F.length;ue++)F[ue]=""}}}}return zu(E)}catch{return _}}var qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ra;function Go(){}N(Go,Bu),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Ra=new Go;function Or(h,_,E,I){this.j=h,this.i=_,this.l=E,this.R=I||1,this.U=new Sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ju}function ju(){this.i=null,this.g="",this.h=!1}var fs={},Ca={};function vr(h,_,E){h.L=1,h.v=Pa(At(_)),h.m=E,h.P=!0,pi(h,null)}function pi(h,_){h.F=Date.now(),_t(h),h.A=At(h.v);var E=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),yi(E.i,"t",I),h.C=0,E=h.j.J,h.h=new ju,h.g=Od(h.j,E?_:null,!h.m),0<h.O&&(h.M=new bp(w(h.Y,h,h.g),h.O)),_=h.U,E=h.g,I=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(as[0]=F.toString()),F=as);for(var W=0;W<F.length;W++){var ue=di(E,F[W],I||_.handleEvent,!1,_.h||_);if(!ue)break;_.g[ue.key]=ue}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),us(),yd(h.i,h.u,h.A,h.l,h.R,h.m)}Or.prototype.ca=function(h){h=h.target;const _=this.M;_&&ir(h)==3?_.j():this.Y(h)},Or.prototype.Y=function(h){try{if(h==this.g)e:{const Gt=ir(this.g);var _=this.g.Ba();const wi=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||Ad(this.g)))){this.J||Gt!=4||_==7||(_==8||0>=wi?us(3):us(2)),Ko(this);var E=this.g.Z();this.X=E;t:if(ms(this)){var I=Ad(this.g);h="";var F=I.length,W=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),Fn(this);var ue="";break t}this.h.i=new d.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,h+=this.h.i.decode(I[_],{stream:!(W&&_==F-1)});I.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,vd(this.i,this.u,this.A,this.l,this.R,Gt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Ht=this.g;if((qe=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(qe)){var He=qe;break t}}He=null}if(E=He)ds(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jn(this,E);else{this.o=!1,this.s=3,Nt(12),kn(this),Fn(this);break e}}if(this.P){E=!0;let ln;for(;!this.J&&this.C<ue.length;)if(ln=ps(this,ue),ln==Ca){Gt==4&&(this.s=4,Nt(14),E=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==fs){this.s=4,Nt(15),ds(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else ds(this.i,this.l,ln,null),jn(this,ln);if(ms(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||ue.length!=0||this.h.h||(this.s=1,Nt(16),E=!1),this.o=this.o&&E,!E)ds(this.i,this.l,ue,"[Invalid Chunked Response]"),kn(this),Fn(this);else if(0<ue.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ua(Jt),Jt.M=!0,Nt(11))}}else ds(this.i,this.l,ue,null),jn(this,ue);Gt==4&&kn(this),this.o&&!this.J&&(Gt==4?xd(this.j,this):(this.o=!1,_t(this)))}else Dp(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),kn(this),Fn(this)}}}catch{}finally{}};function ms(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ps(h,_){var E=h.C,I=_.indexOf(`
`,E);return I==-1?Ca:(E=Number(_.substring(E,I)),isNaN(E)?fs:(I+=1,I+E>_.length?Ca:(_=_.slice(I,I+E),h.C=I+E,_)))}Or.prototype.cancel=function(){this.J=!0,kn(this)};function _t(h){h.S=Date.now()+h.I,qu(h,h.I)}function qu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=cs(w(h.ba,h),_)}function Ko(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Or.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Nr(this.i,this.A),this.L!=2&&(us(),Nt(17)),kn(this),this.s=2,Fn(this)):qu(this,this.S-h)};function Fn(h){h.j.G==0||h.J||xd(h.j,h)}function kn(h){Ko(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,gn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function jn(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||gs(E.h,h))){if(!h.K&&gs(E.h,h)&&E.G==3){try{var I=E.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)nl(E),el(E);else break e;ec(E),Nt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=cs(w(E.Za,E),6e3));if(1>=Ed(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ti(E,11)}else if((h.K||E.g==h)&&nl(E),!J(_))for(F=E.Da.g.parse(_),_=0;_<F.length;_++){let He=F[_];if(E.T=He[0],He=He[1],E.G==2)if(He[0]=="c"){E.K=He[1],E.ia=He[2];const Jt=He[3];Jt!=null&&(E.la=Jt,E.j.info("VER="+E.la));const Gt=He[4];Gt!=null&&(E.Aa=Gt,E.j.info("SVER="+E.Aa));const wi=He[5];wi!=null&&typeof wi=="number"&&0<wi&&(I=1.5*wi,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const ln=h.g;if(ln){const Br=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var W=I.h;W.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(_s(W,W.h),W.h=null))}if(I.D){const nc=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;nc&&(I.ya=nc,We(I.I,I.D,nc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var ue=h;if(I.qa=Nd(I,I.J?I.ia:null,I.W),ue.K){er(I.h,ue);var qe=ue,Ht=I.L;Ht&&(qe.I=Ht),qe.B&&(Ko(qe),_t(qe)),I.g=ue}else Cd(I);0<E.i.length&&tl(E)}else He[0]!="stop"&&He[0]!="close"||Ti(E,7);else E.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ti(E,7):Zu(E):He[0]!="noop"&&E.l&&E.l.ta(He),E.v=0)}}us(4)}catch{}}var Ip=class{constructor(h,_){this.g=h,this.map=_}};function Hu(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ed(h){return h.h?1:h.g?h.g.size:0}function gs(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function _s(h,_){h.g?h.g.add(_):h.h=_}function er(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Hu.prototype.cancel=function(){if(this.i=An(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function An(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return M(h.i)}function Td(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],E=h.length,I=0;I<E;I++)_.push(h[I]);return _}_=[],E=0;for(I in h)_[E++]=h[I];return _}function Ap(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const I in h)_[E++]=I;return _}}}function Da(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=Ap(h),I=Td(h),F=I.length,W=0;W<F;W++)_.call(void 0,I[W],E&&E[W],h)}var Ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var I=h[E].indexOf("="),F=null;if(0<=I){var W=h[E].substring(0,I);F=h[E].substring(I+1)}else W=h[E];_(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function gi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof gi){this.h=h.h,ys(this,h.j),this.o=h.o,this.g=h.g,xa(this,h.s),this.l=h.l;var _=h.i,E=new Vr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Qo(this,E),this.m=h.m}else h&&(_=String(h).match(Ku))?(this.h=!1,ys(this,_[1]||"",!0),this.o=vs(_[2]||""),this.g=vs(_[3]||"",!0),xa(this,_[4]),this.l=vs(_[5]||"",!0),Qo(this,_[6]||"",!0),this.m=vs(_[7]||"")):(this.h=!1,this.i=new Vr(null,this.h))}gi.prototype.toString=function(){var h=[],_=this.j;_&&h.push(tr(_,$u,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(tr(_,$u,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(tr(E,E.charAt(0)=="/"?Qu:wd,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",tr(E,Cp)),h.join("")};function At(h){return new gi(h)}function ys(h,_,E){h.j=E?vs(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function xa(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Qo(h,_,E){_ instanceof Vr?(h.i=_,Wu(h.i,h.h)):(E||(_=tr(_,Rp)),h.i=new Vr(_,h.h))}function We(h,_,E){h.i.set(_,E)}function Pa(h){return We(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function vs(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function tr(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Sp),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sp(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $u=/[#\/\?@]/g,wd=/[#\?:]/g,Qu=/[#\?]/g,Rp=/[#\?@]/g,Cp=/#/g;function Vr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function nr(h){h.g||(h.g=new Map,h.h=0,h.i&&$o(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Vr.prototype,n.add=function(h,_){nr(this),this.i=null,h=vi(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Wo(h,_){nr(h),_=vi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function _i(h,_){return nr(h),_=vi(h,_),h.g.has(_)}n.forEach=function(h,_){nr(this),this.g.forEach(function(E,I){E.forEach(function(F){h.call(_,F,I,this)},this)},this)},n.na=function(){nr(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let I=0;I<_.length;I++){const F=h[I];for(let W=0;W<F.length;W++)E.push(_[I])}return E},n.V=function(h){nr(this);let _=[];if(typeof h=="string")_i(this,h)&&(_=_.concat(this.g.get(vi(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return nr(this),this.i=null,h=vi(this,h),_i(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function yi(h,_,E){Wo(h,_),0<E.length&&(h.i=null,h.g.set(vi(h,_),M(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var I=_[E];const W=encodeURIComponent(String(I)),ue=this.V(I);for(I=0;I<ue.length;I++){var F=W;ue[I]!==""&&(F+="="+encodeURIComponent(String(ue[I]))),h.push(F)}}return this.i=h.join("&")};function vi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Wu(h,_){_&&!h.j&&(nr(h),h.i=null,h.g.forEach(function(E,I){var F=I.toLowerCase();I!=F&&(Wo(this,I),yi(this,F,E))},h)),h.j=_}function bd(h,_){const E=new hs;if(d.Image){const I=new Image;I.onload=R(rr,E,"TestLoadImage: loaded",!0,_,I),I.onerror=R(rr,E,"TestLoadImage: error",!1,_,I),I.onabort=R(rr,E,"TestLoadImage: abort",!1,_,I),I.ontimeout=R(rr,E,"TestLoadImage: timeout",!1,_,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function Na(h,_){const E=new hs,I=new AbortController,F=setTimeout(()=>{I.abort(),rr(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(W=>{clearTimeout(F),W.ok?rr(E,"TestPingServer: ok",!0,_):rr(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),rr(E,"TestPingServer: error",!1,_)})}function rr(h,_,E,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(E)}catch{}}function Oa(){this.g=new In}function kr(h,_,E){const I=E||"";try{Da(h,function(F,W){let ue=F;p(F)&&(ue=zu(F)),_.push(I+W+"="+encodeURIComponent(ue))})}catch(F){throw _.push(I+"type="+encodeURIComponent("_badmap")),F}}function Es(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Es,Bu),Es.prototype.g=function(){return new Ei(this.l,this.j)},Es.prototype.i=function(h){return function(){return h}}({});function Ei(h,_){jt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ei,jt),n=Ei.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Lr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Mr(this):Lr(this),this.readyState==3&&Yu(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Mr(this))},n.Qa=function(h){this.g&&(this.response=h,Mr(this))},n.ga=function(){this.g&&Mr(this)};function Mr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Lr(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Lr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xu(h){let _="";return te(h,function(E,I){_+=I,_+=":",_+=E,_+=`\r
`}),_}function Zt(h,_,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=Xu(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):We(h,_,E))}function et(h){jt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(et,jt);var Yo=/^https?$/i,Va=["POST","PUT"];n=et.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ra.g(),this.v=this.o?pd(this.o):pd(Ra),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(W){Id(this,W);return}if(h=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)E.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())E.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),F=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Va,_,void 0))||I||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of E)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ka(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){Id(this,W)}};function Id(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Xo(h),Ur(h)}function Xo(h){h.A||(h.A=!0,Yt(h,"complete"),Yt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Yt(this,"complete"),Yt(this,"abort"),Ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Zo(this):this.bb())},n.bb=function(){Zo(this)};function Zo(h){if(h.h&&typeof u<"u"&&(!h.v[1]||ir(h)!=4||h.Z()!=2)){if(h.u&&ir(h)==4)md(h.Ea,0,h);else if(Yt(h,"readystatechange"),ir(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var I;if(I=ue===0){var F=String(h.D).match(Ku)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),I=!Yo.test(F?F.toLowerCase():"")}E=I}if(E)Yt(h,"complete"),Yt(h,"success");else{h.m=6;try{var W=2<ir(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",Xo(h)}}finally{Ur(h)}}}}function Ur(h,_){if(h.g){ka(h);const E=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Yt(h,"ready");try{E.onreadystatechange=I}catch{}}}function ka(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ir(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),xr(_)}};function Ad(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Dp(h){const _={};h=(h.g&&2<=ir(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(J(h[I]))continue;var E=V(h[I]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=_[F]||[];_[F]=W,W.push(E)}C(_,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ma(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Jo(h){this.Aa=0,this.i=[],this.j=new hs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ma("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ma("baseRetryDelayMs",5e3,h),this.cb=Ma("retryDelaySeedMs",1e4,h),this.Wa=Ma("forwardChannelMaxRetries",2,h),this.wa=Ma("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Hu(h&&h.concurrentRequestLimit),this.Da=new Oa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Jo.prototype,n.la=8,n.G=1,n.connect=function(h,_,E,I){Nt(0),this.W=h,this.H=_||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=Nd(this,null,this.W),tl(this)};function Zu(h){if(Sd(h),h.G==3){var _=h.U++,E=At(h.I);if(We(E,"SID",h.K),We(E,"RID",_),We(E,"TYPE","terminate"),La(h,E),_=new Or(h,h.j,_),_.L=2,_.v=Pa(At(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=Od(_.j,null),_.g.ea(_.v)),_.F=Date.now(),_t(_)}Pd(h)}function el(h){h.g&&(Ua(h),h.g.cancel(),h.g=null)}function Sd(h){el(h),h.u&&(d.clearTimeout(h.u),h.u=null),nl(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function tl(h){if(!Gu(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ae||O(),he||(Ae(),he=!0),Ce.add(_,h),h.B=0}}function xp(h,_){return Ed(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=cs(w(h.Ga,h,_),tc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new Or(this,this.j,h);let W=this.o;if(this.S&&(W?(W=S(W),x(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Rd(this,F,_),E=At(this.I),We(E,"RID",h),We(E,"CVER",22),this.D&&We(E,"X-HTTP-Session-Id",this.D),La(this,E),W&&(this.O?_="headers="+encodeURIComponent(String(Xu(W)))+"&"+_:this.m&&Zt(E,this.m,W)),_s(this.h,F),this.Ua&&We(E,"TYPE","init"),this.P?(We(E,"$req",_),We(E,"SID","null"),F.T=!0,vr(F,E,null)):vr(F,E,_),this.G=2}}else this.G==3&&(h?Ju(this,h):this.i.length==0||Gu(this.h)||Ju(this))};function Ju(h,_){var E;_?E=_.l:E=h.U++;const I=At(h.I);We(I,"SID",h.K),We(I,"RID",E),We(I,"AID",h.T),La(h,I),h.m&&h.o&&Zt(I,h.m,h.o),E=new Or(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Rd(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),_s(h.h,E),vr(E,I,_)}function La(h,_){h.H&&te(h.H,function(E,I){We(_,I,E)}),h.l&&Da({},function(E,I){We(_,I,E)})}function Rd(h,_,E){E=Math.min(h.i.length,E);var I=h.l?w(h.l.Na,h.l,h):null;e:{var F=h.i;let W=-1;for(;;){const ue=["count="+E];W==-1?0<E?(W=F[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let qe=!0;for(let Ht=0;Ht<E;Ht++){let He=F[Ht].g;const Jt=F[Ht].map;if(He-=W,0>He)W=Math.max(0,F[Ht].g-100),qe=!1;else try{kr(Jt,ue,"req"+He+"_")}catch{I&&I(Jt)}}if(qe){I=ue.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,I}function Cd(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ae||O(),he||(Ae(),he=!0),Ce.add(_,h),h.v=0}}function ec(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=cs(w(h.Fa,h),tc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Dd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=cs(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),el(this),Dd(this))};function Ua(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Dd(h){h.g=new Or(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=At(h.qa);We(_,"RID","rpc"),We(_,"SID",h.K),We(_,"AID",h.T),We(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&We(_,"TO",h.ja),We(_,"TYPE","xmlhttp"),La(h,_),h.m&&h.o&&Zt(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Pa(At(_)),E.m=null,E.P=!0,pi(E,h)}n.Za=function(){this.C!=null&&(this.C=null,el(this),ec(this),Nt(19))};function nl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function xd(h,_){var E=null;if(h.g==_){nl(h),Ua(h),h.g=null;var I=2}else if(gs(h.h,_))E=_.D,er(h.h,_),I=1;else return;if(h.G!=0){if(_.o)if(I==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var F=h.B;I=qo(),Yt(I,new _d(I,E)),tl(h)}else Cd(h);else if(F=_.s,F==3||F==0&&0<_.X||!(I==1&&xp(h,_)||I==2&&ec(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),F){case 1:Ti(h,5);break;case 4:Ti(h,10);break;case 3:Ti(h,6);break;default:Ti(h,2)}}}function tc(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Ti(h,_){if(h.j.info("Error code "+_),_==2){var E=w(h.fb,h),I=h.Xa;const F=!I;I=new gi(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ys(I,"https"),Pa(I),F?bd(I.toString(),E):Na(I.toString(),E)}else Nt(2);h.G=0,h.l&&h.l.sa(_),Pd(h),Sd(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Pd(h){if(h.G=0,h.ka=[],h.l){const _=An(h.h);(_.length!=0||h.i.length!=0)&&(U(h.ka,_),U(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function Nd(h,_,E){var I=E instanceof gi?At(E):new gi(E);if(I.g!="")_&&(I.g=_+"."+I.g),xa(I,I.s);else{var F=d.location;I=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var W=new gi(null);I&&ys(W,I),_&&(W.g=_),F&&xa(W,F),E&&(W.l=E),I=W}return E=h.D,_=h.ya,E&&_&&We(I,E,_),We(I,"VER",h.la),La(h,I),I}function Od(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new et(new Es({eb:E})):new et(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vd(){}n=Vd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rl(){}rl.prototype.g=function(h,_){return new Sn(h,_)};function Sn(h,_){jt.call(this),this.g=new Jo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!J(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!J(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new zr(this)}N(Sn,jt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Zu(this.g)},Sn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=zu(h),h=E);_.i.push(new Ip(_.Ya++,h)),_.G==3&&tl(_)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Zu(this.g),delete this.g,Sn.aa.N.call(this)};function kd(h){os.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}N(kd,os);function Md(){yr.call(this),this.status=1}N(Md,yr);function zr(h){this.g=h}N(zr,Vd),zr.prototype.ua=function(){Yt(this.g,"a")},zr.prototype.ta=function(h){Yt(this.g,new kd(h))},zr.prototype.sa=function(h){Yt(this.g,new Md)},zr.prototype.ra=function(){Yt(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,oS=function(){return new rl},aS=function(){return qo()},sS=Jn,iy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,Qf=qt,mi.COMPLETE="complete",iS=mi,gd.EventType=Pr,Pr.OPEN="a",Pr.CLOSE="b",Pr.ERROR="c",Pr.MESSAGE="d",jt.prototype.listen=jt.prototype.K,th=gd,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,rS=et}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});const fI="@firebase/firestore",mI="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Um("@firebase/firestore");function Ul(){return oa.logLevel}function OV(n){oa.setLogLevel(n)}function se(n,...e){if(oa.logLevel<=Ue.DEBUG){const t=e.map(rv);oa.debug(`Firestore (${Au}): ${n}`,...t)}}function Vt(n,...e){if(oa.logLevel<=Ue.ERROR){const t=e.map(rv);oa.error(`Firestore (${Au}): ${n}`,...t)}}function si(n,...e){if(oa.logLevel<=Ue.WARN){const t=e.map(rv);oa.warn(`Firestore (${Au}): ${n}`,...t)}}function rv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(n="Unexpected state"){const e=`FIRESTORE (${Au}) INTERNAL ASSERTION FAILED: `+n;throw Vt(e),new Error(e)}function Ee(n,e){n||ge()}function VV(n,e){n||ge()}function fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class MV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LV{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new mn,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new mn)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new lS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new an(e)}}class UV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class zV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new UV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ft(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0);const r=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,se("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new pI(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new pI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=FV(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Pe(n,e){return n<e?-1:n>e?1:0}function Zl(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function cS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=-62135596800,_I=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*_I);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gI)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_I}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-gI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new gt(0,0))}static max(){return new be(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="__name__";class $r{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(),r===void 0?r=e.length-t:r>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=$r.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=$r.isNumericId(e),a=$r.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?$r.extractNumericId(e).compare($r.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Js.fromString(e.substring(4,e.length-2))}}class Be extends $r{construct(e,t,r){return new Be(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Be(t)}static emptyPath(){return new Be([])}}const jV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends $r{construct(e,t,r){return new mt(e,t,r)}static isValidIdentifier(e){return jV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yI}static keyField(){return new mt([yI])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new re(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new re(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(u=!u,a++):d!=="."||u?(r+=d,a++):(l(),a++)}if(l(),u)throw new re(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(t)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Be.fromString(e))}static fromName(e){return new ce(Be.fromString(e).popFirst(5))}static empty(){return new ce(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;class dm{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function sy(n){return n.fields.find(e=>e.kind===2)}function oo(n){return n.fields.filter(e=>e.kind!==2)}dm.UNKNOWN_ID=-1;class Wf{constructor(e,t){this.fieldPath=e,this.kind=t}}class wh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wh(0,Xn.min())}}function hS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=be.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new Xn(a,ce.empty(),e)}function dS(n){return new Xn(n.readTime,n.key,Jl)}class Xn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xn(be.min(),ce.empty(),Jl)}static max(){return new Xn(be.max(),ce.empty(),Jl)}}function iv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==fS)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):j.reject(t)}static resolve(e){return new j((t,r)=>{t(e)})}static reject(e){return new j((t,r)=>{r(e)})}static waitFor(e){return new j((t,r)=>{let a=0,l=0,u=!1;e.forEach(d=>{++a,d.next(()=>{++l,u&&l===a&&t()},m=>r(m))}),u=!0,l===a&&t()})}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next(a=>a?j.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new j((r,a)=>{const l=e.length,u=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(y=>{u[p]=y,++d,d===l&&r(u)},y=>a(y))}})}static doWhile(e,t){return new j((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="SimpleDb";class zm{static open(e,t,r,a){try{return new zm(t,e.transaction(a,r))}catch(l){throw new ah(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new mn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new ah(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=sv(r.target.error);this.m.reject(new ah(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(se(Qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new HV(t)}}class ni{static delete(e){return se(Qn,"Removing database:",e),uo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vh())return!1;if(ni.v())return!0;const e=wt(),t=ni.C(e),r=0<t&&t<10,a=pS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,ni.C(wt())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(se(Qn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new ah(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new re(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new re(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new ah(e,u))},a.onupgradeneeded=l=>{se(Qn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.O.B(u,a.transaction,l.oldVersion,this.version).next(()=>{se(Qn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const d=zm.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),j.reject(p))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&u<3;if(se(Qn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class qV{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return uo(this.q.delete())}}class ah extends re{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ea(n){return n.name==="IndexedDbTransactionError"}class HV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se(Qn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(se(Qn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uo(r)}add(e){return se(Qn,"ADD",this.store.name,e,e),uo(this.store.add(e))}get(e){return uo(this.store.get(e)).next(t=>(t===void 0&&(t=null),se(Qn,"GET",this.store.name,e,t),t))}delete(e){return se(Qn,"DELETE",this.store.name,e),uo(this.store.delete(e))}count(){return se(Qn,"COUNT",this.store.name),uo(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new j((u,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{u(m.target.result)}})}{const l=this.cursor(r),u=[];return this.j(l,(d,m)=>{u.push(m)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}})}J(e,t){se(Qn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,u,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new j((r,a)=>{t.onerror=l=>{const u=sv(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}j(e,t){const r=[];return new j((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void a();const m=new qV(d),p=t(d.primaryKey,d.value,m);if(p instanceof j){const y=p.catch(v=>(m.done(),j.reject(v)));r.push(y)}m.isDone?a():m.U===null?d.continue():d.continue(m.U)}}).next(()=>j.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uo(n){return new j((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=sv(r.target.error);t(a)}})}let vI=!1;function sv(n){const e=ni.C(wt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vI||(vI=!0,setTimeout(()=>{throw r},0)),r}}return n}const oh="IndexBackfiller";class GV{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){se(oh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();se(oh,`Documents written: ${t}`)}catch(t){Ea(t)?se(oh,"Ignoring IndexedDB error during index backfill: ",t):await va(t)}await this.te(6e4)})}}class KV{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,l=!0;return j.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return se(oh,`Processing collection: ${u}`),this.ie(e,u,a).next(d=>{a-=d,r.add(u)});l=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(a,l)).next(d=>(se(oh,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((a,l)=>{const u=dS(l);iv(u,r)>0&&(r=u)}),new Xn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Un.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=-1;function Kh(n){return n==null}function bh(n){return n===0&&1/n==-1/0}function gS(n){return typeof n=="number"&&Number.isInteger(n)&&!bh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="";function Tn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EI(e)),e=$V(n.get(t),e);return EI(e)}function $V(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case fm:t+="";break;default:t+=l}}return t}function EI(n){return n+fm+""}function Jr(n){const e=n.length;if(Ee(e>=2),e===2)return Ee(n.charAt(0)===fm&&n.charAt(1)===""),Be.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=n.indexOf(fm,l);switch((u<0||u>t)&&ge(),n.charAt(u+1)){case"":const d=n.substring(l,u);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=n.substring(l,u),a+="\0";break;case"":a+=n.substring(l,u+1);break;default:ge()}l=u+2}return new Be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="remoteDocuments",$h="owner",Pl="owner",Ih="mutationQueues",QV="userId",Ir="mutations",TI="batchId",po="userMutationsIndex",wI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n,e){return[n,Tn(e)]}function _S(n,e,t){return[n,Tn(e),t]}const WV={},eu="documentMutations",mm="remoteDocumentsV14",YV=["prefixPath","collectionGroup","readTime","documentId"],Xf="documentKeyIndex",XV=["prefixPath","collectionGroup","documentId"],yS="collectionGroupIndex",ZV=["collectionGroup","readTime","prefixPath","documentId"],Ah="remoteDocumentGlobal",ay="remoteDocumentGlobalKey",tu="targets",vS="queryTargetsIndex",JV=["canonicalId","targetId"],nu="targetDocuments",ek=["targetId","path"],av="documentTargetsIndex",tk=["path","targetId"],pm="targetGlobalKey",vo="targetGlobal",Sh="collectionParents",nk=["collectionId","parent"],ru="clientMetadata",rk="clientId",Bm="bundles",ik="bundleId",Fm="namedQueries",sk="name",ov="indexConfiguration",ak="indexId",oy="collectionGroupIndex",ok="collectionGroup",gm="indexState",lk=["indexId","uid"],ES="sequenceNumberIndex",uk=["uid","sequenceNumber"],_m="indexEntries",ck=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TS="documentKeyIndex",hk=["indexId","uid","orderedDocumentKey"],jm="documentOverlays",dk=["userId","collectionPath","documentId"],ly="collectionPathOverlayIndex",fk=["userId","collectionPath","largestBatchId"],wS="collectionGroupOverlayIndex",mk=["userId","collectionGroup","largestBatchId"],lv="globals",pk="name",bS=[Ih,Ir,eu,lo,tu,$h,vo,nu,ru,Ah,Sh,Bm,Fm],gk=[...bS,jm],IS=[Ih,Ir,eu,mm,tu,$h,vo,nu,ru,Ah,Sh,Bm,Fm,jm],AS=IS,uv=[...AS,ov,gm,_m],_k=uv,yk=[...uv,lv];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends mS{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Wt(n,e){const t=fe(n);return ni.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ta(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uf(this.root,e,this.comparator,!0)}}class Uf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??dn.RED,this.left=a??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new dn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return dn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,r,a,l){return this}insert(e,t,r){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new II(this.data.getIterator())}getIteratorFrom(e){return new II(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class II{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new zn([])}unionWith(e){let t=new rt(mt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new RS("Invalid base64 string: "+l):l}}(e);return new Dt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new Dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const Ek=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(n){if(Ee(!!n),typeof n=="string"){let e=0;const t=Ek.exec(n);if(Ee(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qi(n){return typeof n=="string"?Dt.fromBase64String(n):Dt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="server_timestamp",DS="__type__",xS="__previous_value__",PS="__local_write_time__";function qm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[DS])===null||t===void 0?void 0:t.stringValue)===CS}function Hm(n){const e=n.mapValue.fields[xS];return qm(e)?Hm(e):e}function Rh(n){const e=$i(n.mapValue.fields[PS].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t,r,a,l,u,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const cy="(default)";class la{constructor(e,t){this.projectId=e,this.database=t||cy}static empty(){return new la("","")}get isDefaultDatabase(){return this.database===cy}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__type__",NS="__max__",Ws={mapValue:{fields:{__type__:{stringValue:NS}}}},hv="__vector__",iu="value",Zf={nullValue:"NULL_VALUE"};function ua(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qm(n)?4:OS(n)?9007199254740991:Gm(n)?10:11:ge()}function ai(n,e){if(n===e)return!0;const t=ua(n);if(t!==ua(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rh(n).isEqual(Rh(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=$i(a.timestampValue),d=$i(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return Qi(a.bytesValue).isEqual(Qi(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return dt(a.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(a.geoPointValue.longitude)===dt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return dt(a.integerValue)===dt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=dt(a.doubleValue),d=dt(l.doubleValue);return u===d?bh(u)===bh(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Zl(n.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},d=l.mapValue.fields||{};if(bI(u)!==bI(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!ai(u[m],d[m])))return!1;return!0}(n,e);default:return ge()}}function Ch(n,e){return(n.values||[]).find(t=>ai(t,e))!==void 0}function ca(n,e){if(n===e)return 0;const t=ua(n),r=ua(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(l,u){const d=dt(l.integerValue||l.doubleValue),m=dt(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return AI(n.timestampValue,e.timestampValue);case 4:return AI(Rh(n),Rh(e));case 5:return Pe(n.stringValue,e.stringValue);case 6:return function(l,u){const d=Qi(l),m=Qi(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const d=l.split("/"),m=u.split("/");for(let p=0;p<d.length&&p<m.length;p++){const y=Pe(d[p],m[p]);if(y!==0)return y}return Pe(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const d=Pe(dt(l.latitude),dt(u.latitude));return d!==0?d:Pe(dt(l.longitude),dt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return SI(n.arrayValue,e.arrayValue);case 10:return function(l,u){var d,m,p,y;const v=l.fields||{},w=u.fields||{},R=(d=v[iu])===null||d===void 0?void 0:d.arrayValue,N=(m=w[iu])===null||m===void 0?void 0:m.arrayValue,M=Pe(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:SI(R,N)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===Ws.mapValue&&u===Ws.mapValue)return 0;if(l===Ws.mapValue)return 1;if(u===Ws.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const w=Pe(m[v],y[v]);if(w!==0)return w;const R=ca(d[m[v]],p[y[v]]);if(R!==0)return R}return Pe(m.length,y.length)}(n.mapValue,e.mapValue);default:throw ge()}}function AI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=$i(n),r=$i(e),a=Pe(t.seconds,r.seconds);return a!==0?a:Pe(t.nanos,r.nanos)}function SI(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ca(t[a],r[a]);if(l)return l}return Pe(t.length,r.length)}function su(n){return hy(n)}function hy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=$i(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=hy(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${hy(t.fields[u])}`;return a+"}"}(n.mapValue):ge()}function Jf(n){switch(ua(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hm(n);return e?16+Jf(e):16;case 5:return 2*n.stringValue.length;case 6:return Qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Jf(l),0)}(n.arrayValue);case 10:case 11:return function(r){let a=0;return Ta(r.fields,(l,u)=>{a+=l.length+Jf(u)}),a}(n.mapValue);default:throw ge()}}function wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dy(n){return!!n&&"integerValue"in n}function Dh(n){return!!n&&"arrayValue"in n}function RI(n){return!!n&&"nullValue"in n}function CI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function em(n){return!!n&&"mapValue"in n}function Gm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[cv])===null||t===void 0?void 0:t.stringValue)===hv}function lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===NS}const VS={mapValue:{fields:{[cv]:{stringValue:hv},[iu]:{arrayValue:{}}}}};function wk(n){return"nullValue"in n?Zf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wo(la.empty(),ce.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Gm(n)?VS:{mapValue:{}}:ge()}function bk(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wo(la.empty(),ce.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?VS:"mapValue"in n?Gm(n)?{mapValue:{}}:Ws:ge()}function DI(n,e){const t=ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xI(n,e){const t=ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!em(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=mt.emptyPath(),r={},a=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}u?r[d.lastSegment()]=lh(u):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());em(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];em(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ta(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new fn(lh(this.value))}}function kS(n){const e=[];return Ta(n.fields,(t,r)=>{const a=new mt([t]);if(em(r)){const l=kS(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t,r,a,l,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new ht(e,0,be.min(),be.min(),be.min(),fn.empty(),0)}static newFoundDocument(e,t,r,a){return new ht(e,1,t,be.min(),r,a,0)}static newNoDocument(e,t){return new ht(e,2,t,be.min(),be.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new ht(e,3,t,be.min(),be.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t){this.position=e,this.inclusive=t}}function PI(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?r=ce.comparator(ce.fromName(u.referenceValue),t.key):r=ca(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function NI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ai(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ik(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{}class Fe extends MS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ak(e,t,r):t==="array-contains"?new Ck(e,r):t==="in"?new jS(e,r):t==="not-in"?new Dk(e,r):t==="array-contains-any"?new xk(e,r):new Fe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Sk(e,r):new Rk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ca(t,this.value)):t!==null&&ua(this.value)===ua(t)&&this.matchesComparison(ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends MS{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new nt(e,t)}matches(e){return au(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function au(n){return n.op==="and"}function fy(n){return n.op==="or"}function dv(n){return LS(n)&&au(n)}function LS(n){for(const e of n.filters)if(e instanceof nt)return!1;return!0}function my(n){if(n instanceof Fe)return n.field.canonicalString()+n.op.toString()+su(n.value);if(dv(n))return n.filters.map(e=>my(e)).join(",");{const e=n.filters.map(t=>my(t)).join(",");return`${n.op}(${e})`}}function US(n,e){return n instanceof Fe?function(r,a){return a instanceof Fe&&r.op===a.op&&r.field.isEqual(a.field)&&ai(r.value,a.value)}(n,e):n instanceof nt?function(r,a){return a instanceof nt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,u,d)=>l&&US(u,a.filters[d]),!0):!1}(n,e):void ge()}function zS(n,e){const t=n.filters.concat(e);return nt.create(t,n.op)}function BS(n){return n instanceof Fe?function(t){return`${t.field.canonicalString()} ${t.op} ${su(t.value)}`}(n):n instanceof nt?function(t){return t.op.toString()+" {"+t.getFilters().map(BS).join(" ,")+"}"}(n):"Filter"}class Ak extends Fe{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sk extends Fe{constructor(e,t){super(e,"in",t),this.keys=FS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Rk extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=FS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ce.fromName(r.referenceValue))}class Ck extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dh(t)&&Ch(t.arrayValue,this.value)}}class jS extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ch(this.value.arrayValue,t)}}class Dk extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ch(this.value.arrayValue,t)}}class xk extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ch(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t=null,r=[],a=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=d,this.le=null}}function py(n,e=null,t=[],r=[],a=null,l=null,u=null){return new Pk(n,e,t,r,a,l,u)}function bo(n){const e=fe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>my(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Kh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>su(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>su(r)).join(",")),e.le=t}return e.le}function Qh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ik(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!US(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NI(n.startAt,e.startAt)&&NI(n.endAt,e.endAt)}function ym(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function vm(n,e){return n.filters.filter(t=>t instanceof Fe&&t.field.isEqual(e))}function OI(n,e,t){let r=Zf,a=!0;for(const l of vm(n,e)){let u=Zf,d=!0;switch(l.op){case"<":case"<=":u=wk(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,d=!1;break;case"!=":case"not-in":u=Zf}DI({value:r,inclusive:a},{value:u,inclusive:d})<0&&(r=u,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];DI({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function VI(n,e,t){let r=Ws,a=!0;for(const l of vm(n,e)){let u=Ws,d=!0;switch(l.op){case">=":case">":u=bk(l.value),d=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,d=!1;break;case"!=":case"not-in":u=Ws}xI({value:r,inclusive:a},{value:u,inclusive:d})>0&&(r=u,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];xI({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t=null,r=[],a=[],l=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function qS(n,e,t,r,a,l,u,d){return new Zi(n,e,t,r,a,l,u,d)}function Su(n){return new Zi(n)}function kI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fv(n){return n.collectionGroup!==null}function Hl(n){const e=fe(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new rt(mt.comparator);return u.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new xh(l,r))}),t.has(mt.keyField().canonicalString())||e.he.push(new xh(mt.keyField(),r))}return e.he}function Nn(n){const e=fe(n);return e.Pe||(e.Pe=Nk(e,Hl(n))),e.Pe}function Nk(n,e){if(n.limitType==="F")return py(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new xh(a.field,l)});const t=n.endAt?new ha(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ha(n.startAt.position,n.startAt.inclusive):null;return py(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gy(n,e){const t=n.filters.concat([e]);return new Zi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Em(n,e,t){return new Zi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wh(n,e){return Qh(Nn(n),Nn(e))&&n.limitType===e.limitType}function HS(n){return`${bo(Nn(n))}|lt:${n.limitType}`}function zl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>BS(a)).join(", ")}]`),Kh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>su(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>su(a)).join(",")),`Target(${r})`}(Nn(n))}; limitType=${n.limitType})`}function Yh(n,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ce.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,a){for(const l of Hl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(r,a){return!(r.startAt&&!function(u,d,m){const p=PI(u,d,m);return u.inclusive?p<=0:p<0}(r.startAt,Hl(r),a)||r.endAt&&!function(u,d,m){const p=PI(u,d,m);return u.inclusive?p>=0:p>0}(r.endAt,Hl(r),a))}(n,e)}function GS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KS(n){return(e,t)=>{let r=!1;for(const a of Hl(n)){const l=Ok(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function Ok(n,e,t){const r=n.field.isKeyField()?ce.comparator(e.key,t.key):function(l,u,d){const m=u.data.field(l),p=d.data.field(l);return m!==null&&p!==null?ca(m,p):ge()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return SS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new ut(ce.comparator);function Bn(){return Vk}const $S=new ut(ce.comparator);function nh(...n){let e=$S;for(const t of n)e=e.insert(t.key,t);return e}function QS(n){let e=$S;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ei(){return uh()}function WS(){return uh()}function uh(){return new Ji(n=>n.toString(),(n,e)=>n.isEqual(e))}const kk=new ut(ce.comparator),Mk=new rt(ce.comparator);function Oe(...n){let e=Mk;for(const t of n)e=e.add(t);return e}const Lk=new rt(Pe);function mv(){return Lk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function YS(n){return{integerValue:""+n}}function XS(n,e){return gS(e)?YS(e):pv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this._=void 0}}function Uk(n,e,t){return n instanceof ou?function(a,l){const u={fields:{[DS]:{stringValue:CS},[PS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&qm(l)&&(l=Hm(l)),l&&(u.fields[xS]=l),{mapValue:u}}(t,e):n instanceof Io?JS(n,e):n instanceof Ao?eR(n,e):function(a,l){const u=ZS(a,l),d=MI(u)+MI(a.Ie);return dy(u)&&dy(a.Ie)?YS(d):pv(a.serializer,d)}(n,e)}function zk(n,e,t){return n instanceof Io?JS(n,e):n instanceof Ao?eR(n,e):t}function ZS(n,e){return n instanceof lu?function(r){return dy(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class ou extends Km{}class Io extends Km{constructor(e){super(),this.elements=e}}function JS(n,e){const t=tR(e);for(const r of n.elements)t.some(a=>ai(a,r))||t.push(r);return{arrayValue:{values:t}}}class Ao extends Km{constructor(e){super(),this.elements=e}}function eR(n,e){let t=tR(e);for(const r of n.elements)t=t.filter(a=>!ai(a,r));return{arrayValue:{values:t}}}class lu extends Km{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function MI(n){return dt(n.integerValue||n.doubleValue)}function tR(n){return Dh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.field=e,this.transform=t}}function Bk(n,e){return n.field.isEqual(e.field)&&function(r,a){return r instanceof Io&&a instanceof Io||r instanceof Ao&&a instanceof Ao?Zl(r.elements,a.elements,ai):r instanceof lu&&a instanceof lu?ai(r.Ie,a.Ie):r instanceof ou&&a instanceof ou}(n.transform,e.transform)}class Fk{constructor(e,t){this.version=e,this.transformResults=t}}class pt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $m{}function nR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cu(n.key,pt.none()):new Ru(n.key,n.data,pt.none());{const t=n.data,r=fn.empty();let a=new rt(mt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new es(n.key,r,new zn(a.toArray()),pt.none())}}function jk(n,e,t){n instanceof Ru?function(a,l,u){const d=a.value.clone(),m=UI(a.fieldTransforms,l,u.transformResults);d.setAll(m),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof es?function(a,l,u){if(!tm(a.precondition,l))return void l.convertToUnknownDocument(u.version);const d=UI(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(rR(a)),m.setAll(d),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function ch(n,e,t,r){return n instanceof Ru?function(l,u,d,m){if(!tm(l.precondition,u))return d;const p=l.value.clone(),y=zI(l.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof es?function(l,u,d,m){if(!tm(l.precondition,u))return d;const p=zI(l.fieldTransforms,m,u),y=u.data;return y.setAll(rR(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(l,u,d){return tm(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function qk(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=ZS(r.transform,a||null);l!=null&&(t===null&&(t=fn.empty()),t.set(r.field,l))}return t||null}function LI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Zl(r,a,(l,u)=>Bk(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ru extends $m{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class es extends $m{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function rR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function UI(n,e,t){const r=new Map;Ee(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,d=e.data.field(l.field);r.set(l.field,zk(u,d,t[a]))}return r}function zI(n,e,t){const r=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);r.set(a.field,Uk(l,u,e))}return r}class Cu extends $m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gv extends $m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&jk(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WS();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(a.key)?null:d;const m=nR(u,d);m!==null&&r.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(t,r)=>LI(t,r))&&Zl(this.baseMutations,e.baseMutations,(t,r)=>LI(t,r))}}class yv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ee(e.mutations.length===r.length);let a=function(){return kk}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new yv(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ke;function iR(n){switch(n){case Q.OK:return ge();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return ge()}}function sR(n){if(n===void 0)return Vt("GRPC error has no .code"),Q.UNKNOWN;switch(n){case Bt.OK:return Q.OK;case Bt.CANCELLED:return Q.CANCELLED;case Bt.UNKNOWN:return Q.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return Q.INTERNAL;case Bt.UNAVAILABLE:return Q.UNAVAILABLE;case Bt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Bt.NOT_FOUND:return Q.NOT_FOUND;case Bt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Bt.ABORTED:return Q.ABORTED;case Bt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Bt.DATA_LOSS:return Q.DATA_LOSS;default:return ge()}}(Ke=Bt||(Bt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new Js([4294967295,4294967295],0);function BI(n){const e=aR().encode(n),t=new nS;return t.update(e),new Uint8Array(t.digest())}function FI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Js([t,r],0),new Js([a,l],0)]}class Ev{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rh(`Invalid padding: ${t}`);if(r<0)throw new rh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new rh(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Js.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(Js.fromNumber(r)));return a.compare(Gk)===1&&(a=new Js([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=BI(e),[r,a]=FI(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,a,l);if(!this.Re(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Ev(l,a,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(this.Ee===0)return;const t=BI(e),[r,a]=FI(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,a,l);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zh(be.min(),a,new ut(Pe),Bn(),Oe())}}class Jh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jh(r,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class oR{constructor(e,t){this.targetId=e,this.ge=t}}class lR{constructor(e,t,r=Dt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class jI{constructor(){this.pe=0,this.ye=qI(),this.we=Dt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Oe(),t=Oe(),r=Oe();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ge()}}),new Jh(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=qI()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ee(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class Kk{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Bn(),this.$e=zf(),this.Ke=zf(),this.Ue=new ut(Pe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(ym(l))if(r===0){const u=new ce(l.path);this.ze(t,u,ht.newNoDocument(u,be.min()))}else Ee(r===1);else{const u=this.et(t);if(u!==r){const d=this.tt(e),m=d?this.nt(d,e,u):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,d;try{u=Qi(r).toUint8Array()}catch(m){if(m instanceof RS)return si("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Ev(u,a,l)}catch(m){return si(m instanceof rh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const u=this.ke.it(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,u)=>{const d=this.Xe(u);if(d){if(l.current&&ym(d.target)){const m=new ce(d.target.path);this._t(m).has(u)||this.ut(u,m)||this.ze(u,m,ht.newNoDocument(m,e))}l.ve&&(t.set(u,l.Fe()),l.Me())}});let r=Oe();this.Ke.forEach((l,u)=>{let d=!0;u.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,u)=>u.setReadTime(e));const a=new Zh(e,t,this.Ue,this.Qe,r);return this.Qe=Bn(),this.$e=zf(),this.Ke=zf(),this.Ue=new ut(Pe),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new jI,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new rt(Pe),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new rt(Pe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new jI),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function zf(){return new ut(ce.comparator)}function qI(){return new ut(ce.comparator)}const $k={asc:"ASCENDING",desc:"DESCENDING"},Qk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wk={and:"AND",or:"OR"};class Yk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _y(n,e){return n.useProto3Json||Kh(e)?e:{value:e}}function uu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Xk(n,e){return uu(n,e.toTimestamp())}function kt(n){return Ee(!!n),be.fromTimestamp(function(t){const r=$i(t);return new gt(r.seconds,r.nanos)}(n))}function Tv(n,e){return yy(n,e).canonicalString()}function yy(n,e){const t=function(a){return new Be(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function cR(n){const e=Be.fromString(n);return Ee(ER(e)),e}function Ph(n,e){return Tv(n.databaseId,e.path)}function ri(n,e){const t=cR(e);if(t.get(1)!==n.databaseId.projectId)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(fR(t))}function hR(n,e){return Tv(n.databaseId,e)}function dR(n){const e=cR(n);return e.length===4?Be.emptyPath():fR(e)}function vy(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fR(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function HI(n,e,t){return{name:Ph(n,e),fields:t.value.mapValue.fields}}function mR(n,e,t){const r=ri(n,e.name),a=kt(e.updateTime),l=e.createTime?kt(e.createTime):be.min(),u=new fn({mapValue:{fields:e.fields}}),d=ht.newFoundDocument(r,a,l,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Zk(n,e){return"found"in e?function(r,a){Ee(!!a.found),a.found.name,a.found.updateTime;const l=ri(r,a.found.name),u=kt(a.found.updateTime),d=a.found.createTime?kt(a.found.createTime):be.min(),m=new fn({mapValue:{fields:a.found.fields}});return ht.newFoundDocument(l,u,d,m)}(n,e):"missing"in e?function(r,a){Ee(!!a.missing),Ee(!!a.readTime);const l=ri(r,a.missing),u=kt(a.readTime);return ht.newNoDocument(l,u)}(n,e):ge()}function Jk(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(Ee(y===void 0||typeof y=="string"),Dt.fromBase64String(y||"")):(Ee(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Dt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const y=p.code===void 0?Q.UNKNOWN:sR(p.code);return new re(y,p.message||"")}(u);t=new lR(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=ri(n,r.document.name),l=kt(r.document.updateTime),u=r.document.createTime?kt(r.document.createTime):be.min(),d=new fn({mapValue:{fields:r.document.fields}}),m=ht.newFoundDocument(a,l,u,d),p=r.targetIds||[],y=r.removedTargetIds||[];t=new nm(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=ri(n,r.document),l=r.readTime?kt(r.readTime):be.min(),u=ht.newNoDocument(a,l),d=r.removedTargetIds||[];t=new nm([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=ri(n,r.document),l=r.removedTargetIds||[];t=new nm([],l,a,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new Hk(a,l),d=r.targetId;t=new oR(d,u)}}return t}function Nh(n,e){let t;if(e instanceof Ru)t={update:HI(n,e.key,e.value)};else if(e instanceof Cu)t={delete:Ph(n,e.key)};else if(e instanceof es)t={update:HI(n,e.key,e.data),updateMask:sM(e.fieldMask)};else{if(!(e instanceof gv))return ge();t={verify:Ph(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,u){const d=u.transform;if(d instanceof ou)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Io)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ao)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof lu)return{fieldPath:u.field.canonicalString(),increment:d.Ie};throw ge()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:Xk(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge()}(n,e.precondition)),t}function Ey(n,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?pt.updateTime(kt(l.updateTime)):l.exists!==void 0?pt.exists(l.exists):pt.none()}(e.currentDocument):pt.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(u,d){let m=null;if("setToServerValue"in d)Ee(d.setToServerValue==="REQUEST_TIME"),m=new ou;else if("appendMissingElements"in d){const y=d.appendMissingElements.values||[];m=new Io(y)}else if("removeAllFromArray"in d){const y=d.removeAllFromArray.values||[];m=new Ao(y)}else"increment"in d?m=new lu(u,d.increment):ge();const p=mt.fromServerFormat(d.fieldPath);return new Xh(p,m)}(n,a)):[];if(e.update){e.update.name;const a=ri(n,e.update.name),l=new fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(m){const p=m.fieldPaths||[];return new zn(p.map(y=>mt.fromServerFormat(y)))}(e.updateMask);return new es(a,l,u,t,r)}return new Ru(a,l,t,r)}if(e.delete){const a=ri(n,e.delete);return new Cu(a,t)}if(e.verify){const a=ri(n,e.verify);return new gv(a,t)}return ge()}function eM(n,e){return n&&n.length>0?(Ee(e!==void 0),n.map(t=>function(a,l){let u=a.updateTime?kt(a.updateTime):kt(l);return u.isEqual(be.min())&&(u=kt(l)),new Fk(u,a.transformResults||[])}(t,e))):[]}function pR(n,e){return{documents:[hR(n,e.path)]}}function gR(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hR(n,a);const l=function(p){if(p.length!==0)return vR(nt.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(p){if(p.length!==0)return p.map(y=>function(w){return{field:Bl(w.field),direction:nM(w.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=_y(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function _R(n){let e=dR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ee(r===1);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=function(v){const w=yR(v);return w instanceof nt&&dv(w)?w.getFilters():[w]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(w=>function(N){return new xh(Fl(N.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(v){let w;return w=typeof v=="object"?v.value:v,Kh(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(v){const w=!!v.before,R=v.values||[];return new ha(R,w)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const w=!v.before,R=v.values||[];return new ha(R,w)}(t.endAt)),qS(e,a,u,l,d,"F",m,p)}function tM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fl(t.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Fl(t.unaryFilter.field);return Fe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fl(t.unaryFilter.field);return Fe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Fl(t.unaryFilter.field);return Fe.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(n):n.fieldFilter!==void 0?function(t){return Fe.create(Fl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return nt.create(t.compositeFilter.filters.map(r=>yR(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(n):ge()}function nM(n){return $k[n]}function rM(n){return Qk[n]}function iM(n){return Wk[n]}function Bl(n){return{fieldPath:n.canonicalString()}}function Fl(n){return mt.fromServerFormat(n.fieldPath)}function vR(n){return n instanceof Fe?function(t){if(t.op==="=="){if(CI(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NAN"}};if(RI(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(CI(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NAN"}};if(RI(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(t.field),op:rM(t.op),value:t.value}}}(n):n instanceof nt?function(t){const r=t.getFilters().map(a=>vR(a));return r.length===1?r[0]:{compositeFilter:{op:iM(t.op),filters:r}}}(n):ge()}function sM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ER(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,r,a,l=be.min(),u=be.min(),d=Dt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.Tt=e}}function aM(n,e){let t;if(e.document)t=mR(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),a=Ro(e.noDocument.readTime);t=ht.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge();{const r=ce.fromSegments(e.unknownDocument.path),a=Ro(e.unknownDocument.version);t=ht.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new gt(a[0],a[1]);return be.fromTimestamp(l)}(e.readTime)),t}function GI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,u){return{name:Ph(l,u.key),fields:u.data.value.mapValue.fields,updateTime:uu(l,u.version.toTimestamp()),createTime:uu(l,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:So(e.version)};else{if(!e.isUnknownDocument())return ge();r.unknownDocument={path:t.path.toArray(),version:So(e.version)}}return r}function Tm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function So(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ro(n){const e=new gt(n.seconds,n.nanoseconds);return be.fromTimestamp(e)}function co(n,e){const t=(e.baseMutations||[]).map(l=>Ey(n.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>Ey(n.Tt,l)),a=gt.fromMillis(e.localWriteTimeMs);return new _v(e.batchId,a,t,r)}function ih(n){const e=Ro(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ro(n.lastLimboFreeSnapshotVersion):be.min();let r;return r=function(l){return l.documents!==void 0}(n.query)?function(l){return Ee(l.documents.length===1),Nn(Su(dR(l.documents[0])))}(n.query):function(l){return Nn(_R(l))}(n.query),new Ui(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Dt.fromBase64String(n.resumeToken))}function wR(n,e){const t=So(e.snapshotVersion),r=So(e.lastLimboFreeSnapshotVersion);let a;a=ym(e.target)?pR(n.Tt,e.target):gR(n.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function wv(n){const e=_R({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Em(e,e.limit,"L"):e}function V_(n,e){return new vv(e.largestBatchId,Ey(n.Tt,e.overlayMutation))}function KI(n,e){const t=e.path.lastSegment();return[n,Tn(e.path.popLast()),t]}function $I(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:So(r.readTime),documentKey:Tn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{getBundleMetadata(e,t){return QI(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ro(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return QI(e).put(function(a){return{bundleId:a.id,createTime:So(kt(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return WI(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:wv(l.bundledQuery),readTime:Ro(l.readTime)}}(r)})}saveNamedQuery(e,t){return WI(e).put(function(a){return{name:a.name,readTime:So(kt(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function QI(n){return Wt(n,Bm)}function WI(n){return Wt(n,Fm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Qm(e,r)}getOverlay(e,t){return Gc(e).get(KI(this.userId,t)).next(r=>r?V_(this.serializer,r):null)}getOverlays(e,t){const r=ei();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,u)=>{const d=new vv(t,u);a.push(this.Et(e,d))}),j.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(u=>a.add(Tn(u.getCollectionPath())));const l=[];return a.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Gc(e).J(ly,d))}),j.waitFor(l)}getOverlaysForCollection(e,t,r){const a=ei(),l=Tn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Gc(e).G(ly,u).next(d=>{for(const m of d){const p=V_(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=ei();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gc(e).Z({index:wS,range:d},(m,p,y)=>{const v=V_(this.serializer,p);l.size()<a||v.largestBatchId===u?(l.set(v.getKey(),v),u=v.largestBatchId):y.done()}).next(()=>l)}Et(e,t){return Gc(e).put(function(a,l,u){const[d,m,p]=KI(l,u.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Nh(a.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Gc(n){return Wt(n,jm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{dt(e){return Wt(e,lv)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Dt.fromUint8Array(r):Dt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(dt(e.integerValue));else if("doubleValue"in e){const r=dt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),bh(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=$i(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Qi(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?OS(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Gm(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):ge()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const l=e.fields||{};this.ft(t,53);const u=iu,d=((a=(r=l[u].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(dt(d)),this.wt(u,t),this.Rt(l[u],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),ce.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}ho.xt=new ho;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=255;function uM(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function YI(n){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const u=uM(255&r[l]);if(a+=u,u!==8)break}return a}(n);return Math.ceil(e/8)}class cM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Kt(e){const t=this.Ut(e),r=YI(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Ut(e),r=YI(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Ol),this.jt(255)}Ht(){this.Jt(Ol),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Ol?(this.jt(Ol),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Ol?(this.Jt(Ol),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class hM{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class dM{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Kc{constructor(){this.Zt=new cM,this.Xt=new hM(this.Zt),this.en=new dM(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fo(this.indexId,this.documentKey,this.arrayValue,r)}}function js(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=XI(n.arrayValue,e.arrayValue),t!==0?t:(t=XI(n.directionalValue,e.directionalValue),t!==0?t:ce.comparator(n.documentKey,e.documentKey)))}function XI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.rn=new rt((t,r)=>mt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Ee(e.collectionGroup===this.collectionId),this.an)return!1;const t=sy(e);if(t!==void 0&&!this.cn(t))return!1;const r=oo(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.ln(d,m)||!this.hn(this.sn[u++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(u>=this.sn.length||!this.hn(this.sn[u++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new rt(mt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Wf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Wf(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Wf(r.field,r.dir==="asc"?0:1)));return new dm(dm.UNKNOWN_ID,this.collectionId,t,wh.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(n){var e,t;if(Ee(n instanceof Fe||n instanceof nt),n instanceof Fe){if(n instanceof jS){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>Fe.create(n.field,"==",l)))||[];return nt.create(a,"or")}return n}const r=n.filters.map(a=>bR(a));return nt.create(r,n.op)}function fM(n){if(n.getFilters().length===0)return[];const e=by(bR(n));return Ee(IR(e)),Ty(e)||wy(e)?[e]:e.getFilters()}function Ty(n){return n instanceof Fe}function wy(n){return n instanceof nt&&dv(n)}function IR(n){return Ty(n)||wy(n)||function(t){if(t instanceof nt&&fy(t)){for(const r of t.getFilters())if(!Ty(r)&&!wy(r))return!1;return!0}return!1}(n)}function by(n){if(Ee(n instanceof Fe||n instanceof nt),n instanceof Fe)return n;if(n.filters.length===1)return by(n.filters[0]);const e=n.filters.map(r=>by(r));let t=nt.create(e,n.op);return t=wm(t),IR(t)?t:(Ee(t instanceof nt),Ee(au(t)),Ee(t.filters.length>1),t.filters.reduce((r,a)=>bv(r,a)))}function bv(n,e){let t;return Ee(n instanceof Fe||n instanceof nt),Ee(e instanceof Fe||e instanceof nt),t=n instanceof Fe?e instanceof Fe?function(a,l){return nt.create([a,l],"and")}(n,e):JI(n,e):e instanceof Fe?JI(e,n):function(a,l){if(Ee(a.filters.length>0&&l.filters.length>0),au(a)&&au(l))return zS(a,l.getFilters());const u=fy(a)?a:l,d=fy(a)?l:a,m=u.filters.map(p=>bv(p,d));return nt.create(m,"or")}(n,e),wm(t)}function JI(n,e){if(au(e))return zS(e,n.getFilters());{const t=e.filters.map(r=>bv(n,r));return nt.create(t,"or")}}function wm(n){if(Ee(n instanceof Fe||n instanceof nt),n instanceof Fe)return n;const e=n.getFilters();if(e.length===1)return wm(e[0]);if(LS(n))return n;const t=e.map(a=>wm(a)),r=[];return t.forEach(a=>{a instanceof Fe?r.push(a):a instanceof nt&&(a.op===n.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:nt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.Tn=new Iv}addToCollectionParentIndex(e,t){return this.Tn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Xn.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class Iv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new rt(Be.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new rt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="IndexedDbIndexManager",Bf=new Uint8Array(0);class pM{constructor(e,t){this.databaseId=t,this.In=new Iv,this.En=new Ji(r=>bo(r),(r,a)=>Qh(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:r,parent:Tn(a)};return t0(e).put(l)}return j.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[cS(t),""],!1,!0);return t0(e).G(a).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Jr(u.parent))}return r})}addFieldIndex(e,t){const r=$c(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=kl(e);return l.next(d=>{u.put($I(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=$c(e),a=kl(e),l=Vl(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=$c(e),r=Vl(e),a=kl(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return j.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new ZI(r).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=Vl(e);let a=!0;const l=new Map;return j.forEach(this.dn(t),u=>this.An(e,u).next(d=>{a&&(a=!!d),l.set(u,d)})).next(()=>{if(a){let u=Oe();const d=[];return j.forEach(l,(m,p)=>{se(e0,`Using index ${function(Y){return`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map(de=>`${de.fieldPath}:${de.kind}`).join(",")}`}(m)} to execute ${bo(t)}`);const y=function(Y,de){const le=sy(de);if(le===void 0)return null;for(const te of vm(Y,le.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(p,m),v=function(Y,de){const le=new Map;for(const te of oo(de))for(const C of vm(Y,te.fieldPath))switch(C.op){case"==":case"in":le.set(te.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return le.set(te.fieldPath.canonicalString(),C.value),Array.from(le.values())}return null}(p,m),w=function(Y,de){const le=[];let te=!0;for(const C of oo(de)){const S=C.kind===0?OI(Y,C.fieldPath,Y.startAt):VI(Y,C.fieldPath,Y.startAt);le.push(S.value),te&&(te=S.inclusive)}return new ha(le,te)}(p,m),R=function(Y,de){const le=[];let te=!0;for(const C of oo(de)){const S=C.kind===0?VI(Y,C.fieldPath,Y.endAt):OI(Y,C.fieldPath,Y.endAt);le.push(S.value),te&&(te=S.inclusive)}return new ha(le,te)}(p,m),N=this.Rn(m,p,w),M=this.Rn(m,p,R),U=this.Vn(m,p,v),G=this.mn(m.indexId,y,N,w.inclusive,M,R.inclusive,U);return j.forEach(G,J=>r.H(J,t.limit).next(Y=>{Y.forEach(de=>{const le=ce.fromSegments(de.documentKey);u.has(le)||(u=u.add(le),d.push(le))})}))}).next(()=>d)}return j.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=fM(nt.create(e.filters,"and")).map(r=>py(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,l,u,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),p=m/(t!=null?t.length:1),y=[];for(let v=0;v<m;++v){const w=t?this.fn(t[v/p]):Bf,R=this.gn(e,w,r[v%p],a),N=this.pn(e,w,l[v%p],u),M=d.map(U=>this.gn(e,w,U,!0));y.push(...this.createRange(R,N,M))}return y}gn(e,t,r,a){const l=new fo(e,ce.empty(),t,r);return a?l:l.nn()}pn(e,t,r,a){const l=new fo(e,ce.empty(),t,r);return a?l.nn():l}An(e,t){const r=new ZI(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let u=null;for(const d of l)r.un(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;const a=this.dn(t);return j.forEach(a,l=>this.An(e,l).next(u=>{u?r!==0&&u.fields.length<function(m){let p=new rt(mt.comparator),y=!1;for(const v of m.filters)for(const w of v.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?y=!0:p=p.add(w.field));for(const v of m.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(y?1:0)}(l)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new Kc;for(const a of oo(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.tn(a.kind);ho.xt.At(l,u)}return r.Yt()}fn(e){const t=new Kc;return ho.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Kc;return ho.xt.At(wo(this.databaseId,t),r.tn(function(l){const u=oo(l);return u.length===0?0:u[u.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new Kc);let l=0;for(const u of oo(e)){const d=r[l++];for(const m of a)if(this.bn(t,u.fieldPath)&&Dh(d))a=this.Sn(a,u,d);else{const p=m.tn(u.kind);ho.xt.At(d,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}Sn(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const d of a){const m=new Kc;m.seed(d.Yt()),ho.xt.At(u,m.tn(t.kind)),l.push(m)}return l}bn(e,t){return!!e.filters.find(r=>r instanceof Fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=$c(e),a=kl(e);return(t?r.G(oy,IDBKeyRange.bound(t,t)):r.G()).next(l=>{const u=[];return j.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{u.push(function(y,v){const w=v?new wh(v.sequenceNumber,new Xn(Ro(v.readTime),new ce(Jr(v.documentKey)),v.largestBatchId)):wh.empty(),R=y.fields.map(([N,M])=>new Wf(mt.fromServerFormat(N),M));return new dm(y.indexId,y.collectionGroup,R,w)}(d,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Pe(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=$c(e),l=kl(e);return this.vn(e).next(u=>a.G(oy,IDBKeyRange.bound(t,t)).next(d=>j.forEach(d,m=>l.put($I(m.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,(a,l)=>{const u=r.get(a.collectionGroup);return(u?j.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),j.forEach(d,m=>this.Cn(e,a,m).next(p=>{const y=this.Fn(l,m);return p.isEqual(y)?j.resolve():this.Mn(e,l,m,p,y)}))))})}xn(e,t,r,a){return Vl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return Vl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=Vl(e);let l=new rt(js);return a.Z({index:TS,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(u,d)=>{l=l.add(new fo(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(e,t){let r=new rt(js);const a=this.yn(t,e);if(a==null)return r;const l=sy(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Dh(u))for(const d of u.arrayValue.values||[])r=r.add(new fo(t.indexId,e.key,this.fn(d),a))}else r=r.add(new fo(t.indexId,e.key,Bf,a));return r}Mn(e,t,r,a,l){se(e0,"Updating index entries for document '%s'",t.key);const u=[];return function(m,p,y,v,w){const R=m.getIterator(),N=p.getIterator();let M=Nl(R),U=Nl(N);for(;M||U;){let G=!1,J=!1;if(M&&U){const Y=y(M,U);Y<0?J=!0:Y>0&&(G=!0)}else M!=null?J=!0:G=!0;G?(v(U),U=Nl(N)):J?(w(M),M=Nl(R)):(M=Nl(R),U=Nl(N))}}(a,l,js,d=>{u.push(this.xn(e,t,r,d))},d=>{u.push(this.On(e,t,r,d))}),j.waitFor(u)}vn(e){let t=1;return kl(e).Z({index:ES,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>js(u,d)).filter((u,d,m)=>!d||js(u,m[d-1])!==0);const a=[];a.push(e);for(const u of r){const d=js(u,e),m=js(u,t);if(d===0)a[0]=e.nn();else if(d>0&&m<0)a.push(u),a.push(u.nn());else if(m>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Nn(a[u],a[u+1]))return[];const d=[a[u].indexId,this.uid,a[u].arrayValue,a[u].directionalValue,Bf,[]],m=[a[u+1].indexId,this.uid,a[u+1].arrayValue,a[u+1].directionalValue,Bf,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(e,t){return js(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(n0)}getMinOffset(e,t){return j.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||ge())).next(n0)}}function t0(n){return Wt(n,Sh)}function Vl(n){return Wt(n,_m)}function $c(n){return Wt(n,ov)}function kl(n){return Wt(n,gm)}function n0(n){Ee(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;iv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Xn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AR=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n,e,t){const r=n.store(Ir),a=n.store(eu),l=[],u=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:u},(y,v,w)=>(d++,w.delete()));l.push(m.next(()=>{Ee(d===1)}));const p=[];for(const y of t.mutations){const v=_S(e,y.key.path,t.batchId);l.push(a.delete(v)),p.push(y.key)}return j.waitFor(l).next(()=>p)}function bm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ge();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(AR,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);class Wm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){Ee(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new Wm(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).Z({index:po,range:r},(a,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=jl(e),u=qs(e);return u.add({}).next(d=>{Ee(typeof d=="number");const m=new _v(d,t,r,a),p=function(R,N,M){const U=M.baseMutations.map(J=>Nh(R.Tt,J)),G=M.mutations.map(J=>Nh(R.Tt,J));return{userId:N,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:U,mutations:G}}(this.serializer,this.userId,m),y=[];let v=new rt((w,R)=>Pe(w.canonicalString(),R.canonicalString()));for(const w of a){const R=_S(this.userId,w.key.path,d);v=v.add(w.key.path.popLast()),y.push(u.put(p)),y.push(l.put(R,WV))}return v.forEach(w=>{y.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),j.waitFor(y).next(()=>m)})}lookupMutationBatch(e,t){return qs(e).get(t).next(r=>r?(Ee(r.userId===this.userId),co(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?j.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return qs(e).Z({index:po,range:a},(u,d,m)=>{d.userId===this.userId&&(Ee(d.batchId>=r),l=co(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ea;return qs(e).Z({index:po,range:t,reverse:!0},(a,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ea],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).G(po,t).next(r=>r.map(a=>co(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return jl(e).Z({range:a},(u,d,m)=>{const[p,y,v]=u,w=Jr(y);if(p===this.userId&&t.path.isEqual(w))return qs(e).get(v).next(R=>{if(!R)throw ge();Ee(R.userId===this.userId),l.push(co(this.serializer,R))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Pe);const a=[];return t.forEach(l=>{const u=Yf(this.userId,l.path),d=IDBKeyRange.lowerBound(u),m=jl(e).Z({range:d},(p,y,v)=>{const[w,R,N]=p,M=Jr(R);w===this.userId&&l.path.isEqual(M)?r=r.add(N):v.done()});a.push(m)}),j.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Yf(this.userId,r),u=IDBKeyRange.lowerBound(l);let d=new rt(Pe);return jl(e).Z({range:u},(m,p,y)=>{const[v,w,R]=m,N=Jr(w);v===this.userId&&r.isPrefixOf(N)?N.length===a&&(d=d.add(R)):y.done()}).next(()=>this.kn(e,d))}kn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(qs(e).get(l).next(u=>{if(u===null)throw ge();Ee(u.userId===this.userId),r.push(co(this.serializer,u))}))}),j.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return SR(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),j.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),a=[];return jl(e).Z({range:r},(l,u,d)=>{if(l[0]===this.userId){const m=Jr(l[1]);a.push(m)}else d.done()}).next(()=>{Ee(a.length===0)})})}containsKey(e,t){return RR(e,this.userId,t)}Qn(e){return CR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ea,lastStreamToken:""})}}function RR(n,e,t){const r=Yf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return jl(n).Z({range:l,Y:!0},(d,m,p)=>{const[y,v,w]=d;y===e&&v===a&&(u=!0),p.done()}).next(()=>u)}function qs(n){return Wt(n,Ir)}function jl(n){return Wt(n,eu)}function CR(n){return Wt(n,Ih)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Co(0)}static Un(){return new Co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Co(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>be.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ml(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(Ee(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Ml(e).Z((u,d)=>{const m=ih(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>j.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Ml(e).Z((r,a)=>{const l=ih(a);t(l)})}Wn(e){return i0(e).get(pm).next(t=>(Ee(t!==null),t))}Gn(e,t){return i0(e).put(pm,t)}zn(e,t){return Ml(e).put(wR(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=bo(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ml(e).Z({range:a,index:vS},(u,d,m)=>{const p=ih(d);Qh(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=$s(e);return t.forEach(u=>{const d=Tn(u.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,u))}),j.waitFor(a)}removeMatchingKeys(e,t,r){const a=$s(e);return j.forEach(t,l=>{const u=Tn(l.path);return j.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=$s(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=$s(e);let l=Oe();return a.Z({range:r,Y:!0},(u,d,m)=>{const p=Jr(u[1]),y=new ce(p);l=l.add(y)}).next(()=>l)}containsKey(e,t){const r=Tn(t.path),a=IDBKeyRange.bound([r],[cS(r)],!1,!0);let l=0;return $s(e).Z({index:av,Y:!0,range:a},([u,d],m,p)=>{u!==0&&(l++,p.done())}).next(()=>l>0)}lt(e,t){return Ml(e).get(t).next(r=>r?ih(r):null)}}function Ml(n){return Wt(n,tu)}function i0(n){return Wt(n,vo)}function $s(n){return Wt(n,nu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="LruGarbageCollector",_M=1048576;function a0([n,e],[t,r]){const a=Pe(n,t);return a===0?Pe(e,r):a}class yM{constructor(e){this.Hn=e,this.buffer=new rt(a0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();a0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){se(s0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ea(t)?se(s0,"Ignoring IndexedDB error during garbage collection: ",t):await va(t)}await this.er(3e5)})}}class vM{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Un.ae);const r=new yM(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(r0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,u,d,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(e,r,t))).next(v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),Ul()<=Ue.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(d-u)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function xR(n,e){return new vM(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t){this.db=e,this.garbageCollector=xR(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return Ff(e,r)}removeReference(e,t,r){return Ff(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ff(e,t)}ar(e,t){return function(a,l){let u=!1;return CR(a).X(d=>RR(a,d,l).next(m=>(m&&(u=!0),j.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(u,d)=>{if(d<=t){const m=this.ar(e,u).next(p=>{if(!p)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,be.min()),$s(e).delete(function(v){return[0,Tn(v.path)]}(u))))});a.push(m)}}).next(()=>j.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ff(e,t)}_r(e,t){const r=$s(e);let a,l=Un.ae;return r.Z({index:av},([u,d],{path:m,sequenceNumber:p})=>{u===0?(l!==Un.ae&&t(new ce(Jr(a)),l),l=p,a=m):l=Un.ae}).next(()=>{l!==Un.ae&&t(new ce(Jr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ff(n,e){return $s(n).put(function(r,a){return{targetId:0,path:Tn(r.path),sequenceNumber:a}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new Ji(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return so(e).put(r)}removeEntry(e,t,r){return so(e).delete(function(l,u){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Tm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=ht.newInvalidDocument(t);return so(e).Z({index:Xf,range:IDBKeyRange.only(Qc(t))},(a,l)=>{r=this.cr(t,l)}).next(()=>r)}lr(e,t){let r={size:0,document:ht.newInvalidDocument(t)};return so(e).Z({index:Xf,range:IDBKeyRange.only(Qc(t))},(a,l)=>{r={document:this.cr(t,l),size:bm(l)}}).next(()=>r)}getEntries(e,t){let r=Bn();return this.hr(e,t,(a,l)=>{const u=this.cr(a,l);r=r.insert(a,u)}).next(()=>r)}Pr(e,t){let r=Bn(),a=new ut(ce.comparator);return this.hr(e,t,(l,u)=>{const d=this.cr(l,u);r=r.insert(l,d),a=a.insert(l,bm(u))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return j.resolve();let a=new rt(u0);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Qc(a.first()),Qc(a.last())),u=a.getIterator();let d=u.getNext();return so(e).Z({index:Xf,range:l},(m,p,y)=>{const v=ce.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&u0(d,v)<0;)r(d,null),d=u.getNext();d&&d.isEqual(v)&&(r(d,p),d=u.hasNext()?u.getNext():null),d?y.W(Qc(d)):y.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Tm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return so(e).G(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let y=Bn();for(const v of p){const w=this.cr(ce.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(Yh(t,w)||a.has(w.key))&&(y=y.insert(w.key,w))}return y})}getAllFromCollectionGroup(e,t,r,a){let l=Bn();const u=l0(t,r),d=l0(t,Xn.max());return so(e).Z({index:yS,range:IDBKeyRange.bound(u,d,!0)},(m,p,y)=>{const v=this.cr(ce.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(v.key,v),l.size===a&&y.done()}).next(()=>l)}newChangeBuffer(e){return new wM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return o0(e).get(ay).next(t=>(Ee(!!t),t))}ur(e,t){return o0(e).put(ay,t)}cr(e,t){if(t){const r=aM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return ht.newInvalidDocument(e)}}function NR(n){return new TM(n)}class wM extends PR{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new Ji(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new rt((l,u)=>Pe(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const d=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,d.readTime)),u.isValidDocument()){const m=GI(this.Ir.serializer,u);a=a.add(l.path.popLast());const p=bm(m);r+=p-d.size,t.push(this.Ir.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=GI(this.Ir.serializer,u.convertToNoDocument(be.min()));t.push(this.Ir.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((l,u)=>{this.Er.set(l,{size:u,readTime:r.get(l).readTime})}),r))}}function o0(n){return Wt(n,Ah)}function so(n){return Wt(n,mm)}function Qc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l0(n,e){const t=e.documentKey.path.toArray();return[n,Tm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function u0(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Pe(t[l],r[l]),a)return a;return a=Pe(t.length,r.length),a||(a=Pe(t[t.length-2],r[r.length-2]),a||Pe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&ch(r.mutation,a,zn.empty(),gt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){const a=ei();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let u=nh();return l.forEach((d,m)=>{u=u.insert(d,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ei();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,a){let l=Bn();const u=uh(),d=function(){return uh()}();return t.forEach((m,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof es)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),ch(y.mutation,p,y.mutation.getFieldMask(),gt.now())):u.set(p.key,zn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>{var v;return d.set(p,new bM(y,(v=u.get(p))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,t){const r=uh();let a=new ut((u,d)=>u-d),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let y=r.get(m)||zn.empty();y=d.applyToLocalView(p,y),r.set(m,y);const v=(a.get(d.batchId)||Oe()).add(m);a=a.insert(d.batchId,v)})}).next(()=>{const u=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,y=m.value,v=WS();y.forEach(w=>{if(!l.has(w)){const R=nR(t.get(w),r.get(w));R!==null&&v.set(w,R),l=l.add(w)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return j.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(u){return ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):j.resolve(ei());let d=Jl,m=l;return u.next(p=>j.forEach(p,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?j.resolve():this.remoteDocumentCache.getEntry(e,y).next(w=>{m=m.insert(y,w)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,Oe())).next(y=>({batchId:d,changes:QS(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let a=nh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=nh();return this.indexManager.getCollectionParents(e,l).next(d=>j.forEach(d,m=>{const p=function(v,w){return new Zi(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(y=>{y.forEach((v,w)=>{u=u.insert(v,w)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(u=>{l.forEach((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,ht.newInvalidDocument(y)))});let d=nh();return u.forEach((m,p)=>{const y=l.get(m);y!==void 0&&ch(y.mutation,p,zn.empty(),gt.now()),Yh(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return j.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:kt(a.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:wv(a.bundledQuery),readTime:kt(a.readTime)}}(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.overlays=new ut(ce.comparator),this.Rr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ei();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),j.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const a=ei(),l=t.length+1,u=new ce(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ut((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=ei(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=ei(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return j.resolve(d)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new vv(t,r));let l=this.Rr.get(t);l===void 0&&(l=Oe(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.Vr=new rt(sn.mr),this.gr=new rt(sn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new sn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new sn(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new ce(new Be([])),r=new sn(t,e),a=new sn(t,e+1),l=[];return this.gr.forEachInRange([r,a],u=>{this.wr(u),l.push(u.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ce(new Be([])),r=new sn(t,e),a=new sn(t,e+1);let l=Oe();return this.gr.forEachInRange([r,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new sn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ce.comparator(e.key,t.key)||Pe(e.Cr,t.Cr)}static pr(e,t){return Pe(e.Cr,t.Cr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new rt(sn.mr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new _v(l,t,r,a);this.mutationQueue.push(u);for(const d of a)this.Mr=this.Mr.add(new sn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return j.resolve(u)}lookupMutationBatch(e,t){return j.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?ea:this.Fr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new sn(t,0),a=new sn(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],u=>{const d=this.Or(u.Cr);l.push(d)}),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Pe);return t.forEach(a=>{const l=new sn(a,0),u=new sn(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,u],d=>{r=r.add(d.Cr)})}),j.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ce.isDocumentKey(l)||(l=l.child(""));const u=new sn(new ce(l),0);let d=new rt(Pe);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},u),j.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ee(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return j.forEach(t.mutations,a=>{const l=new sn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new sn(t,0),a=this.Mr.firstAfterOrEqual(r);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.kr=e,this.docs=function(){return new ut(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let r=Bn();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ht.newInvalidDocument(a))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Bn();const u=t.path,d=new ce(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||iv(dS(y),r)<=0||(a.has(y.key)||Yh(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ge()}qr(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DM(this)}getSize(e){return j.resolve(this.size)}}class DM extends PR{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.persistence=e,this.Qr=new Ji(t=>bo(t),Qh),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Av,this.targetCount=0,this.Ur=Co.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),j.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Co(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.zn(t),j.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),j.waitFor(l).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Un(0),this.zr=!1,this.zr=!0,this.jr=new SM,this.referenceDelegate=e(this),this.Hr=new xM(this),this.indexManager=new mM,this.remoteDocumentCache=function(a){return new CM(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new TR(t),this.Yr=new IM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new RM(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const a=new PM(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return j.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class PM extends mS{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.ti=new Av,this.ni=null}static ri(e){return new Ym(e)}get ii(){if(this.ni)return this.ni;throw ge()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),j.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ii,r=>{const a=ce.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,be.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return j.or([()=>j.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Im{constructor(e,t){this.persistence=e,this.oi=new Ji(r=>Tn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=xR(this,t)}static ri(e,t){return new Im(e,t)}Zr(){}Xr(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return j.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?j.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(d=>{d||(r++,l.removeEntry(u,be.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),j.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jf(e.data.value)),t}ar(e,t,r){return j.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return j.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.serializer=e}B(e,t,r,a){const l=new zm("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore($h)}(e),function(m){m.createObjectStore(Ih,{keyPath:QV}),m.createObjectStore(Ir,{keyPath:TI,autoIncrement:!0}).createIndex(po,wI,{unique:!0}),m.createObjectStore(eu)}(e),c0(e),function(m){m.createObjectStore(lo)}(e));let u=j.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(nu),m.deleteObjectStore(tu),m.deleteObjectStore(vo)}(e),c0(e)),u=u.next(()=>function(m){const p=m.store(vo),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return p.put(pm,y)}(l))),r<4&&a>=4&&(r!==0&&(u=u.next(()=>function(m,p){return p.store(Ir).G().next(v=>{m.deleteObjectStore(Ir),m.createObjectStore(Ir,{keyPath:TI,autoIncrement:!0}).createIndex(po,wI,{unique:!0});const w=p.store(Ir),R=v.map(N=>w.put(N));return j.waitFor(R)})}(e,l))),u=u.next(()=>{(function(m){m.createObjectStore(ru,{keyPath:rk})})(e)})),r<5&&a>=5&&(u=u.next(()=>this._i(l))),r<6&&a>=6&&(u=u.next(()=>(function(m){m.createObjectStore(Ah)}(e),this.ai(l)))),r<7&&a>=7&&(u=u.next(()=>this.ui(l))),r<8&&a>=8&&(u=u.next(()=>this.ci(e,l))),r<9&&a>=9&&(u=u.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(u=u.next(()=>this.li(l))),r<11&&a>=11&&(u=u.next(()=>{(function(m){m.createObjectStore(Bm,{keyPath:ik})})(e),function(m){m.createObjectStore(Fm,{keyPath:sk})}(e)})),r<12&&a>=12&&(u=u.next(()=>{(function(m){const p=m.createObjectStore(jm,{keyPath:dk});p.createIndex(ly,fk,{unique:!1}),p.createIndex(wS,mk,{unique:!1})})(e)})),r<13&&a>=13&&(u=u.next(()=>function(m){const p=m.createObjectStore(mm,{keyPath:YV});p.createIndex(Xf,XV),p.createIndex(yS,ZV)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(lo))),r<14&&a>=14&&(u=u.next(()=>this.Pi(e,l))),r<15&&a>=15&&(u=u.next(()=>function(m){m.createObjectStore(ov,{keyPath:ak,autoIncrement:!0}).createIndex(oy,ok,{unique:!1}),m.createObjectStore(gm,{keyPath:lk}).createIndex(ES,uk,{unique:!1}),m.createObjectStore(_m,{keyPath:ck}).createIndex(TS,hk,{unique:!1})}(e))),r<16&&a>=16&&(u=u.next(()=>{t.objectStore(gm).clear()}).next(()=>{t.objectStore(_m).clear()})),r<17&&a>=17&&(u=u.next(()=>{(function(m){m.createObjectStore(lv,{keyPath:pk})})(e)})),u}ai(e){let t=0;return e.store(lo).Z((r,a)=>{t+=bm(a)}).next(()=>{const r={byteSize:t};return e.store(Ah).put(ay,r)})}_i(e){const t=e.store(Ih),r=e.store(Ir);return t.G().next(a=>j.forEach(a,l=>{const u=IDBKeyRange.bound([l.userId,ea],[l.userId,l.lastAcknowledgedBatchId]);return r.G(po,u).next(d=>j.forEach(d,m=>{Ee(m.userId===l.userId);const p=co(this.serializer,m);return SR(e,l.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(nu),r=e.store(lo);return e.store(vo).get(pm).next(a=>{const l=[];return r.Z((u,d)=>{const m=new Be(u),p=function(v){return[0,Tn(v)]}(m);l.push(t.get(p).next(y=>y?j.resolve():(v=>t.put({targetId:0,path:Tn(v),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>j.waitFor(l))})}ci(e,t){e.createObjectStore(Sh,{keyPath:nk});const r=t.store(Sh),a=new Iv,l=u=>{if(a.add(u)){const d=u.lastSegment(),m=u.popLast();return r.put({collectionId:d,parent:Tn(m)})}};return t.store(lo).Z({Y:!0},(u,d)=>{const m=new Be(u);return l(m.popLast())}).next(()=>t.store(eu).Z({Y:!0},([u,d,m],p)=>{const y=Jr(d);return l(y.popLast())}))}li(e){const t=e.store(tu);return t.Z((r,a)=>{const l=ih(a),u=wR(this.serializer,l);return t.put(u)})}hi(e,t){const r=t.store(lo),a=[];return r.Z((l,u)=>{const d=t.store(mm),m=function(v){return v.document?new ce(Be.fromString(v.document.name).popFirst(5)):v.noDocument?ce.fromSegments(v.noDocument.path):v.unknownDocument?ce.fromSegments(v.unknownDocument.path):ge()}(u).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(d.put(p))}).next(()=>j.waitFor(a))}Pi(e,t){const r=t.store(Ir),a=NR(this.serializer),l=new Sv(Ym.ri,this.serializer.Tt);return r.G().next(u=>{const d=new Map;return u.forEach(m=>{var p;let y=(p=d.get(m.userId))!==null&&p!==void 0?p:Oe();co(this.serializer,m).keys().forEach(v=>y=y.add(v)),d.set(m.userId,y)}),j.forEach(d,(m,p)=>{const y=new an(p),v=Qm.It(this.serializer,y),w=l.getIndexManager(y),R=Wm.It(y,this.serializer,w,l.referenceDelegate);return new OR(a,R,v,w).recalculateAndSaveOverlaysForDocumentKeys(new uy(t,Un.ae),m).next()})})}}function c0(n){n.createObjectStore(nu,{keyPath:ek}).createIndex(av,tk,{unique:!0}),n.createObjectStore(tu,{keyPath:"targetId"}).createIndex(vS,JV,{unique:!0}),n.createObjectStore(vo)}const Hs="IndexedDbPersistence",k_=18e5,M_=5e3,L_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",VR="main";class Rv{constructor(e,t,r,a,l,u,d,m,p,y,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=l,this.window=u,this.document=d,this.Ii=p,this.Ei=y,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=w=>Promise.resolve(),!Rv.D())throw new re(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EM(this,a),this.gi=t+VR,this.serializer=new TR(m),this.pi=new ni(this.gi,this.di,new NM(this.serializer)),this.jr=new lM,this.Hr=new gM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NR(this.serializer),this.Yr=new oM,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,y===!1&&Vt(Hs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,L_);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Un(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Ea(e))return se(Hs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(Hs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Wc(e).get(Pl).next(t=>j.resolve(this.Ni(t)))}Bi(e){return jf(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,k_)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Wt(t,ru);return r.G().next(a=>{const l=this.qi(a,k_),u=a.filter(d=>l.indexOf(d)===-1);return j.forEach(u,d=>r.delete(d.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?j.resolve(!0):Wc(e).get(Pl).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,M_)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,L_);return!1}}return!(!this.networkEnabled||!this.inForeground)||jf(e).G().next(r=>this.qi(r,M_).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||u&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se(Hs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[$h,ru],e=>{const t=new uy(e,Un.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>jf(e).G().next(t=>this.qi(t,k_).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Wm.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pM(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Qm.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){se(Hs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?yk:m===16?_k:m===15?uv:m===14?AS:m===13?IS:m===12?gk:m===11?bS:void ge()}(this.di);let u;return this.pi.runTransaction(e,a,l,d=>(u=new uy(d,this.Gr?this.Gr.next():Un.ae),t==="readwrite-primary"?this.Fi(u).next(m=>!!m||this.Mi(u)).next(m=>{if(!m)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new re(Q.FAILED_PRECONDITION,fS);return r(u)}).next(m=>this.Oi(u).next(()=>m)):this.ji(u).next(()=>r(u)))).then(d=>(u.raiseOnCommittedEvent(),d))}ji(e){return Wc(e).get(Pl).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,M_)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new re(Q.FAILED_PRECONDITION,L_)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wc(e).put(Pl,t)}static D(){return ni.D()}xi(e){const t=Wc(e);return t.get(Pl).next(r=>this.Ni(r)?(se(Hs,"Releasing primary lease."),t.delete(Pl)):j.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;FA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return se(Hs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vt(Hs,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wc(n){return Wt(n,$h)}function jf(n){return Wt(n,ru)}function Cv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=Oe(),a=Oe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Dv(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return FA()?8:pS(wt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new OM;return this._s(e,t,u).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,u,d.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?(Ul()<=Ue.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),j.resolve()):(Ul()<=Ue.DEBUG&&se("QueryEngine","Query:",zl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(Ul()<=Ue.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(t))):j.resolve())}rs(e,t){if(kI(t))return j.resolve(null);let r=Nn(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Em(t,null,"F"),r=Nn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=Oe(...l);return this.ns.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.cs(t,d);return this.ls(t,p,u,m.readTime)?this.rs(e,Em(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,r,a){return kI(t)||a.isEqual(be.min())?j.resolve(null):this.ns.getDocuments(e,r).next(l=>{const u=this.cs(t,l);return this.ls(t,u,r,a)?j.resolve(null):(Ul()<=Ue.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zl(t)),this.hs(e,u,t,hS(a,Jl)).next(d=>d))})}cs(e,t){let r=new rt(KS(e));return t.forEach((a,l)=>{Yh(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return Ul()<=Ue.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",zl(t)),this.ns.getDocumentsMatchingQuery(e,t,Xn.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LocalStore",VM=3e8;class kM{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new ut(Pe),this.Is=new Ji(l=>bo(l),Qh),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OR(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function MR(n,e,t,r){return new kM(n,e,t,r)}async function LR(n,e){const t=fe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],d=[];let m=Oe();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:d}))})})}function MM(n,e){const t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,y){const v=p.batch,w=v.keys();let R=j.resolve();return w.forEach(N=>{R=R.next(()=>y.getEntry(m,N)).next(M=>{const U=p.docVersions.get(N);Ee(U!==null),M.version.compareTo(U)<0&&(v.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(m,v))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Oe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function UR(n){const e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function LM(n,e){const t=fe(n),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((y,v)=>{const w=a.get(v);if(!w)return;d.push(t.Hr.removeMatchingKeys(l,y.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(l,y.addedDocuments,v)));let R=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(Dt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),a=a.insert(v,R),function(M,U,G){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=VM?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(w,R,y)&&d.push(t.Hr.updateTargetData(l,R))});let m=Bn(),p=Oe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(zR(l,u,e.documentUpdates).next(y=>{m=y.Vs,p=y.fs})),!r.isEqual(be.min())){const y=t.Hr.getLastRemoteSnapshotVersion(l).next(v=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return j.waitFor(d).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Ts=a,l))}function zR(n,e,t){let r=Oe(),a=Oe();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let u=Bn();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(be.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):se(xv,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:u,fs:a}})}function UM(n,e){const t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ea),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cu(n,e){const t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,j.resolve(a)):t.Hr.allocateTargetId(r).next(u=>(a=new Ui(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function hu(n,e,t){const r=fe(n),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Ea(u))throw u;se(xv,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function Am(n,e,t){const r=fe(n);let a=be.min(),l=Oe();return r.persistence.runTransaction("Execute query","readwrite",u=>function(m,p,y){const v=fe(m),w=v.Is.get(y);return w!==void 0?j.resolve(v.Ts.get(w)):v.Hr.getTargetData(p,y)}(r,u,Nn(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?a:be.min(),t?l:Oe())).next(d=>(jR(r,GS(e),d),{documents:d,gs:l})))}function BR(n,e){const t=fe(n),r=fe(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,e).next(u=>u?u.target:null))}function FR(n,e){const t=fe(n),r=t.Es.get(e)||be.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,hS(r,Jl),Number.MAX_SAFE_INTEGER)).then(a=>(jR(t,e,a),a))}function jR(n,e,t){let r=n.Es.get(e)||be.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Es.set(e,r)}async function zM(n,e,t,r){const a=fe(n);let l=Oe(),u=Bn();for(const p of t){const y=e.ps(p.metadata.name);p.document&&(l=l.add(y));const v=e.ys(p);v.setReadTime(e.ws(p.metadata.readTime)),u=u.insert(y,v)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await cu(a,function(y){return Nn(Su(Be.fromString(`__bundle__/docs/${y}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>zR(p,d,u).next(y=>(d.apply(p),y)).next(y=>a.Hr.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Hr.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,y.Vs,y.fs)).next(()=>y.Vs)))}async function BM(n,e,t=Oe()){const r=await cu(n,Nn(wv(e.bundledQuery))),a=fe(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const u=kt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Yr.saveNamedQuery(l,e);const d=r.withResumeToken(Dt.EMPTY_BYTE_STRING,u);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firestore_clients";function h0(n,e){return`${qR}_${n}_${e}`}const HR="firestore_mutations";function d0(n,e,t){let r=`${HR}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const GR="firestore_targets";function U_(n,e){return`${GR}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="SharedClientState";class Sm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static bs(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new re(a.error.code,a.error.message))),u?new Sm(e,t,a.state,l):(Vt(Qr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static bs(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new re(r.error.code,r.error.message))),l?new hh(e,r.state,a):(Vt(Qr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=mv();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=gS(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new Rm(e,l):(Vt(Qr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Pv{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Pv(t.clientId,t.onlineState):(Vt(Qr,`Failed to parse online state: ${e}`),null)}}class Iy{constructor(){this.activeTargetIds=mv()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z_{constructor(e,t,r,a,l){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ut(Pe),this.started=!1,this.Os=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=h0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Iy),this.Ls=new RegExp(`^${qR}_${u}_([^_]*)$`),this.ks=new RegExp(`^${HR}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${GR}_${u}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const a=this.getItem(h0(this.persistenceKey,r));if(a){const l=Rm.bs(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const r=this.Us(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(U_(this.persistenceKey,e));if(a){const l=hh.bs(e,a);l&&(r=l.state)}}return t&&this.Hs.Ds(e),this.Ks(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(U_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.js(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(Qr,"READ",e,t),t}setItem(e,t){se(Qr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(Qr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(se(Qr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Us(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(l){let u=Un.ae;if(l!=null)try{const d=JSON.parse(l);Ee(typeof d=="number"),u=d}catch(d){Vt(Qr,"Failed to read sequence number from WebStorage",d)}return u}(t.newValue);r!==Un.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,r){const a=new Sm(this.currentUser,e,t,r),l=d0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ss())}js(e){const t=d0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const a=U_(this.persistenceKey,e),l=new hh(e,t,r);this.setItem(a,l.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return Rm.bs(r,t)}ro(e,t){const r=this.ks.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Sm.bs(new an(l),a,t)}so(e,t){const r=this.qs.exec(e),a=Number(r[1]);return hh.bs(a,t)}Us(e){return Pv.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);se(Qr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(r),u=[],d=[];return l.forEach(m=>{a.has(m)||u.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(u,d).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=mv();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class KR{constructor(){this.ho=new Iy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Iy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="ConnectivityMonitor";class m0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){se(f0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){se(f0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf=null;function Ay(){return qf===null?qf=function(){return 268435456+Math.round(2147483648*Math.random())}():qf++,"0x"+qf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="RestConnection",jM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qM{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===cy?`project_id=${r}`:`project_id=${r}&database_id=${a}`}bo(e,t,r,a,l){const u=Ay(),d=this.So(e,t.toUriEncodedString());se(B_,`Sending RPC '${e}' ${u}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,r).then(p=>(se(B_,`Received RPC '${e}' ${u}: `,p),p),p=>{throw si(B_,`RPC '${e}' ${u} failed with error: `,p,"url: ",d,"request:",r),p})}Co(e,t,r,a,l,u){return this.bo(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Au}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}So(e,t){const r=jM[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class GM extends qM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=Ay();return new Promise((u,d)=>{const m=new rS;m.setWithCredentials(!0),m.listenOnce(iS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Qf.NO_ERROR:const y=m.getResponseJson();se(vn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case Qf.TIMEOUT:se(vn,`RPC '${e}' ${l} timed out`),d(new re(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Qf.HTTP_ERROR:const v=m.getStatus();if(se(vn,`RPC '${e}' ${l} failed with status:`,v,"response text:",m.getResponseText()),v>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w==null?void 0:w.error;if(R&&R.status&&R.message){const N=function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(G)>=0?G:Q.UNKNOWN}(R.status);d(new re(N,R.message))}else d(new re(Q.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new re(Q.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{se(vn,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);se(vn,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=Ay(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=oS(),d=aS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");se(vn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const v=u.createWebChannel(y,m);let w=!1,R=!1;const N=new HM({Fo:U=>{R?se(vn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(w||(se(vn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),w=!0),se(vn,`RPC '${e}' stream ${a} sending:`,U),v.send(U))},Mo:()=>v.close()}),M=(U,G,J)=>{U.listen(G,Y=>{try{J(Y)}catch(de){setTimeout(()=>{throw de},0)}})};return M(v,th.EventType.OPEN,()=>{R||(se(vn,`RPC '${e}' stream ${a} transport opened.`),N.Qo())}),M(v,th.EventType.CLOSE,()=>{R||(R=!0,se(vn,`RPC '${e}' stream ${a} transport closed`),N.Ko())}),M(v,th.EventType.ERROR,U=>{R||(R=!0,si(vn,`RPC '${e}' stream ${a} transport errored:`,U),N.Ko(new re(Q.UNAVAILABLE,"The operation could not be completed")))}),M(v,th.EventType.MESSAGE,U=>{var G;if(!R){const J=U.data[0];Ee(!!J);const Y=J,de=(Y==null?void 0:Y.error)||((G=Y[0])===null||G===void 0?void 0:G.error);if(de){se(vn,`RPC '${e}' stream ${a} received error:`,de);const le=de.status;let te=function(A){const x=Bt[A];if(x!==void 0)return sR(x)}(le),C=de.message;te===void 0&&(te=Q.INTERNAL,C="Unknown error status: "+le+" with message "+de.message),R=!0,N.Ko(new re(te,C)),v.close()}else se(vn,`RPC '${e}' stream ${a} received:`,J),N.Uo(J)}}),M(d,sS.STAT_EVENT,U=>{U.stat===iy.PROXY?se(vn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===iy.NOPROXY&&se(vn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{N.$o()},0),N}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){return typeof window<"u"?window:null}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(n){return new Yk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="PersistentStream";class QR{constructor(e,t,r,a,l,u,d,m){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Nv(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new re(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return se(p0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(se(p0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KM extends QR{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Jk(this.serializer,e),r=function(l){if(!("targetChange"in l))return be.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?kt(u.readTime):be.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=vy(this.serializer),t.addTarget=function(l,u){let d;const m=u.target;if(d=ym(m)?{documents:pR(l,m)}:{query:gR(l,m).ht},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=uR(l,u.resumeToken);const p=_y(l,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=uu(l,u.snapshotVersion.toTimestamp());const p=_y(l,u.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=tM(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=vy(this.serializer),t.removeTarget=e,this.I_(t)}}class $M extends QR{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=eM(e.writeResults,e.commitTime),r=kt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=vy(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nh(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{}class WM extends QM{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.bo(e,yy(t,r),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(Q.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Co(e,yy(t,r),a,u,d,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re(Q.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class YM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Vt(t),this.N_=!1):se("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="RemoteStore";class XM{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(u=>{r.enqueueAndForget(async()=>{wa(this)&&(se(Do,"Restarting streams for network reachability change."),await async function(m){const p=fe(m);p.W_.add(4),await Du(p),p.j_.set("Unknown"),p.W_.delete(4),await td(p)}(this))})}),this.j_=new YM(r,a)}}async function td(n){if(wa(n))for(const e of n.G_)await e(!0)}async function Du(n){for(const e of n.G_)await e(!1)}function Xm(n,e){const t=fe(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),kv(t)?Vv(t):Pu(t).c_()&&Ov(t,e))}function du(n,e){const t=fe(n),r=Pu(t);t.U_.delete(e),r.c_()&&WR(t,e),t.U_.size===0&&(r.c_()?r.P_():wa(t)&&t.j_.set("Unknown"))}function Ov(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pu(n).y_(e)}function WR(n,e){n.H_.Ne(e),Pu(n).w_(e)}function Vv(n){n.H_=new Kk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Pu(n).start(),n.j_.B_()}function kv(n){return wa(n)&&!Pu(n).u_()&&n.U_.size>0}function wa(n){return fe(n).W_.size===0}function YR(n){n.H_=void 0}async function ZM(n){n.j_.set("Online")}async function JM(n){n.U_.forEach((e,t)=>{Ov(n,e)})}async function e2(n,e){YR(n),kv(n)?(n.j_.q_(e),Vv(n)):n.j_.set("Unknown")}async function t2(n,e,t){if(n.j_.set("Online"),e instanceof lR&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const d of l.targetIds)a.U_.has(d)&&(await a.remoteSyncer.rejectListen(d,u),a.U_.delete(d),a.H_.removeTarget(d))}(n,e)}catch(r){se(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cm(n,r)}else if(e instanceof nm?n.H_.We(e):e instanceof oR?n.H_.Ze(e):n.H_.je(e),!t.isEqual(be.min()))try{const r=await UR(n.localStore);t.compareTo(r)>=0&&await function(l,u){const d=l.H_.ot(u);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.U_.get(p);y&&l.U_.set(p,y.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach((m,p)=>{const y=l.U_.get(m);if(!y)return;l.U_.set(m,y.withResumeToken(Dt.EMPTY_BYTE_STRING,y.snapshotVersion)),WR(l,m);const v=new Ui(y.target,m,p,y.sequenceNumber);Ov(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){se(Do,"Failed to raise snapshot:",r),await Cm(n,r)}}async function Cm(n,e,t){if(!Ea(e))throw e;n.W_.add(1),await Du(n),n.j_.set("Offline"),t||(t=()=>UR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se(Do,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await td(n)})}function XR(n,e){return e().catch(t=>Cm(n,t,e))}async function xu(n){const e=fe(n),t=da(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:ea;for(;n2(e);)try{const a=await UM(e.localStore,r);if(a===null){e.K_.length===0&&t.P_();break}r=a.batchId,r2(e,a)}catch(a){await Cm(e,a)}ZR(e)&&JR(e)}function n2(n){return wa(n)&&n.K_.length<10}function r2(n,e){n.K_.push(e);const t=da(n);t.c_()&&t.b_&&t.S_(e.mutations)}function ZR(n){return wa(n)&&!da(n).u_()&&n.K_.length>0}function JR(n){da(n).start()}async function i2(n){da(n).C_()}async function s2(n){const e=da(n);for(const t of n.K_)e.S_(t.mutations)}async function a2(n,e,t){const r=n.K_.shift(),a=yv.from(r,e,t);await XR(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await xu(n)}async function o2(n,e){e&&da(n).b_&&await async function(r,a){if(function(u){return iR(u)&&u!==Q.ABORTED}(a.code)){const l=r.K_.shift();da(r).h_(),await XR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await xu(r)}}(n,e),ZR(n)&&JR(n)}async function g0(n,e){const t=fe(n);t.asyncQueue.verifyOperationInProgress(),se(Do,"RemoteStore received new credentials");const r=wa(t);t.W_.add(3),await Du(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await td(t)}async function Sy(n,e){const t=fe(n);e?(t.W_.delete(2),await td(t)):e||(t.W_.add(2),await Du(t),t.j_.set("Unknown"))}function Pu(n){return n.J_||(n.J_=function(t,r,a){const l=fe(t);return l.M_(),new KM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:ZM.bind(null,n),No:JM.bind(null,n),Lo:e2.bind(null,n),p_:t2.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),kv(n)?Vv(n):n.j_.set("Unknown")):(await n.J_.stop(),YR(n))})),n.J_}function da(n){return n.Y_||(n.Y_=function(t,r,a){const l=fe(t);return l.M_(),new $M(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:i2.bind(null,n),Lo:o2.bind(null,n),D_:s2.bind(null,n),v_:a2.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await xu(n)):(await n.Y_.stop(),n.K_.length>0&&(se(Do,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,d=new Mv(e,t,u,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nu(n,e){if(Vt("AsyncQueue",`${e}: ${n}`),Ea(n))return new re(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{static emptySet(e){return new Gl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=nh(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.Z_=new ut(ce.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ge():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class fu{constructor(e,t,r,a,l,u,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new fu(e,t,Gl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class u2{constructor(){this.queries=y0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=fe(t),l=a.queries;a.queries=y0(),l.forEach((u,d)=>{for(const m of d.ta)m.onError(r)})})(this,new re(Q.ABORTED,"Firestore shutting down"))}}function y0(){return new Ji(n=>HS(n),Wh)}async function Lv(n,e){const t=fe(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new l2,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const d=Nu(u,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&zv(t)}async function Uv(n,e){const t=fe(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ta.indexOf(e);u>=0&&(l.ta.splice(u,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function c2(n,e){const t=fe(n);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const d of u.ta)d.oa(a)&&(r=!0);u.ea=a}}r&&zv(t)}function h2(n,e,t){const r=fe(n),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function zv(n){n.ia.forEach(e=>{e.next()})}var Ry,v0;(v0=Ry||(Ry={}))._a="default",v0.Cache="cache";class Bv{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new fu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ry.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.serializer=e}ps(e){return ri(this.serializer,e)}ys(e){return e.metadata.exists?mR(this.serializer,e.document,!1):ht.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return kt(e)}}class f2{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eC(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Be.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new E0(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const u of a.metadata.queries){const d=(t.get(u)||Oe()).add(l);t.set(u,d)}}return t}async complete(){const e=await zM(this.localStore,new E0(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await BM(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function eC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.key=e}}class nC{constructor(e){this.key=e}}class rC{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Oe(),this.mutatedKeys=Oe(),this.ya=KS(e),this.wa=new Gl(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new _0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const w=a.get(y),R=Yh(this.query,v)?v:null,N=!!w&&this.mutatedKeys.has(w.key),M=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let U=!1;w&&R?w.data.isEqual(R.data)?N!==M&&(r.track({type:3,doc:R}),U=!0):this.va(w,R)||(r.track({type:2,doc:R}),U=!0,(m&&this.ya(R,m)>0||p&&this.ya(R,p)<0)&&(d=!0)):!w&&R?(r.track({type:0,doc:R}),U=!0):w&&!R&&(r.track({type:1,doc:w}),U=!0,(m||p)&&(d=!0)),U&&(R?(u=u.add(R),l=M?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{wa:u,Da:r,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,v)=>function(R,N){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return M(R)-M(N)}(y.type,v.type)||this.ya(y.doc,v.doc)),this.Ca(r),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,u.length!==0||p?{snapshot:new fu(this.query,e.wa,l,u,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new _0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Oe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new nC(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new tC(r))}),t}Oa(e){this.fa=e.gs,this.pa=Oe();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return fu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ba="SyncEngine";class m2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class p2{constructor(e){this.key=e,this.Ba=!1}}class g2{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ji(d=>HS(d),Wh),this.qa=new Map,this.Qa=new Set,this.$a=new ut(ce.comparator),this.Ka=new Map,this.Ua=new Av,this.Wa={},this.Ga=new Map,this.za=Co.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function _2(n,e,t=!0){const r=Zm(n);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await iC(r,e,t,!0),a}async function y2(n,e){const t=Zm(n);await iC(t,e,!0,!1)}async function iC(n,e,t,r){const a=await cu(n.localStore,Nn(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await Fv(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Xm(n.remoteStore,a),d}async function Fv(n,e,t,r,a){n.Ha=(v,w,R)=>async function(M,U,G,J){let Y=U.view.Sa(G);Y.ls&&(Y=await Am(M.localStore,U.query,!1).then(({documents:C})=>U.view.Sa(C,Y)));const de=J&&J.targetChanges.get(U.targetId),le=J&&J.targetMismatches.get(U.targetId)!=null,te=U.view.applyChanges(Y,M.isPrimaryClient,de,le);return Cy(M,U.targetId,te.Ma),te.snapshot}(n,v,w,R);const l=await Am(n.localStore,e,!0),u=new rC(e,l.gs),d=u.Sa(l.documents),m=Jh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=u.applyChanges(d,n.isPrimaryClient,m);Cy(n,t,p.Ma);const y=new m2(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function v2(n,e,t){const r=fe(n),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(u=>!Wh(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await hu(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&du(r.remoteStore,a.targetId),mu(r,a.targetId)}).catch(va)):(mu(r,a.targetId),await hu(r.localStore,a.targetId,!0))}async function E2(n,e){const t=fe(n),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),du(t.remoteStore,r.targetId))}async function T2(n,e,t){const r=Gv(n);try{const a=await function(u,d){const m=fe(u),p=gt.now(),y=d.reduce((R,N)=>R.add(N.key),Oe());let v,w;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=Bn(),M=Oe();return m.ds.getEntries(R,y).next(U=>{N=U,N.forEach((G,J)=>{J.isValidDocument()||(M=M.add(G))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,N)).next(U=>{v=U;const G=[];for(const J of d){const Y=qk(J,v.get(J.key).overlayedDocument);Y!=null&&G.push(new es(J.key,Y,kS(Y.value.mapValue),pt.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,G,d)}).next(U=>{w=U;const G=U.applyToLocalDocumentSet(v,M);return m.documentOverlayCache.saveOverlays(R,U.batchId,G)})}).then(()=>({batchId:w.batchId,changes:QS(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(u,d,m){let p=u.Wa[u.currentUser.toKey()];p||(p=new ut(Pe)),p=p.insert(d,m),u.Wa[u.currentUser.toKey()]=p}(r,a.batchId,t),await ts(r,a.changes),await xu(r.remoteStore)}catch(a){const l=Nu(a,"Failed to persist write");t.reject(l)}}async function sC(n,e){const t=fe(n);try{const r=await LM(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Ka.get(l);u&&(Ee(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?Ee(u.Ba):a.removedDocuments.size>0&&(Ee(u.Ba),u.Ba=!1))}),await ts(t,r,e)}catch(r){await va(r)}}function T0(n,e,t){const r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,u)=>{const d=u.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(u,d){const m=fe(u);m.onlineState=d;let p=!1;m.queries.forEach((y,v)=>{for(const w of v.ta)w.sa(d)&&(p=!0)}),p&&zv(m)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w2(n,e,t){const r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ka.get(e),l=a&&a.key;if(l){let u=new ut(ce.comparator);u=u.insert(l,ht.newNoDocument(l,be.min()));const d=Oe().add(l),m=new Zh(be.min(),new Map,new ut(Pe),u,d);await sC(r,m),r.$a=r.$a.remove(l),r.Ka.delete(e),Hv(r)}else await hu(r.localStore,e,!1).then(()=>mu(r,e,t)).catch(va)}async function b2(n,e){const t=fe(n),r=e.batch.batchId;try{const a=await MM(t.localStore,e);qv(t,r,null),jv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ts(t,a)}catch(a){await va(a)}}async function I2(n,e,t){const r=fe(n);try{const a=await function(u,d){const m=fe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return m.mutationQueue.lookupMutationBatch(p,d).next(v=>(Ee(v!==null),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>m.localDocuments.getDocuments(p,y))})}(r.localStore,e);qv(r,e,t),jv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ts(r,a)}catch(a){await va(a)}}async function A2(n,e){const t=fe(n);wa(t.remoteStore)||se(ba,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(u){const d=fe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(r===ea)return void e.resolve();const a=t.Ga.get(r)||[];a.push(e),t.Ga.set(r,a)}catch(r){const a=Nu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function jv(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function qv(n,e,t){const r=fe(n);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function mu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||aC(n,r)})}function aC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(du(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Hv(n))}function Cy(n,e,t){for(const r of t)r instanceof tC?(n.Ua.addReference(r.key,e),S2(n,r)):r instanceof nC?(se(ba,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||aC(n,r.key)):ge()}function S2(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(se(ba,"New document in limbo: "+t),n.Qa.add(r),Hv(n))}function Hv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ce(Be.fromString(e)),r=n.za.next();n.Ka.set(r,new p2(t)),n.$a=n.$a.insert(t,r),Xm(n.remoteStore,new Ui(Nn(Su(t.path)),r,"TargetPurposeLimboResolution",Un.ae))}}async function ts(n,e,t){const r=fe(n),a=[],l=[],u=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{u.push(r.Ha(m,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=Dv.Yi(m.targetId,p);l.push(v)}}))}),await Promise.all(u),r.La.p_(a),await async function(m,p){const y=fe(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>j.forEach(p,w=>j.forEach(w.Hi,R=>y.persistence.referenceDelegate.addReference(v,w.targetId,R)).next(()=>j.forEach(w.Ji,R=>y.persistence.referenceDelegate.removeReference(v,w.targetId,R)))))}catch(v){if(!Ea(v))throw v;se(xv,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const R=y.Ts.get(w),N=R.snapshotVersion,M=R.withLastLimboFreeSnapshotVersion(N);y.Ts=y.Ts.insert(w,M)}}}(r.localStore,l))}async function R2(n,e){const t=fe(n);if(!t.currentUser.isEqual(e)){se(ba,"User change. New user:",e.toKey());const r=await LR(t.localStore,e);t.currentUser=e,function(l,u){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new re(Q.CANCELLED,u))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ts(t,r.Rs)}}function C2(n,e){const t=fe(n),r=t.Ka.get(e);if(r&&r.Ba)return Oe().add(r.key);{let a=Oe();const l=t.qa.get(e);if(!l)return a;for(const u of l){const d=t.ka.get(u);a=a.unionWith(d.view.ba)}return a}}async function D2(n,e){const t=fe(n),r=await Am(t.localStore,e.query,!0),a=e.view.Oa(r);return t.isPrimaryClient&&Cy(t,e.targetId,a.Ma),a}async function x2(n,e){const t=fe(n);return FR(t.localStore,e).then(r=>ts(t,r))}async function P2(n,e,t,r){const a=fe(n),l=await function(d,m){const p=fe(d),y=fe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",v=>y.Ln(v,m).next(w=>w?p.localDocuments.getDocuments(v,w):j.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await xu(a.remoteStore):t==="acknowledged"||t==="rejected"?(qv(a,e,r||null),jv(a,e),function(d,m){fe(fe(d).mutationQueue).qn(m)}(a.localStore,e)):ge(),await ts(a,l)):se(ba,"Cannot apply mutation batch with id: "+e)}async function N2(n,e){const t=fe(n);if(Zm(t),Gv(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await w0(t,r.toArray());t.ja=!0,await Sy(t.remoteStore,!0);for(const l of a)Xm(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const r=[];let a=Promise.resolve();t.qa.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then(()=>(mu(t,u),hu(t.localStore,u,!0))),du(t.remoteStore,u)}),await a,await w0(t,r),function(u){const d=fe(u);d.Ka.forEach((m,p)=>{du(d.remoteStore,p)}),d.Ua.Dr(),d.Ka=new Map,d.$a=new ut(ce.comparator)}(t),t.ja=!1,await Sy(t.remoteStore,!1)}}async function w0(n,e,t){const r=fe(n),a=[],l=[];for(const u of e){let d;const m=r.qa.get(u);if(m&&m.length!==0){d=await cu(r.localStore,Nn(m[0]));for(const p of m){const y=r.ka.get(p),v=await D2(r,y);v.snapshot&&l.push(v.snapshot)}}else{const p=await BR(r.localStore,u);d=await cu(r.localStore,p),await Fv(r,oC(p),u,!1,d.resumeToken)}a.push(d)}return r.La.p_(l),a}function oC(n){return qS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function O2(n){return function(t){return fe(fe(t).persistence).zi()}(fe(n).localStore)}async function V2(n,e,t,r){const a=fe(n);if(a.ja)return void se(ba,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await FR(a.localStore,GS(l[0])),d=Zh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Dt.EMPTY_BYTE_STRING);await ts(a,u,d);break}case"rejected":await hu(a.localStore,e,!0),mu(a,e,r);break;default:ge()}}async function k2(n,e,t){const r=Zm(n);if(r.ja){for(const a of e){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){se(ba,"Adding an already active target "+a);continue}const l=await BR(r.localStore,a),u=await cu(r.localStore,l);await Fv(r,oC(l),u.targetId,!1,u.resumeToken),Xm(r.remoteStore,u)}for(const a of t)r.qa.has(a)&&await hu(r.localStore,a,!1).then(()=>{du(r.remoteStore,a),mu(r,a)}).catch(va)}}function Zm(n){const e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w2.bind(null,e),e.La.p_=c2.bind(null,e.eventManager),e.La.Ja=h2.bind(null,e.eventManager),e}function Gv(n){const e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I2.bind(null,e),e}function M2(n,e,t){const r=fe(n);(async function(l,u,d){try{const m=await u.getMetadata();if(await function(R,N){const M=fe(R),U=kt(N.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",G=>M.Yr.getBundleMetadata(G,N.id)).then(G=>!!G&&G.createTime.compareTo(U)>=0)}(l.localStore,m))return await u.close(),d._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(eC(m));const p=new f2(m,l.localStore,u.serializer);let y=await u.Ya();for(;y;){const w=await p.Aa(y);w&&d._updateProgress(w),y=await u.Ya()}const v=await p.complete();return await ts(l,v.ma,void 0),await function(R,N){const M=fe(R);return M.persistence.runTransaction("Save bundle","readwrite",U=>M.Yr.saveBundleMetadata(U,N))}(l.localStore,m),d._completeWith(v.progress),Promise.resolve(v.Va)}catch(m){return si(ba,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return MR(this.persistence,new kR,e.initialUser,this.serializer)}Xa(e){return new Sv(Ym.ri,this.serializer)}Za(e){return new KR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class L2 extends Oh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ee(this.persistence.referenceDelegate instanceof Im);const r=this.persistence.referenceDelegate.garbageCollector;return new DR(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Sv(r=>Im.ri(r,t),this.serializer)}}class lC extends Oh{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Gv(this.ru.syncEngine),await xu(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return MR(this.persistence,new kR,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new DR(r,e.asyncQueue,t)}nu(e,t){const r=new KV(t,this.persistence);return new GV(e.asyncQueue,r)}Xa(e){const t=Cv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Rv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$R(),rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new KR}}class U2 extends lC{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof z_&&(this.sharedClientState.syncEngine={uo:P2.bind(null,t),co:V2.bind(null,t),lo:k2.bind(null,t),zi:O2.bind(null,t),ao:x2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await N2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=$R();if(!z_.D(t))throw new re(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Cv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new z_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>T0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R2.bind(null,this.syncEngine),await Sy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u2}()}createDatastore(e){const t=ed(e.databaseInfo.databaseId),r=function(l){return new GM(l)}(e.databaseInfo);return function(l,u,d,m){return new WM(l,u,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,u,d){return new XM(r,a,l,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>T0(this.syncEngine,t,0),function(){return m0.D()?new m0:new FM}())}createSyncEngine(e,t){return function(a,l,u,d,m,p,y){const v=new g2(a,l,u,d,m,p);return y&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=fe(a);se(Do,"RemoteStore shutting down."),l.W_.add(5),await Du(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Vh.provider={build:()=>new Vh};function b0(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new mn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(r);return new d2(JSON.parse(a),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new re(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const u=fe(a),d={documents:l.map(v=>Ph(u.serializer,v))},m=await u.Co("BatchGetDocuments",u.serializer.databaseId,Be.emptyPath(),d,l.length),p=new Map;m.forEach(v=>{const w=Zk(u.serializer,v);p.set(w.key.toString(),w)});const y=[];return l.forEach(v=>{const w=p.get(v.toString());Ee(!!w),y.push(w)}),y}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const a=ce.fromPath(r);this.mutations.push(new gv(a,this.precondition(a)))}),await async function(r,a){const l=fe(r),u={writes:a.map(d=>Nh(l.serializer,d))};await l.bo("Commit",l.serializer.databaseId,Be.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge();t=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new re(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(be.min())?pt.exists(!1):pt.updateTime(t):pt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(be.min()))throw new re(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(t)}return pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new Nv(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new B2(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!Kh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!iR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="FirestoreClient";class j2{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=an.UNAUTHENTICATED,this.clientId=uS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async u=>{se(fa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(se(fa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Nu(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function F_(n,e){n.asyncQueue.verifyOperationInProgress(),se(fa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async a=>{r.isEqual(a)||(await LR(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function I0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Kv(n);se(fa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>g0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>g0(e.remoteStore,a)),n._onlineComponents=e}async function Kv(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(fa,"Using user provided OfflineComponentProvider");try{await F_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;si("Error using user provided cache. Falling back to memory cache: "+t),await F_(n,new Oh)}}else se(fa,"Using default OfflineComponentProvider"),await F_(n,new L2(void 0));return n._offlineComponents}async function ep(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(fa,"Using user provided OnlineComponentProvider"),await I0(n,n._uninitializedComponentsProvider._online)):(se(fa,"Using default OnlineComponentProvider"),await I0(n,new Vh))),n._onlineComponents}function uC(n){return Kv(n).then(e=>e.persistence)}function $v(n){return Kv(n).then(e=>e.localStore)}function cC(n){return ep(n).then(e=>e.remoteStore)}function Qv(n){return ep(n).then(e=>e.syncEngine)}function q2(n){return ep(n).then(e=>e.datastore)}async function pu(n){const e=await ep(n),t=e.eventManager;return t.onListen=_2.bind(null,e.syncEngine),t.onUnlisten=v2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=y2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E2.bind(null,e.syncEngine),t}function H2(n){return n.asyncQueue.enqueue(async()=>{const e=await uC(n),t=await cC(n);return e.setNetworkEnabled(!0),function(a){const l=fe(a);return l.W_.delete(0),td(l)}(t)})}function G2(n){return n.asyncQueue.enqueue(async()=>{const e=await uC(n),t=await cC(n);return e.setNetworkEnabled(!1),async function(a){const l=fe(a);l.W_.add(0),await Du(l),l.j_.set("Offline")}(t)})}function K2(n,e){const t=new mn;return n.asyncQueue.enqueueAndForget(async()=>async function(a,l,u){try{const d=await function(p,y){const v=fe(p);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,y))}(a,l);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new re(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=Nu(d,`Failed to get document '${l} from cache`);u.reject(m)}}(await $v(n),e,t)),t.promise}function hC(n,e,t={}){const r=new mn;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,d,m,p){const y=new Jm({next:w=>{y.su(),u.enqueueAndForget(()=>Uv(l,v));const R=w.docs.has(d);!R&&w.fromCache?p.reject(new re(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&w.fromCache&&m&&m.source==="server"?p.reject(new re(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new Bv(Su(d.path),y,{includeMetadataChanges:!0,Ta:!0});return Lv(l,v)}(await pu(n),n.asyncQueue,e,t,r)),r.promise}function $2(n,e){const t=new mn;return n.asyncQueue.enqueueAndForget(async()=>async function(a,l,u){try{const d=await Am(a,l,!0),m=new rC(l,d.gs),p=m.Sa(d.documents),y=m.applyChanges(p,!1);u.resolve(y.snapshot)}catch(d){const m=Nu(d,`Failed to execute query '${l} against cache`);u.reject(m)}}(await $v(n),e,t)),t.promise}function dC(n,e,t={}){const r=new mn;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,d,m,p){const y=new Jm({next:w=>{y.su(),u.enqueueAndForget(()=>Uv(l,v)),w.fromCache&&m.source==="server"?p.reject(new re(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new Bv(d,y,{includeMetadataChanges:!0,Ta:!0});return Lv(l,v)}(await pu(n),n.asyncQueue,e,t,r)),r.promise}function Q2(n,e){const t=new Jm(e);return n.asyncQueue.enqueueAndForget(async()=>function(a,l){fe(a).ia.add(l),l.next()}(await pu(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(a,l){fe(a).ia.delete(l)}(await pu(n),t))}}function W2(n,e,t,r){const a=function(u,d){let m;return m=typeof u=="string"?aR().encode(u):u,function(y,v){return new z2(y,v)}(function(y,v){if(y instanceof Uint8Array)return b0(y,v);if(y instanceof ArrayBuffer)return b0(new Uint8Array(y),v);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,ed(e));n.asyncQueue.enqueueAndForget(async()=>{M2(await Qv(n),a,r)})}function Y2(n,e){return n.asyncQueue.enqueue(async()=>function(r,a){const l=fe(r);return l.persistence.runTransaction("Get named query","readonly",u=>l.Yr.getNamedQuery(u,a))}(await $v(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(n,e,t){if(!t)throw new re(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mC(n,e,t,r){if(e===!0&&r===!0)throw new re(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function S0(n){if(!ce.isDocumentKey(n))throw new re(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function R0(n){if(ce.isDocumentKey(n))throw new re(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge()}function Ze(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tp(n);throw new re(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pC(n,e){if(e<=0)throw new re(Q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="firestore.googleapis.com",C0=!0;class D0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gC,this.ssl=C0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:C0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_M)throw new re(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kV;switch(r.type){case"firstParty":return new zV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=A0.get(t);r&&(se("ComponentProvider","Removing Datastore"),A0.delete(t),r.terminate())}(this),Promise.resolve()}}function X2(n,e,t,r={}){var a;const l=(n=Ze(n,nd))._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==gC&&l.host!==d&&si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!ra(m,u)&&(n._setSettings(m),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=an.MOCK_USER;else{p=eO(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new re(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new an(v)}n._authCredentials=new MV(new lS(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On=class _C{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _C(this.firestore,e,this._query)}},Tt=class yC{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yC(this.firestore,e,this._key)}},ta=class vC extends On{constructor(e,t,r){super(e,t,Su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ce(e))}withConverter(e){return new vC(this.firestore,e,this._path)}};function EC(n,e,...t){if(n=Se(n),Wv("collection","path",e),n instanceof nd){const r=Be.fromString(e,...t);return R0(r),new ta(n,null,r)}{if(!(n instanceof Tt||n instanceof ta))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return R0(r),new ta(n.firestore,null,r)}}function Z2(n,e){if(n=Ze(n,nd),Wv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new On(n,null,function(r){return new Zi(Be.emptyPath(),r)}(e))}function Dm(n,e,...t){if(n=Se(n),arguments.length===1&&(e=uS.newId()),Wv("doc","path",e),n instanceof nd){const r=Be.fromString(e,...t);return S0(r),new Tt(n,null,new ce(r))}{if(!(n instanceof Tt||n instanceof ta))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return S0(r),new Tt(n.firestore,n instanceof ta?n.converter:null,new ce(r))}}function TC(n,e){return n=Se(n),e=Se(e),(n instanceof Tt||n instanceof ta)&&(e instanceof Tt||e instanceof ta)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wC(n,e){return n=Se(n),e=Se(e),n instanceof On&&e instanceof On&&n.firestore===e.firestore&&Wh(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="AsyncQueue";class P0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Nv(this,"async_queue_retry"),this.bu=()=>{const r=rm();r&&se(x0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new mn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ea(e))throw e;se(x0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d}(r);throw Vt("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=Mv.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&ge()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Dy(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class J2{constructor(){this._progressObserver={},this._taskCompletionResolver=new mn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=-1;let Mt=class extends nd{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new P0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P0(e),this._firestoreClient=void 0,await e}}};function wn(n){if(n._terminated)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bC(n),n._firestoreClient}function bC(n){var e,t,r;const a=n._freezeSettings(),l=function(d,m,p,y){return new Tk(d,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,fC(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new j2(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(n._componentsProvider))}function tL(n,e){si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return IC(n,Vh.provider,{build:r=>new lC(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function nL(n){si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();IC(n,Vh.provider,{build:t=>new U2(t,e.cacheSizeBytes)})}function IC(n,e,t){if((n=Ze(n,Mt))._firestoreClient||n._terminated)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new re(Q.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},bC(n)}function rL(n){if(n._initialized&&!n._terminated)throw new re(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ni.D())return Promise.resolve();const a=r+VR;await ni.delete(a)}(Cv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function iL(n){return function(t){const r=new mn;return t.asyncQueue.enqueueAndForget(async()=>A2(await Qv(t),r)),r.promise}(wn(n=Ze(n,Mt)))}function sL(n){return H2(wn(n=Ze(n,Mt)))}function aL(n){return G2(wn(n=Ze(n,Mt)))}function oL(n,e){const t=wn(n=Ze(n,Mt)),r=new J2;return W2(t,n._databaseId,e,r),r}function lL(n,e){return Y2(wn(n=Ze(n,Mt)),e).then(t=>t?new On(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(Dt.fromBase64String(e))}catch(t){throw new re(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=/^__.*__$/;class cL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}class AC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class rp{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new rp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return xm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(SC(this.Lu)&&uL.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class hL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ed(e)}ju(e,t,r,a=!1){return new rp({Lu:e,methodName:t,zu:r,path:mt.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mo(n){const e=n._freezeSettings(),t=ed(n._databaseId);return new hL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ip(n,e,t,r,a,l={}){const u=n.ju(l.merge||l.mergeFields?2:0,e,t,a);rE("Data must be an object, but it was:",u,r);const d=DC(r,u);let m,p;if(l.merge)m=new zn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const w=xy(e,v,t);if(!u.contains(w))throw new re(Q.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);PC(y,w)||y.push(w)}m=new zn(y),p=u.fieldTransforms.filter(v=>m.covers(v.field))}else m=null,p=u.fieldTransforms;return new cL(new fn(d),m,p)}class rd extends ko{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rd}}function RC(n,e,t){return new rp({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xv extends ko{_toFieldTransform(e){return new Xh(e.path,new ou)}isEqual(e){return e instanceof Xv}}class Zv extends ko{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=RC(this,e,!0),r=this.Hu.map(l=>Lo(l,t)),a=new Io(r);return new Xh(e.path,a)}isEqual(e){return e instanceof Zv&&ra(this.Hu,e.Hu)}}class Jv extends ko{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=RC(this,e,!0),r=this.Hu.map(l=>Lo(l,t)),a=new Ao(r);return new Xh(e.path,a)}isEqual(e){return e instanceof Jv&&ra(this.Hu,e.Hu)}}class eE extends ko{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new lu(e.serializer,XS(e.serializer,this.Ju));return new Xh(e.path,t)}isEqual(e){return e instanceof eE&&this.Ju===e.Ju}}function tE(n,e,t,r){const a=n.ju(1,e,t);rE("Data must be an object, but it was:",a,r);const l=[],u=fn.empty();Ta(r,(m,p)=>{const y=iE(e,m,t);p=Se(p);const v=a.Ku(y);if(p instanceof rd)l.push(y);else{const w=Lo(p,v);w!=null&&(l.push(y),u.set(y,w))}});const d=new zn(l);return new AC(u,d,a.fieldTransforms)}function nE(n,e,t,r,a,l){const u=n.ju(1,e,t),d=[xy(e,r,t)],m=[a];if(l.length%2!=0)throw new re(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(xy(e,l[w])),m.push(l[w+1]);const p=[],y=fn.empty();for(let w=d.length-1;w>=0;--w)if(!PC(p,d[w])){const R=d[w];let N=m[w];N=Se(N);const M=u.Ku(R);if(N instanceof rd)p.push(R);else{const U=Lo(N,M);U!=null&&(p.push(R),y.set(R,U))}}const v=new zn(p);return new AC(y,v,u.fieldTransforms)}function CC(n,e,t,r=!1){return Lo(t,n.ju(r?4:3,e))}function Lo(n,e){if(xC(n=Se(n)))return rE("Unsupported field value:",e,n),DC(n,e);if(n instanceof ko)return function(r,a){if(!SC(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let u=0;for(const d of r){let m=Lo(d,a.Uu(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}}(n,e)}return function(r,a){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XS(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=gt.fromDate(r);return{timestampValue:uu(a.serializer,l)}}if(r instanceof gt){const l=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uu(a.serializer,l)}}if(r instanceof np)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oi)return{bytesValue:uR(a.serializer,r._byteString)};if(r instanceof Tt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Yv)return function(u,d){return{mapValue:{fields:{[cv]:{stringValue:hv},[iu]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return pv(d.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${tp(r)}`)}(n,e)}function DC(n,e){const t={};return SS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(n,(r,a)=>{const l=Lo(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function xC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof np||n instanceof oi||n instanceof Tt||n instanceof ko||n instanceof Yv)}function rE(n,e,t){if(!xC(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=tp(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function xy(n,e,t){if((e=Se(e))instanceof ma)return e._internalPath;if(typeof e=="string")return iE(n,e);throw xm("Field path arguments must be of type string or ",n,!1,void 0,t)}const dL=new RegExp("[~\\*/\\[\\]]");function iE(n,e,t){if(e.search(dL)>=0)throw xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ma(...e.split("."))._internalPath}catch{throw xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xm(n,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${a}`),m+=")"),new re(Q.INVALID_ARGUMENT,d+n+m)}function PC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fL extends kh{data(){return super.data()}}function sp(n,e){return typeof e=="string"?iE(n,e):e instanceof ma?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sE{}class id extends sE{}function Gs(n,e,...t){let r=[];e instanceof sE&&r.push(e),r=r.concat(t),function(l){const u=l.filter(m=>m instanceof aE).length,d=l.filter(m=>m instanceof ap).length;if(u>1||u>0&&d>0)throw new re(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)n=a._apply(n);return n}class ap extends id{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ap(e,t,r)}_apply(e){const t=this._parse(e);return VC(e._query,t),new On(e.firestore,e.converter,gy(e._query,t))}_parse(e){const t=Mo(e.firestore);return function(l,u,d,m,p,y,v){let w;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new re(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){O0(v,y);const N=[];for(const M of v)N.push(N0(m,l,M));w={arrayValue:{values:N}}}else w=N0(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||O0(v,y),w=CC(d,u,v,y==="in"||y==="not-in");return Fe.create(p,y,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mL(n,e,t){const r=e,a=sp("where",n);return ap._create(a,r,t)}class aE extends sE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new aE(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:nt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const d=l.getFlattenedFilters();for(const m of d)VC(u,m),u=gy(u,m)}(e._query,t),new On(e.firestore,e.converter,gy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class oE extends id{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oE(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xh(l,u)}(e._query,this._field,this._direction);return new On(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new Zi(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function pL(n,e="asc"){const t=e,r=sp("orderBy",n);return oE._create(r,t)}class op extends id{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new op(e,t,r)}_apply(e){return new On(e.firestore,e.converter,Em(e._query,this._limit,this._limitType))}}function gL(n){return pC("limit",n),op._create("limit",n,"F")}function _L(n){return pC("limitToLast",n),op._create("limitToLast",n,"L")}class lp extends id{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new lp(e,t,r)}_apply(e){const t=OC(e,this.type,this._docOrFields,this._inclusive);return new On(e.firestore,e.converter,function(a,l){return new Zi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function yL(...n){return lp._create("startAt",n,!0)}function vL(...n){return lp._create("startAfter",n,!1)}class up extends id{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new up(e,t,r)}_apply(e){const t=OC(e,this.type,this._docOrFields,this._inclusive);return new On(e.firestore,e.converter,function(a,l){return new Zi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function EL(...n){return up._create("endBefore",n,!1)}function TL(...n){return up._create("endAt",n,!0)}function OC(n,e,t,r){if(t[0]=Se(t[0]),t[0]instanceof kh)return function(l,u,d,m,p){if(!m)throw new re(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const y=[];for(const v of Hl(l))if(v.field.isKeyField())y.push(wo(u,m.key));else{const w=m.data.field(v.field);if(qm(w))throw new re(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const R=v.field.canonicalString();throw new re(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(w)}return new ha(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Mo(n.firestore);return function(u,d,m,p,y,v){const w=u.explicitOrderBy;if(y.length>w.length)throw new re(Q.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let N=0;N<y.length;N++){const M=y[N];if(w[N].field.isKeyField()){if(typeof M!="string")throw new re(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof M}`);if(!fv(u)&&M.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${M}' contains a slash.`);const U=u.path.child(Be.fromString(M));if(!ce.isDocumentKey(U))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const G=new ce(U);R.push(wo(d,G))}else{const U=CC(m,p,M);R.push(U)}}return new ha(R,v)}(n._query,n.firestore._databaseId,a,e,t,r)}}function N0(n,e,t){if(typeof(t=Se(t))=="string"){if(t==="")throw new re(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fv(e)&&t.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Be.fromString(t));if(!ce.isDocumentKey(r))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wo(n,new ce(r))}if(t instanceof Tt)return wo(n,t._key);throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tp(t)}.`)}function O0(n,e){if(!Array.isArray(n)||n.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VC(n,e){const t=function(a,l){for(const u of a)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lE{convertValue(e,t="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ta(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[iu].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(u=>dt(u.doubleValue));return new Yv(l)}convertGeoPoint(e){return new np(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Hm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rh(e));default:return null}}convertTimestamp(e){const t=$i(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Be.fromString(e);Ee(ER(r));const a=new la(r.get(1),r.get(3)),l=new ce(r.popFirst(5));return a.isEqual(t)||Vt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wL extends lE{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Wi=class extends kh{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},dh=class extends Wi{data(e={}){return super.data(e)}},pa=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new go(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dh(this._firestore,this._userDataWriter,r.key,r,new go(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(d=>{const m=new dh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new go(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new dh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new go(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:bL(d.type),doc:m,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function bL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}function kC(n,e){return n instanceof Wi&&e instanceof Wi?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pa&&e instanceof pa&&n._firestore===e._firestore&&wC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(n){n=Ze(n,Tt);const e=Ze(n.firestore,Mt);return hC(wn(e),n._key).then(t=>uE(e,n,t))}class Uo extends lE{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}function AL(n){n=Ze(n,Tt);const e=Ze(n.firestore,Mt),t=wn(e),r=new Uo(e);return K2(t,n._key).then(a=>new Wi(e,r,n._key,a,new go(a!==null&&a.hasLocalMutations,!0),n.converter))}function SL(n){n=Ze(n,Tt);const e=Ze(n.firestore,Mt);return hC(wn(e),n._key,{source:"server"}).then(t=>uE(e,n,t))}function RL(n){n=Ze(n,On);const e=Ze(n.firestore,Mt),t=wn(e),r=new Uo(e);return NC(n._query),dC(t,n._query).then(a=>new pa(e,r,n,a))}function CL(n){n=Ze(n,On);const e=Ze(n.firestore,Mt),t=wn(e),r=new Uo(e);return $2(t,n._query).then(a=>new pa(e,r,n,a))}function DL(n){n=Ze(n,On);const e=Ze(n.firestore,Mt),t=wn(e),r=new Uo(e);return dC(t,n._query,{source:"server"}).then(a=>new pa(e,r,n,a))}function V0(n,e,t){n=Ze(n,Tt);const r=Ze(n.firestore,Mt),a=cp(n.converter,e,t);return sd(r,[ip(Mo(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,pt.none())])}function k0(n,e,t,...r){n=Ze(n,Tt);const a=Ze(n.firestore,Mt),l=Mo(a);let u;return u=typeof(e=Se(e))=="string"||e instanceof ma?nE(l,"updateDoc",n._key,e,t,r):tE(l,"updateDoc",n._key,e),sd(a,[u.toMutation(n._key,pt.exists(!0))])}function xL(n){return sd(Ze(n.firestore,Mt),[new Cu(n._key,pt.none())])}function PL(n,e){const t=Ze(n.firestore,Mt),r=Dm(n),a=cp(n.converter,e);return sd(t,[ip(Mo(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,pt.exists(!1))]).then(()=>r)}function MC(n,...e){var t,r,a;n=Se(n);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Dy(e[u])||(l=e[u],u++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Dy(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let m,p,y;if(n instanceof Tt)p=Ze(n.firestore,Mt),y=Su(n._key.path),m={next:v=>{e[u]&&e[u](uE(p,n,v))},error:e[u+1],complete:e[u+2]};else{const v=Ze(n,On);p=Ze(v.firestore,Mt),y=v._query;const w=new Uo(p);m={next:R=>{e[u]&&e[u](new pa(p,w,v,R))},error:e[u+1],complete:e[u+2]},NC(n._query)}return function(w,R,N,M){const U=new Jm(M),G=new Bv(R,U,N);return w.asyncQueue.enqueueAndForget(async()=>Lv(await pu(w),G)),()=>{U.su(),w.asyncQueue.enqueueAndForget(async()=>Uv(await pu(w),G))}}(wn(p),y,d,m)}function NL(n,e){return Q2(wn(n=Ze(n,Mt)),Dy(e)?e:{next:e})}function sd(n,e){return function(r,a){const l=new mn;return r.asyncQueue.enqueueAndForget(async()=>T2(await Qv(r),a,l)),l.promise}(wn(n),e)}function uE(n,e,t){const r=t.docs.get(e._key),a=new Uo(n);return new Wi(n,a,e._key,r,new go(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VL=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mo(e)}set(e,t,r){this._verifyNotCommitted();const a=Ys(e,this._firestore),l=cp(a.converter,t,r),u=ip(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,pt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Ys(e,this._firestore);let u;return u=typeof(t=Se(t))=="string"||t instanceof ma?nE(this._dataReader,"WriteBatch.update",l._key,t,r,a):tE(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,pt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ys(e,this._firestore);return this._mutations=this._mutations.concat(new Cu(t._key,pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ys(n,e){if((n=Se(n)).firestore!==e)throw new re(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mo(e)}get(e){const t=Ys(e,this._firestore),r=new wL(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return ge();const l=a[0];if(l.isFoundDocument())return new kh(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new kh(this._firestore,r,t._key,null,t.converter);throw ge()})}set(e,t,r){const a=Ys(e,this._firestore),l=cp(a.converter,t,r),u=ip(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=Ys(e,this._firestore);let u;return u=typeof(t=Se(t))=="string"||t instanceof ma?nE(this._dataReader,"Transaction.update",l._key,t,r,a):tE(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Ys(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ML=class extends kL{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ys(e,this._firestore),r=new Uo(this._firestore);return super.get(e).then(a=>new Wi(this._firestore,r,t._key,a._document,new go(!1,!1),t.converter))}};function LL(n,e,t){n=Ze(n,Mt);const r=Object.assign(Object.assign({},OL),t);return function(l){if(l.maxAttempts<1)throw new re(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,u,d){const m=new mn;return l.asyncQueue.enqueueAndForget(async()=>{const p=await q2(l);new F2(l.asyncQueue,p,d,u,m).Iu()}),m.promise}(wn(n),a=>e(new ML(n,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(){return new rd("deleteField")}function zL(){return new Xv("serverTimestamp")}function BL(...n){return new Zv("arrayUnion",n)}function FL(...n){return new Jv("arrayRemove",n)}function jL(n){return new eE("increment",n)}(function(e,t=!0){(function(a){Au=a})(_a),aa(new ii("firestore",(r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),d=new Mt(new LV(r.getProvider("auth-internal")),new BV(u,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new re(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(p.options.projectId,y)}(u,a),u);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Ar(fI,mI,e),Ar(fI,mI,"esm2017")})();const qL="@firebase/firestore-compat",HL="0.3.44";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function L0(){if(!vk())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Mh{constructor(e){this._delegate=e}static fromBase64String(e){return L0(),new Mh(oi.fromBase64String(e))}static fromUint8Array(e){return M0(),new Mh(oi.fromUint8Array(e))}toBase64(){return L0(),this._delegate.toBase64()}toUint8Array(){return M0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(n){return GL(n,["next","error","complete"])}function GL(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{enableIndexedDbPersistence(e,t){return tL(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return nL(e._delegate)}clearIndexedDbPersistence(e){return rL(e._delegate)}}class LC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){X2(this._delegate,e,t,r)}enableNetwork(){return sL(this._delegate)}disableNetwork(){return aL(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iL(this._delegate)}onSnapshotsInSync(e){return NL(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gu(this,EC(this._delegate,e))}catch(t){throw xn(t,"collection()","Firestore.collection()")}}doc(e){try{return new pr(this,Dm(this._delegate,e))}catch(t){throw xn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Dn(this,Z2(this._delegate,e))}catch(t){throw xn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LL(this._delegate,t=>e(new UC(this,t)))}batch(){return wn(this._delegate),new zC(new VL(this._delegate,e=>sd(this._delegate,e)))}loadBundle(e){return oL(this._delegate,e)}namedQuery(e){return lL(this._delegate,e).then(t=>t?new Dn(this,t):null)}}class hp extends lE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mh(new oi(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pr.forKey(t,this.firestore,null)}}function $L(n){OV(n)}class UC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}get(e){const t=_o(e);return this._delegate.get(t).then(r=>new Lh(this._firestore,new Wi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=_o(e);return r?(cE("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=_o(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=_o(e);return this._delegate.delete(t),this}}class zC{constructor(e){this._delegate=e}set(e,t,r){const a=_o(e);return r?(cE("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=_o(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=_o(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new dh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Uh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new xo(e,new hp(e),t),a.set(t,l)),l}}xo.INSTANCES=new WeakMap;class pr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pr(t,new Tt(t._delegate,r,new ce(e)))}static forKey(e,t,r){return new pr(t,new Tt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gu(this.firestore,EC(this._delegate,e))}catch(t){throw xn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Se(e),e instanceof Tt?TC(this._delegate,e):!1}set(e,t){t=cE("DocumentReference.set",t);try{return t?V0(this._delegate,e,t):V0(this._delegate,e)}catch(r){throw xn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?k0(this._delegate,e):k0(this._delegate,e,t,...r)}catch(a){throw xn(a,"updateDoc()","DocumentReference.update()")}}delete(){return xL(this._delegate)}onSnapshot(...e){const t=BC(e),r=FC(e,a=>new Lh(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return MC(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=AL(this._delegate):(e==null?void 0:e.source)==="server"?t=SL(this._delegate):t=IL(this._delegate),t.then(r=>new Lh(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pr(this.firestore,e?this._delegate.withConverter(xo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function xn(n,e,t){return n.message=n.message.replace(e,t),n}function BC(n){for(const e of n)if(typeof e=="object"&&!Py(e))return e;return{}}function FC(n,e){var t,r;let a;return Py(n[0])?a=n[0]:Py(n[1])?a=n[1]:typeof n[0]=="function"?a={next:n[0],error:n[1],complete:n[2]}:a={next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class Lh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kC(this._delegate,e._delegate)}}class Uh extends Lh{data(e){const t=this._delegate.data(e);return this._delegate._converter||VV(t!==void 0),t}}class Dn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}where(e,t,r){try{return new Dn(this.firestore,Gs(this._delegate,mL(e,t,r)))}catch(a){throw xn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Dn(this.firestore,Gs(this._delegate,pL(e,t)))}catch(r){throw xn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Dn(this.firestore,Gs(this._delegate,gL(e)))}catch(t){throw xn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Dn(this.firestore,Gs(this._delegate,_L(e)))}catch(t){throw xn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Dn(this.firestore,Gs(this._delegate,yL(...e)))}catch(t){throw xn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Dn(this.firestore,Gs(this._delegate,vL(...e)))}catch(t){throw xn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Dn(this.firestore,Gs(this._delegate,EL(...e)))}catch(t){throw xn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Dn(this.firestore,Gs(this._delegate,TL(...e)))}catch(t){throw xn(t,"endAt()","Query.endAt()")}}isEqual(e){return wC(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=CL(this._delegate):(e==null?void 0:e.source)==="server"?t=DL(this._delegate):t=RL(this._delegate),t.then(r=>new Ny(this.firestore,new pa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=BC(e),r=FC(e,a=>new Ny(this.firestore,new pa(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return MC(this._delegate,t,r)}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(xo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class QL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Uh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ny{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Uh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Uh(this._firestore,r))})}isEqual(e){return kC(this._delegate,e._delegate)}}class gu extends Dn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pr(this.firestore,e):null}doc(e){try{return e===void 0?new pr(this.firestore,Dm(this._delegate)):new pr(this.firestore,Dm(this._delegate,e))}catch(t){throw xn(t,"doc()","CollectionReference.doc()")}}add(e){return PL(this._delegate,e).then(t=>new pr(this.firestore,t))}isEqual(e){return TC(this._delegate,e._delegate)}withConverter(e){return new gu(this.firestore,e?this._delegate.withConverter(xo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _o(n){return Ze(n,Tt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(...e){this._delegate=new ma(...e)}static documentId(){return new hE(mt.keyField().canonicalString())}isEqual(e){return e=Se(e),e instanceof ma?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static serverTimestamp(){const e=zL();return e._methodName="FieldValue.serverTimestamp",new mo(e)}static delete(){const e=UL();return e._methodName="FieldValue.delete",new mo(e)}static arrayUnion(...e){const t=BL(...e);return t._methodName="FieldValue.arrayUnion",new mo(t)}static arrayRemove(...e){const t=FL(...e);return t._methodName="FieldValue.arrayRemove",new mo(t)}static increment(e){const t=jL(e);return t._methodName="FieldValue.increment",new mo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL={Firestore:LC,GeoPoint:np,Timestamp:gt,Blob:Mh,Transaction:UC,WriteBatch:zC,DocumentReference:pr,DocumentSnapshot:Lh,Query:Dn,QueryDocumentSnapshot:Uh,QuerySnapshot:Ny,CollectionReference:gu,FieldPath:hE,FieldValue:mo,setLogLevel:$L,CACHE_SIZE_UNLIMITED:eL};function YL(n,e){n.INTERNAL.registerComponent(new ii("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},WL)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(n){YL(n,(e,t)=>new LC(e,t,new KL)),n.registerVersion(qL,HL)}XL(ya);function dE(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}const Yc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ll={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function jC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JL=ZL,eU=jC,qC=new Vo("auth","Firebase",jC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Um("@firebase/auth");function tU(n,...e){Pm.logLevel<=Ue.WARN&&Pm.warn(`Auth (${_a}): ${n}`,...e)}function im(n,...e){Pm.logLevel<=Ue.ERROR&&Pm.error(`Auth (${_a}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n,...e){throw mE(n,...e)}function Qt(n,...e){return mE(n,...e)}function fE(n,e,t){const r=Object.assign(Object.assign({},eU()),{[e]:t});return new Vo("auth","Firebase",r).create(e,{appName:n.name})}function on(n){return fE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ou(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&pn(n,"argument-error"),fE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mE(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qC.create(n,...e)}function oe(n,e,...t){if(!n)throw mE(e,...t)}function ti(n){const e="INTERNAL ASSERTION FAILED: "+n;throw im(e),new Error(e)}function Rr(n,e){n||ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pE(){return U0()==="http:"||U0()==="https:"}function U0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pE()||zA()||"connection"in navigator)?navigator.onLine:!0}function rU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rr(t>e,"Short delay should be less than long delay!"),this.isMobile=tO()||Zy()}get(){return nU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n,e){Rr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=new ad(3e4,6e4);function xt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Pt(n,e,t,r,a={}){return GC(n,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const d=Iu(Object.assign({key:n.config.apiKey},u)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},l);return rO()||(p.referrerPolicy="no-referrer"),HC.fetch()(KC(n,n.config.apiHost,t,d),p)})}async function GC(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},iU),e);try{const a=new oU(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw sh(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw sh(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw sh(n,"user-disabled",u);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw fE(n,y,p);pn(n,y)}}catch(a){if(a instanceof Pn)throw a;pn(n,"network-request-failed",{message:String(a)})}}async function ns(n,e,t,r,a={}){const l=await Pt(n,e,t,r,a);return"mfaPendingCredential"in l&&pn(n,"multi-factor-auth-required",{_serverResponse:l}),l}function KC(n,e,t,r){const a=`${e}${t}?${r}`;return n.config.emulator?gE(n.config,a):`${n.config.apiScheme}://${a}`}function aU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qt(this.auth,"network-request-failed")),sU.get())})}}function sh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Qt(n,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n){return n!==void 0&&n.getResponse!==void 0}function B0(n){return n!==void 0&&n.enterprise!==void 0}class $C{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(n){return(await Pt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function QC(n,e){return Pt(n,"GET","/v2/recaptchaConfig",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(n,e){return Pt(n,"POST","/v1/accounts:delete",e)}async function cU(n,e){return Pt(n,"POST","/v1/accounts:update",e)}async function WC(n,e){return Pt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hU(n,e=!1){const t=Se(n),r=await t.getIdToken(e),a=dp(r);oe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:fh(j_(a.auth_time)),issuedAtTime:fh(j_(a.iat)),expirationTime:fh(j_(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function j_(n){return Number(n)*1e3}function dp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return im("JWT malformed, contained fewer than 3 sections"),null;try{const a=Wy(t);return a?JSON.parse(a):(im("Failed to decode base64 JWT payload"),null)}catch(a){return im("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function F0(n){const e=dp(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pn&&dU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function dU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fh(this.lastLoginAt),this.creationTime=fh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(n){var e;const t=n.auth,r=await n.getIdToken(),a=await Yi(n,WC(t,{idToken:r}));oe(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?YC(l.providerUserInfo):[],d=pU(n.providerData,u),m=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),y=m?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Oy(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function mU(n){const e=Se(n);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pU(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function YC(n){return n.map(e=>{var{providerId:t}=e,r=dE(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU(n,e){const t=await GC(n,{},async()=>{const r=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=KC(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",HC.fetch()(u,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _U(n,e){return Pt(n,"POST","/v2/accounts:revokeToken",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const t=F0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await gU(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Kl;return r&&(oe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(oe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(oe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zi{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=dE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Oy(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Yi(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hU(this,e)}reload(){return mU(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ft(this.auth.app))return Promise.reject(on(this.auth));const e=await this.getIdToken();return await Yi(this,uU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,u,d,m,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(a=t.email)!==null&&a!==void 0?a:void 0,R=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(d=t.tenantId)!==null&&d!==void 0?d:void 0,U=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,G=(p=t.createdAt)!==null&&p!==void 0?p:void 0,J=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Y,emailVerified:de,isAnonymous:le,providerData:te,stsTokenManager:C}=t;oe(Y&&C,e,"internal-error");const S=Kl.fromJSON(this.name,C);oe(typeof Y=="string",e,"internal-error"),Ks(v,e.name),Ks(w,e.name),oe(typeof de=="boolean",e,"internal-error"),oe(typeof le=="boolean",e,"internal-error"),Ks(R,e.name),Ks(N,e.name),Ks(M,e.name),Ks(U,e.name),Ks(G,e.name),Ks(J,e.name);const A=new zi({uid:Y,auth:e,email:w,emailVerified:de,displayName:v,isAnonymous:le,photoURL:N,phoneNumber:R,tenantId:M,stsTokenManager:S,createdAt:G,lastLoginAt:J});return te&&Array.isArray(te)&&(A.providerData=te.map(x=>Object.assign({},x))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,t,r=!1){const a=new Kl;a.updateFromServerResponse(t);const l=new zi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Bh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?YC(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Kl;d.updateFromIdToken(r);const m=new zi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Oy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;function Yn(n){Rr(n instanceof Function,"Expected a class definition");let e=j0.get(n);return e?(Rr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,j0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}XC.type="NONE";const _u=XC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(n,e,t){return`firebase:${n}:${e}:${t}`}class $l{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Eo(this.userKey,a.apiKey,l),this.fullPersistenceKey=Eo("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new $l(Yn(_u),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Yn(_u);const u=Eo(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const y=await p._get(u);if(y){const v=zi._fromJSON(e,y);p!==l&&(d=v),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new $l(l,e,r):(l=m[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new $l(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nD(e))return"Blackberry";if(rD(e))return"Webos";if(JC(e))return"Safari";if((e.includes("chrome/")||eD(e))&&!e.includes("edge/"))return"Chrome";if(od(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZC(n=wt()){return/firefox\//i.test(n)}function JC(n=wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eD(n=wt()){return/crios\//i.test(n)}function tD(n=wt()){return/iemobile/i.test(n)}function od(n=wt()){return/android/i.test(n)}function nD(n=wt()){return/blackberry/i.test(n)}function rD(n=wt()){return/webos/i.test(n)}function ld(n=wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yU(n=wt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function vU(n=wt()){var e;return ld(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EU(){return BA()&&document.documentMode===10}function iD(n=wt()){return ld(n)||od(n)||rD(n)||nD(n)||/windows phone/i.test(n)||tD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n,e=[]){let t;switch(n){case"Browser":t=q0(wt());break;case"Worker":t=`${q0(wt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,d)=>{try{const m=e(l);u(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(n,e={}){return Pt(n,"GET","/v2/passwordPolicy",xt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=6;class IU{constructor(e){var t,r,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:bU,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,u,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H0(this),this.idTokenSubscription=new H0(this),this.beforeStateQueue=new TU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yn(t)),this._initializationPromise=this.queue(async()=>{var r,a;if(!this._deleted&&(this.persistenceManager=await $l.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await WC(this,{idToken:e}),r=await zi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ft(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ft(this.app))return Promise.reject(on(this));const t=e?Se(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ft(this.app)?Promise.reject(on(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ft(this.app)?Promise.reject(on(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wU(this),t=new IU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await _U(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yn(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=await $l.create(this,[Yn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&tU(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function bt(n){return Se(n)}class H0{constructor(e){this.auth=e,this.observer=null,this.addObserver=jA(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SU(n){ud=n}function _E(n){return ud.loadJS(n)}function RU(){return ud.recaptchaV2Script}function CU(){return ud.recaptchaEnterpriseScript}function DU(){return ud.gapiScript}function aD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=500,PU=6e4,Hf=1e12;class NU{constructor(e){this.auth=e,this.counter=Hf,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new kU(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Hf;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Hf;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Hf;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class OU{constructor(){this.enterprise=new VU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class VU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class kU{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;oe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=MU(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},PU)},xU))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function MU(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const LU="recaptcha-enterprise",mh="NO_RECAPTCHA";class oD{constructor(e){this.type=LU,this.auth=bt(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{QC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new $C(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(m=>{d(m)})})}function a(l,u,d){const m=window.grecaptcha;B0(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(mh)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OU().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(d=>{if(!t&&B0(window.grecaptcha))a(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=CU();m.length!==0&&(m+=d),_E(m).then(()=>{a(d,l,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function Xc(n,e,t,r=!1,a=!1){const l=new oD(n);let u;if(a)u=mh;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function na(n,e,t,r,a){var l,u;if(a==="EMAIL_PASSWORD_PROVIDER")if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Xc(n,e,t,t==="getOobCode");return r(n,d)}else return r(n,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Xc(n,e,t,t==="getOobCode");return r(n,m)}else return Promise.reject(d)});else if(a==="PHONE_PROVIDER")if(!((u=n._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("PHONE_PROVIDER")){const d=await Xc(n,e,t);return r(n,d).catch(async m=>{var p;if(((p=n._getRecaptchaConfig())===null||p===void 0?void 0:p.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const y=await Xc(n,e,t,!1,!0);return r(n,y)}return Promise.reject(m)})}else{const d=await Xc(n,e,t,!1,!0);return r(n,d)}else return Promise.reject(a+" provider is not supported.")}async function UU(n){const e=bt(n),t=await QC(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new $C(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new oD(e).verify()}function zU(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Yn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BU(n,e,t){const r=bt(n);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=lD(e),{host:u,port:d}=FU(e),m=d===null?"":`:${d}`,p={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(ra(p,r.config.emulator)&&ra(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,a||jU()}function lD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FU(n){const e=lD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:G0(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:G0(u)}}}function G0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,t){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(n,e){return Pt(n,"POST","/v1/accounts:resetPassword",xt(n,e))}async function qU(n,e){return Pt(n,"POST","/v1/accounts:update",e)}async function HU(n,e){return Pt(n,"POST","/v1/accounts:signUp",e)}async function GU(n,e){return Pt(n,"POST","/v1/accounts:update",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(n,e){return ns(n,"POST","/v1/accounts:signInWithPassword",xt(n,e))}async function fp(n,e){return Pt(n,"POST","/v1/accounts:sendOobCode",xt(n,e))}async function $U(n,e){return fp(n,e)}async function QU(n,e){return fp(n,e)}async function WU(n,e){return fp(n,e)}async function YU(n,e){return fp(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(n,e){return ns(n,"POST","/v1/accounts:signInWithEmailLink",xt(n,e))}async function ZU(n,e){return ns(n,"POST","/v1/accounts:signInWithEmailLink",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends Vu{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Fh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Fh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return na(e,t,"signInWithPassword",KU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XU(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return na(e,r,"signUpPassword",HU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZU(e,{idToken:t,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(n,e){return ns(n,"POST","/v1/accounts:signInWithIdp",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU="http://localhost";class li extends Vu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=dE(t,["providerId","signInMethod"]);if(!r||!a)return null;const u=new li(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return qi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,qi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qi(e,t)}buildRequest(){const e={requestUri:JU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Iu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(n,e){return Pt(n,"POST","/v1/accounts:sendVerificationCode",xt(n,e))}async function e4(n,e){return ns(n,"POST","/v1/accounts:signInWithPhoneNumber",xt(n,e))}async function t4(n,e){const t=await ns(n,"POST","/v1/accounts:signInWithPhoneNumber",xt(n,e));if(t.temporaryProof)throw sh(n,"account-exists-with-different-credential",t);return t}const n4={USER_NOT_FOUND:"user-not-found"};async function r4(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ns(n,"POST","/v1/accounts:signInWithPhoneNumber",xt(n,t),n4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Vu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new To({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new To({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return e4(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return t4(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return r4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new To({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s4(n){const e=ql(eh(n)).link,t=e?ql(eh(e)).deep_link_id:null,r=ql(eh(n)).deep_link_id;return(r?ql(eh(r)).link:null)||r||t||e||n}class mp{constructor(e){var t,r,a,l,u,d;const m=ql(eh(e)),p=(t=m.apiKey)!==null&&t!==void 0?t:null,y=(r=m.oobCode)!==null&&r!==void 0?r:null,v=i4((a=m.mode)!==null&&a!==void 0?a:null);oe(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=m.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=s4(e);try{return new mp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(e,t){return Fh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=mp.parseLink(t);return oe(r,"argument-error"),Fh._fromEmailAndCode(e,r.code,r.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends rs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ql extends ku{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return oe("providerId"in t&&"signInMethod"in t,"argument-error"),li._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return oe(e.idToken||e.accessToken,"argument-error"),li._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ql.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ql.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:d}=e;if(!r&&!a&&!t&&!l||!d)return null;try{return new Ql(d)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends ku{constructor(){super("facebook.com")}static credential(e){return li._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return li._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Yr.credential(t,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends ku{constructor(){super("github.com")}static credential(e){return li._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="http://localhost";class yu extends Vu{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return qi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,qi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new yu(r,l)}static _create(e,t){return new yu(e,t)}buildRequest(){return{requestUri:a4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="saml.";class Nm extends rs{constructor(e){oe(e.startsWith(o4),"argument-error"),super(e)}static credentialFromResult(e){return Nm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Nm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=yu.fromJSON(e);return oe(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return yu._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends ku{constructor(){super("twitter.com")}static credential(e,t){return li._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zr.credential(t,r)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(n,e){return ns(n,"POST","/v1/accounts:signUp",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await zi._fromIdTokenResponse(e,r,a),u=$0(r);return new _r({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=$0(r);return new _r({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function $0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(n){var e;if(ft(n.app))return Promise.reject(on(n));const t=bt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new _r({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await cD(t,{returnSecureToken:!0}),a=await _r._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends Pn{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Om.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Om(e,t,r,a)}}function hD(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Om._fromErrorAndOperation(n,l,e,r):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(n,e){const t=Se(n);await pp(!0,t,e);const{providerUserInfo:r}=await cU(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=dD(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function yE(n,e,t=!1){const r=await Yi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _r._forOperation(n,"link",r)}async function pp(n,e,t){await Bh(e);const r=dD(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";oe(r.has(t)===n,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(n,e,t=!1){const{auth:r}=n;if(ft(r.app))return Promise.reject(on(r));const a="reauthenticate";try{const l=await Yi(n,hD(r,a,e,n),t);oe(l.idToken,r,"internal-error");const u=dp(l.idToken);oe(u,r,"internal-error");const{sub:d}=u;return oe(n.uid===d,r,"user-mismatch"),_r._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&pn(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(n,e,t=!1){if(ft(n.app))return Promise.reject(on(n));const r="signIn",a=await hD(n,r,e),l=await _r._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function gp(n,e){return mD(bt(n),e)}async function pD(n,e){const t=Se(n);return await pp(!1,t,e.providerId),yE(t,e)}async function gD(n,e){return fD(Se(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(n,e){return ns(n,"POST","/v1/accounts:signInWithCustomToken",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(n,e){if(ft(n.app))return Promise.reject(on(n));const t=bt(n),r=await c4(t,{token:e,returnSecureToken:!0}),a=await _r._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?vE._fromServerResponse(e,t):"totpInfo"in t?EE._fromServerResponse(e,t):pn(e,"internal-error")}}class vE extends cd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new vE(t)}}class EE extends cd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new EE(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(n,e,t){var r;oe(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),oe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),oe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(oe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(oe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(n){const e=bt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function d4(n,e,t){const r=bt(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&_p(r,a,t),await na(r,a,"getOobCode",QU,"EMAIL_PASSWORD_PROVIDER")}async function f4(n,e,t){await uD(Se(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TE(n),r})}async function m4(n,e){await GU(Se(n),{oobCode:e})}async function _D(n,e){const t=Se(n),r=await uD(t,{oobCode:e}),a=r.requestType;switch(oe(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(r.mfaInfo,t,"internal-error");default:oe(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=cd._fromServerResponse(bt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function p4(n,e){const{data:t}=await _D(Se(n),e);return t.email}async function g4(n,e,t){if(ft(n.app))return Promise.reject(on(n));const r=bt(n),u=await na(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cD,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&TE(n),m}),d=await _r._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function _4(n,e,t){return ft(n.app)?Promise.reject(on(n)):gp(Se(n),Ia.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(n,e,t){const r=bt(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,d){oe(d.handleCodeInApp,r,"argument-error"),d&&_p(r,u,d)}l(a,t),await na(r,a,"getOobCode",WU,"EMAIL_PASSWORD_PROVIDER")}function v4(n,e){const t=mp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function E4(n,e,t){if(ft(n.app))return Promise.reject(on(n));const r=Se(n),a=Ia.credentialWithLink(e,t||zh());return oe(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),gp(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n,e){return Pt(n,"POST","/v1/accounts:createAuthUri",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(n,e){const t=pE()?zh():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await T4(Se(n),r);return a||[]}async function b4(n,e){const t=Se(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&_p(t.auth,a,e);const{email:l}=await $U(t.auth,a);l!==n.email&&await n.reload()}async function I4(n,e,t){const r=Se(n),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&_p(r.auth,l,t);const{email:u}=await YU(r.auth,l);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(n,e){return Pt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Se(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Yi(r,A4(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const d=r.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function R4(n,e){const t=Se(n);return ft(t.auth.app)?Promise.reject(on(t.auth)):yD(t,e,null)}function C4(n,e){return yD(Se(n),null,e)}async function yD(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await Yi(n,qU(r,l));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(n){var e,t;if(!n)return null;const{providerId:r}=n,a=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},l=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const u=(t=(e=dp(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(u){const d=u!=="anonymous"&&u!=="custom"?u:null;return new Wl(l,d)}}if(!r)return null;switch(r){case"facebook.com":return new x4(l,a);case"github.com":return new P4(l,a);case"google.com":return new N4(l,a);case"twitter.com":return new O4(l,a,n.screenName||null);case"custom":case"anonymous":return new Wl(l,null);default:return new Wl(l,r,a)}}class Wl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class vD extends Wl{constructor(e,t,r,a){super(e,t,r),this.username=a}}class x4 extends Wl{constructor(e,t){super(e,"facebook.com",t)}}class P4 extends vD{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class N4 extends Wl{constructor(e,t){super(e,"google.com",t)}}class O4 extends vD{constructor(e,t,r){super(e,"twitter.com",t,r)}}function V4(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:D4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new yo("enroll",e,t)}static _fromMfaPendingCredential(e){return new yo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return yo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return yo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=bt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(d=>cd._fromServerResponse(r,d));oe(a.mfaPendingCredential,r,"internal-error");const u=yo._fromMfaPendingCredential(a.mfaPendingCredential);return new wE(u,l,async d=>{const m=await d._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const p=Object.assign(Object.assign({},a),{idToken:m.idToken,refreshToken:m.refreshToken});switch(t.operationType){case"signIn":const y=await _r._fromIdTokenResponse(r,t.operationType,p);return await r._updateCurrentUser(y.user),y;case"reauthenticate":return oe(t.user,r,"internal-error"),_r._forOperation(t.user,t.operationType,p);default:pn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function k4(n,e){var t;const r=Se(n),a=e;return oe(e.customData.operationType,r,"argument-error"),oe((t=a.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),wE._fromError(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:start",xt(n,e))}function M4(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:finalize",xt(n,e))}function L4(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(n,e))}class bE{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>cd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new bE(e)}async getSession(){return yo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await Yi(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await Yi(this.user,L4(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const q_=new WeakMap;function U4(n){const e=Se(n);return q_.has(e)||q_.set(e,bE._fromUser(e)),q_.get(e)}const Vm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vm,"1"),this.storage.removeItem(Vm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=1e3,B4=10;class TD extends ED{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);EU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,B4):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}TD.type="LOCAL";const IE=TD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD extends ED{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wD.type="SESSION";const Po=wD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new yp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(u).map(async p=>p(t.origin,l)),m=await F4(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((d,m)=>{const p=hd("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(w.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return window}function q4(n){Ft().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){return typeof Ft().WorkerGlobalScope<"u"&&typeof Ft().importScripts=="function"}async function H4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function K4(){return AE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebaseLocalStorageDb",$4=1,km="firebaseLocalStorage",ID="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vp(n,e){return n.transaction([km],e?"readwrite":"readonly").objectStore(km)}function Q4(){const n=indexedDB.deleteDatabase(bD);return new dd(n).toPromise()}function Vy(){const n=indexedDB.open(bD,$4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(km,{keyPath:ID})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(km)?e(r):(r.close(),await Q4(),e(await Vy()))})})}async function W0(n,e,t){const r=vp(n,!0).put({[ID]:e,value:t});return new dd(r).toPromise()}async function W4(n,e){const t=vp(n,!1).get(e),r=await new dd(t).toPromise();return r===void 0?null:r.value}function Y0(n,e){const t=vp(n,!0).delete(e);return new dd(t).toPromise()}const Y4=800,X4=3;class AD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>X4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yp._getInstance(K4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await H4(),!this.activeServiceWorker)return;this.sender=new j4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vy();return await W0(e,Vm,"1"),await Y0(e,Vm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>W0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>W4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Y0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=vp(a,!1).getAll();return new dd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AD.type="LOCAL";const jh=AD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n,e){return Pt(n,"POST","/v2/accounts/mfaSignIn:start",xt(n,e))}function Z4(n,e){return Pt(n,"POST","/v2/accounts/mfaSignIn:finalize",xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=aD("rcb"),J4=new ad(3e4,6e4);class ez{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ft().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return oe(tz(t),e,"argument-error"),this.shouldResolveImmediately(t)&&z0(Ft().grecaptcha)?Promise.resolve(Ft().grecaptcha):new Promise((r,a)=>{const l=Ft().setTimeout(()=>{a(Qt(e,"network-request-failed"))},J4.get());Ft()[H_]=()=>{Ft().clearTimeout(l),delete Ft()[H_];const d=Ft().grecaptcha;if(!d||!z0(d)){a(Qt(e,"internal-error"));return}const m=d.render;d.render=(p,y)=>{const v=m(p,y);return this.counter++,v},this.hostLanguage=t,r(d)};const u=`${RU()}?${Iu({onload:H_,render:"explicit",hl:t})}`;_E(u).catch(()=>{clearTimeout(l),a(Qt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Ft().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function tz(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class nz{async load(e){return new NU(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="recaptcha",rz={theme:"light",type:"image"};let iz=class{constructor(e,t,r=Object.assign({},rz)){this.parameters=r,this.type=ph,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(e),this.isInvisible=this.parameters.size==="invisible",oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;oe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nz:new ez,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ft()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(pE()&&!AE(),this.auth,"internal-error"),await sz(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await lU(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function sz(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=To._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function az(n,e,t){if(ft(n.app))return Promise.reject(on(n));const r=bt(n),a=await Ep(r,e,Se(t));return new SE(a,l=>gp(r,l))}async function oz(n,e,t){const r=Se(n);await pp(!1,r,"phone");const a=await Ep(r.auth,e,Se(t));return new SE(a,l=>pD(r,l))}async function lz(n,e,t){const r=Se(n);if(ft(r.auth.app))return Promise.reject(on(r.auth));const a=await Ep(r.auth,e,Se(t));return new SE(a,l=>gD(r,l))}async function Ep(n,e,t){var r;if(!n._getRecaptchaConfig())try{await UU(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a){oe(l.type==="enroll",n,"internal-error");const u={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await na(n,u,"mfaSmsEnrollment",async(y,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===mh){oe((t==null?void 0:t.type)===ph,y,"argument-error");const w=await G_(y,v,t);return Q0(y,w)}return Q0(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{oe(l.type==="signin",n,"internal-error");const u=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;oe(u,n,"missing-multi-factor-info");const d={mfaPendingCredential:l.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await na(n,d,"mfaSmsSignIn",async(v,w)=>{if(w.phoneSignInInfo.captchaResponse===mh){oe((t==null?void 0:t.type)===ph,v,"argument-error");const R=await G_(v,w,t);return X0(v,R)}return X0(v,w)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await na(n,l,"sendVerificationCode",async(p,y)=>{if(y.captchaResponse===mh){oe((t==null?void 0:t.type)===ph,p,"argument-error");const v=await G_(p,y,t);return K0(p,v)}return K0(p,y)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).sessionInfo}}finally{t==null||t._reset()}}async function uz(n,e){const t=Se(n);if(ft(t.auth.app))return Promise.reject(on(t.auth));await yE(t,e)}async function G_(n,e,t){oe(t.type===ph,n,"argument-error");const r=await t.verify();oe(typeof r=="string",n,"argument-error");const a=Object.assign({},e);if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:u,clientType:d,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:r}),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No=class sm{constructor(e){this.providerId=sm.PROVIDER_ID,this.auth=bt(e)}verifyPhoneNumber(e,t){return Ep(this.auth,e,Se(t))}static credential(e,t){return To._fromVerification(e,t)}static credentialFromResult(e){const t=e;return sm.credentialFromTaggedObject(t)}static credentialFromError(e){return sm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?To._fromTokenResponse(t,r):null}};No.PROVIDER_ID="phone";No.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(n,e){return e?Yn(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends Vu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cz(n){return mD(n.auth,new RE(n),n.bypassAuthState)}function hz(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),fD(t,new RE(n),n.bypassAuthState)}async function dz(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),yE(t,new RE(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cz;case"linkViaPopup":case"linkViaRedirect":return dz;case"reauthViaPopup":case"reauthViaRedirect":return hz;default:pn(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=new ad(2e3,1e4);async function mz(n,e,t){if(ft(n.app))return Promise.reject(Qt(n,"operation-not-supported-in-this-environment"));const r=bt(n);Ou(n,e,rs);const a=zo(r,t);return new Bi(r,"signInViaPopup",e,a).executeNotNull()}async function pz(n,e,t){const r=Se(n);if(ft(r.auth.app))return Promise.reject(Qt(r.auth,"operation-not-supported-in-this-environment"));Ou(r.auth,e,rs);const a=zo(r.auth,t);return new Bi(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function gz(n,e,t){const r=Se(n);Ou(r.auth,e,rs);const a=zo(r.auth,t);return new Bi(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class Bi extends SD{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Bi.currentPopupAction&&Bi.currentPopupAction.cancel(),Bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=hd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fz.get())};e()}}Bi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z="pendingRedirect",gh=new Map;class yz extends SD{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const r=await vz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vz(n,e){const t=CD(e),r=RD(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function CE(n,e){return RD(n)._set(CD(e),"true")}function Ez(){gh.clear()}function DE(n,e){gh.set(n._key(),e)}function RD(n){return Yn(n._redirectPersistence)}function CD(n){return Eo(_z,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tz(n,e,t){return wz(n,e,t)}async function wz(n,e,t){if(ft(n.app))return Promise.reject(on(n));const r=bt(n);Ou(n,e,rs),await r._initializationPromise;const a=zo(r,t);return await CE(a,r),a._openRedirect(r,e,"signInViaRedirect")}function bz(n,e,t){return Iz(n,e,t)}async function Iz(n,e,t){const r=Se(n);if(Ou(r.auth,e,rs),ft(r.auth.app))return Promise.reject(on(r.auth));await r.auth._initializationPromise;const a=zo(r.auth,t);await CE(a,r.auth);const l=await DD(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function Az(n,e,t){return Sz(n,e,t)}async function Sz(n,e,t){const r=Se(n);Ou(r.auth,e,rs),await r.auth._initializationPromise;const a=zo(r.auth,t);await pp(!1,r,e.providerId),await CE(a,r.auth);const l=await DD(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function Rz(n,e){return await bt(n)._initializationPromise,Tp(n,e,!1)}async function Tp(n,e,t=!1){if(ft(n.app))return Promise.reject(on(n));const r=bt(n),a=zo(r,e),u=await new yz(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function DD(n){const e=hd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=10*60*1e3;class xD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!PD(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qt(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Cz&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PD({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Dz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PD(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(n,e={}){return Pt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pz=/^https?/;async function Nz(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ND(n);for(const t of e)try{if(Oz(t))return}catch{}pn(n,"unauthorized-domain")}function Oz(n){const e=zh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!Pz.test(t))return!1;if(xz.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=new ad(3e4,6e4);function J0(){const n=Ft().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kz(n){return new Promise((e,t)=>{var r,a,l;function u(){J0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J0(),t(Qt(n,"network-request-failed"))},timeout:Vz.get()})}if(!((a=(r=Ft().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Ft().gapi)===null||l===void 0)&&l.load)u();else{const d=aD("iframefcb");return Ft()[d]=()=>{gapi.load?u():t(Qt(n,"network-request-failed"))},_E(`${DU()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw am=null,e})}let am=null;function Mz(n){return am=am||kz(n),am}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=new ad(5e3,15e3),Uz="__/auth/iframe",zz="emulator/auth/iframe",Bz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jz(n){const e=n.config;oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gE(e,zz):`https://${n.config.authDomain}/${Uz}`,r={apiKey:e.apiKey,appName:n.name,v:_a},a=Fz.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Iu(r).slice(1)}`}async function qz(n){const e=await Mz(n),t=Ft().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:jz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bz,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Qt(n,"network-request-failed"),d=Ft().setTimeout(()=>{l(u)},Lz.get());function m(){Ft().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gz=500,Kz=600,$z="_blank",Qz="http://localhost";class eA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wz(n,e,t,r=Gz,a=Kz){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m=Object.assign(Object.assign({},Hz),{width:r.toString(),height:a.toString(),top:l,left:u}),p=wt().toLowerCase();t&&(d=eD(p)?$z:t),ZC(p)&&(e=e||Qz,m.scrollbars="yes");const y=Object.entries(m).reduce((w,[R,N])=>`${w}${R}=${N},`,"");if(vU(p)&&d!=="_self")return Yz(e||"",d),new eA(null);const v=window.open(e||"",d,y);oe(v,n,"popup-blocked");try{v.focus()}catch{}return new eA(v)}function Yz(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz="__/auth/handler",Zz="emulator/auth/handler",Jz=encodeURIComponent("fac");async function ky(n,e,t,r,a,l){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_a,eventId:a};if(e instanceof rs){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",lO(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries(l||{}))u[y]=v}if(e instanceof ku){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),p=m?`#${Jz}=${encodeURIComponent(m)}`:"";return`${eB(n)}?${Iu(d).slice(1)}${p}`}function eB({config:n}){return n.emulator?gE(n,Zz):`https://${n.authDomain}/${Xz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="webStorageSupport";class tB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Po,this._completeRedirectFn=Tp,this._overrideRedirectResult=DE}async _openPopup(e,t,r,a){var l;Rr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await ky(e,t,r,zh(),a);return Wz(e,u,hd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await ky(e,t,r,zh(),a);return q4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Rr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await qz(e),r=new xD(e);return t.register("authEvent",a=>(oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(K_,{type:K_},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[K_];u!==void 0&&t(!!u),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iD()||JC()||ld()}}const nB=tB;class rB{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return ti("unexpected MultiFactorSessionType")}}}class xE extends rB{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new xE(e)}_finalizeEnroll(e,t,r){return M4(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Z4(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class OD{constructor(){}static assertion(e){return xE._fromCredential(e)}}OD.FACTOR_ID="phone";var tA="@firebase/auth",nA="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aB(n){aa(new ii("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;oe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sD(n)},p=new AU(r,a,l,m);return zU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),aa(new ii("auth-internal",e=>{const t=bt(e.getProvider("auth").getImmediate());return(r=>new iB(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(tA,nA,sB(n)),Ar(tA,nA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=5*60;Z1("authIdTokenMaxAge");function lB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}SU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Qt("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",lB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aB("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=2e3;async function cB(n,e,t){var r;const{BuildInfo:a}=Oo();Rr(e.sessionId,"AuthEvent did not contain a session ID");const l=await pB(e.sessionId),u={};return ld()?u.ibi=a.packageName:od()?u.apn=a.packageName:pn(n,"operation-not-supported-in-this-environment"),a.displayName&&(u.appDisplayName=a.displayName),u.sessionId=l,ky(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,u)}async function hB(n){const{BuildInfo:e}=Oo(),t={};ld()?t.iosBundleId=e.packageName:od()?t.androidPackageName=e.packageName:pn(n,"operation-not-supported-in-this-environment"),await ND(n,t)}function dB(n){const{cordova:e}=Oo();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,yU()?"_blank":"_system","location=yes"),t(a)})})}async function fB(n,e,t){const{cordova:r}=Oo();let a=()=>{};try{await new Promise((l,u)=>{let d=null;function m(){var v;l();const w=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof w=="function"&&w(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function p(){d||(d=window.setTimeout(()=>{u(Qt(n,"redirect-cancelled-by-user"))},uB))}function y(){(document==null?void 0:document.visibilityState)==="visible"&&p()}e.addPassiveListener(m),document.addEventListener("resume",p,!1),od()&&document.addEventListener("visibilitychange",y,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",p,!1),document.removeEventListener("visibilitychange",y,!1),d&&window.clearTimeout(d)}})}finally{a()}}function mB(n){var e,t,r,a,l,u,d,m,p,y;const v=Oo();oe(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof((t=v==null?void 0:v.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe(typeof((l=(a=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((m=(d=(u=v==null?void 0:v.cordova)===null||u===void 0?void 0:u.plugins)===null||d===void 0?void 0:d.browsertab)===null||m===void 0?void 0:m.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((y=(p=v==null?void 0:v.cordova)===null||p===void 0?void 0:p.InAppBrowser)===null||y===void 0?void 0:y.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function pB(n){const e=gB(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function gB(n){if(Rr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=20;class yB extends xD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function vB(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:wB(),postBody:null,tenantId:n.tenantId,error:Qt(n,"no-auth-event")}}function EB(n,e){return My()._set(Ly(n),e)}async function rA(n){const e=await My()._get(Ly(n));return e&&await My()._remove(Ly(n)),e}function TB(n,e){var t,r;const a=IB(e);if(a.includes("/__/auth/callback")){const l=om(a),u=l.firebaseError?bB(decodeURIComponent(l.firebaseError)):null,d=(r=(t=u==null?void 0:u.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],m=d?Qt(d):null;return m?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:a,postBody:null}}return null}function wB(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<_B;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function My(){return Yn(IE)}function Ly(n){return Eo("authEvent",n.config.apiKey,n.name)}function bB(n){try{return JSON.parse(n)}catch{return null}}function IB(n){const e=om(n),t=e.link?decodeURIComponent(e.link):void 0,r=om(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return om(a).link||a||r||t||n}function om(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return ql(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=500;class SB{constructor(){this._redirectPersistence=Po,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Tp,this._overrideRedirectResult=DE}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new yB(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){pn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){mB(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),Ez(),await this._originValidation(e);const u=vB(e,r,a);await EB(e,u);const d=await cB(e,u,t),m=await dB(d);return fB(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hB(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=Oo(),u=setTimeout(async()=>{await rA(e),t.onEvent(iA())},AB),d=async y=>{clearTimeout(u);const v=await rA(e);let w=null;v&&(y!=null&&y.url)&&(w=TB(v,y.url)),t.onEvent(w||iA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,d);const m=a,p=`${l.packageName.toLowerCase()}://`;Oo().handleOpenURL=async y=>{if(y.toLowerCase().startsWith(p)&&d({url:y}),typeof m=="function")try{m(y)}catch(v){console.error(v)}}}}const RB=SB;function iA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(n,e){bt(n)._logFramework(e)}var DB="@firebase/auth-compat",xB="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=1e3;function _h(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function NB(){return _h()==="http:"||_h()==="https:"}function VD(n=wt()){return!!((_h()==="file:"||_h()==="ionic:"||_h()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function OB(){return Zy()||Xy()}function VB(){return BA()&&(document==null?void 0:document.documentMode)===11}function kB(n=wt()){return/Edge\/\d+/.test(n)}function MB(n=wt()){return VB()||kB(n)}function kD(){try{const n=self.localStorage,e=hd();if(n)return n.setItem(e,"1"),n.removeItem(e),MB()?vh():!0}catch{return PE()&&vh()}return!1}function PE(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $_(){return(NB()||zA()||VD())&&!OB()&&kD()&&!PE()}function MD(){return VD()&&typeof document<"u"}async function LB(){return MD()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},PB);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function UB(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn={LOCAL:"local",NONE:"none",SESSION:"session"},Zc=oe,LD="persistence";function zB(n,e){if(Zc(Object.values(Wn).includes(e),n,"invalid-persistence-type"),Zy()){Zc(e!==Wn.SESSION,n,"unsupported-persistence-type");return}if(Xy()){Zc(e===Wn.NONE,n,"unsupported-persistence-type");return}if(PE()){Zc(e===Wn.NONE||e===Wn.LOCAL&&vh(),n,"unsupported-persistence-type");return}Zc(e===Wn.NONE||kD(),n,"unsupported-persistence-type")}async function Uy(n){await n._initializationPromise;const e=UD(),t=Eo(LD,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function BB(n,e){const t=UD();if(!t)return[];const r=Eo(LD,n,e);switch(t.getItem(r)){case Wn.NONE:return[_u];case Wn.LOCAL:return[jh,Po];case Wn.SESSION:return[Po];default:return[]}}function UD(){var n;try{return((n=UB())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=oe;class Xs{constructor(){this.browserResolver=Yn(nB),this.cordovaResolver=Yn(RB),this.underlyingResolver=null,this._redirectPersistence=Po,this._completeRedirectFn=Tp,this._overrideRedirectResult=DE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return MD()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return FB(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await LB();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(n){return n.unwrap()}function jB(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(n){return BD(n)}function HB(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new GB(n,k4(n,e))}else if(r){const a=BD(e),l=e;a&&(l.credential=a,l.tenantId=r.tenantId||void 0,l.email=r.email||void 0,l.phoneNumber=r.phoneNumber||void 0)}}function BD(n){const{_tokenResponse:e}=n instanceof Pn?n.customData:n;if(!e)return null;if(!(n instanceof Pn)&&"temporaryProof"in e&&"phoneNumber"in e)return No.credentialFromResult(n);const t=e.providerId;if(!t||t===Yc.PASSWORD)return null;let r;switch(t){case Yc.GOOGLE:r=Yr;break;case Yc.FACEBOOK:r=Wr;break;case Yc.GITHUB:r=Xr;break;case Yc.TWITTER:r=Zr;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:d,nonce:m}=e;return!l&&!u&&!a&&!d?null:d?t.startsWith("saml.")?yu._create(t,d):li._fromParams({providerId:t,signInMethod:t,pendingToken:d,idToken:a,accessToken:l}):new Ql(t).credential({idToken:a,accessToken:l,rawNonce:m})}return n instanceof Pn?r.credentialFromError(n):r.credentialFromResult(n)}function Ln(n,e){return e.catch(t=>{throw t instanceof Pn&&HB(n,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:qB(t),additionalUserInfo:V4(t),user:Fi.getOrCreate(a)}})}async function zy(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Ln(n,t.confirm(r))}}class GB{constructor(e,t){this.resolver=t,this.auth=jB(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ln(zD(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._delegate=e,this.multiFactor=U4(e)}static getOrCreate(e){return Fi.USER_MAP.has(e)||Fi.USER_MAP.set(e,new Fi(e)),Fi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ln(this.auth,pD(this._delegate,e))}async linkWithPhoneNumber(e,t){return zy(this.auth,oz(this._delegate,e,t))}async linkWithPopup(e){return Ln(this.auth,gz(this._delegate,e,Xs))}async linkWithRedirect(e){return await Uy(bt(this.auth)),Az(this._delegate,e,Xs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ln(this.auth,gD(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return zy(this.auth,lz(this._delegate,e,t))}reauthenticateWithPopup(e){return Ln(this.auth,pz(this._delegate,e,Xs))}async reauthenticateWithRedirect(e){return await Uy(bt(this.auth)),bz(this._delegate,e,Xs)}sendEmailVerification(e){return b4(this._delegate,e)}async unlink(e){return await u4(this._delegate,e),this}updateEmail(e){return R4(this._delegate,e)}updatePassword(e){return C4(this._delegate,e)}updatePhoneNumber(e){return uz(this._delegate,e)}updateProfile(e){return S4(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return I4(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=oe;class By{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Jc(r,"invalid-api-key",{appName:e.name}),Jc(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?Xs:void 0;this._delegate=t.initialize({options:{persistence:KB(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(JL),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){BU(this._delegate,e,t)}applyActionCode(e){return m4(this._delegate,e)}checkActionCode(e){return _D(this._delegate,e)}confirmPasswordReset(e,t){return f4(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ln(this._delegate,g4(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return w4(this._delegate,e)}isSignInWithEmailLink(e){return v4(this._delegate,e)}async getRedirectResult(){Jc($_(),this._delegate,"operation-not-supported-in-this-environment");const e=await Rz(this._delegate,Xs);return e?Ln(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){CB(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:u}=sA(e,t,r);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:u}=sA(e,t,r);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return y4(this._delegate,e,t)}sendPasswordResetEmail(e,t){return d4(this._delegate,e,t||void 0)}async setPersistence(e){zB(this._delegate,e);let t;switch(e){case Wn.SESSION:t=Po;break;case Wn.LOCAL:t=await Yn(jh)._isAvailable()?jh:IE;break;case Wn.NONE:t=_u;break;default:return pn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ln(this._delegate,l4(this._delegate))}signInWithCredential(e){return Ln(this._delegate,gp(this._delegate,e))}signInWithCustomToken(e){return Ln(this._delegate,h4(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ln(this._delegate,_4(this._delegate,e,t))}signInWithEmailLink(e,t){return Ln(this._delegate,E4(this._delegate,e,t))}signInWithPhoneNumber(e,t){return zy(this._delegate,az(this._delegate,e,t))}async signInWithPopup(e){return Jc($_(),this._delegate,"operation-not-supported-in-this-environment"),Ln(this._delegate,mz(this._delegate,e,Xs))}async signInWithRedirect(e){return Jc($_(),this._delegate,"operation-not-supported-in-this-environment"),await Uy(this._delegate),Tz(this._delegate,e,Xs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return p4(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}By.Persistence=Wn;function sA(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const a=r;return{next:u=>a(u&&Fi.getOrCreate(u)),error:e,complete:t}}function KB(n,e){const t=BB(n,e);if(typeof self<"u"&&!t.includes(jh)&&t.push(jh),typeof window<"u")for(const r of[IE,Po])t.includes(r)||t.push(r);return t.includes(_u)||t.push(_u),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static credential(e,t){return No.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new No(zD(ya.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}NE.PHONE_SIGN_IN_METHOD=No.PHONE_SIGN_IN_METHOD;NE.PROVIDER_ID=No.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=oe;class QB{constructor(e,t,r=ya.app()){var a;$B((a=r.options)===null||a===void 0?void 0:a.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new iz(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB="auth-compat";function YB(n){n.INTERNAL.registerComponent(new ii(WB,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new By(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ll.EMAIL_SIGNIN,PASSWORD_RESET:Ll.PASSWORD_RESET,RECOVER_EMAIL:Ll.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ll.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ll.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ll.VERIFY_EMAIL}},EmailAuthProvider:Ia,FacebookAuthProvider:Wr,GithubAuthProvider:Xr,GoogleAuthProvider:Yr,OAuthProvider:Ql,SAMLAuthProvider:Nm,PhoneAuthProvider:NE,PhoneMultiFactorGenerator:OD,RecaptchaVerifier:QB,TwitterAuthProvider:Zr,Auth:By,AuthCredential:Vu,Error:Pn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(DB,xB)}YB(ya);const XB={apiKey:"AIzaSyDI9jQns9EplaUibTNwrw110gjwYVbiUWI",authDomain:"requirement-f1f30.firebaseapp.com",projectId:"requirement-f1f30",storageBucket:"requirement-f1f30.firebasestorage.app",messagingSenderId:"50227015383",appId:"1:50227015383:web:7349607f6e4b60b8524a92",measurementId:"G-PTRJBVG3E2"};ya.initializeApp(XB);const ui=ya.firestore(),Gf=ya.auth();var Cr=(n=>(n.USERS="users",n.PROJECTS="projects",n.REQUIREMENTS="requirements",n))(Cr||{});const FD=({onCancel:n,onSubmitEditing:e,payload:t})=>{const[r,a]=q.useState((t==null?void 0:t.name)??""),[l,u]=q.useState((t==null?void 0:t.isSharable)??!1),d=q.useRef(null),{user:m}=Xi(),p=async y=>{var w;if(y.preventDefault(),!m)return;if(r.length===0)return alert("프로젝트 이름을 입력해주세요."),(w=d.current)==null?void 0:w.focus();const v=ui.collection(Cr.PROJECTS);if(t){if(t.name===r&&t.isSharable===l){alert("변경사항이 없습니다.");return}try{await v.doc(t==null?void 0:t.id).update({name:r,isSharable:l}),alert("수정되었습니다."),n(),e&&e()}catch(R){alert(R.message)}return}try{const R={name:r,uid:m.uid,isSharable:l};await v.add(R),alert("추가되었습니다."),n(),e&&e()}catch(R){return alert(R.message)}};return q.useEffect(()=>{setTimeout(()=>{var y;(y=d.current)==null||y.focus()},100)},[]),$.jsxs("div",{className:"fixed top-0 left-0 w-full h-screen flex justify-center items-center z-50",children:[$.jsxs("form",{onSubmit:p,className:"border rounded bg-white p-5 shadow-md border-border",children:[$.jsx(Qs,{id:"name",label:"프로젝트 이름",onChange:a,ref:d,value:r,placeholder:"멋진 프로젝트 이름"}),$.jsxs("div",{className:"mt-2.5 flex gap-x-2.5 items-center",children:[$.jsx("label",{htmlFor:"share",className:"text-sm text-gray-500 cursor-pointer",children:"프로젝트를 팀원들과 공유하시겠습니까?"}),$.jsx("input",{className:"w-5 h-5",type:"checkbox",id:"share",checked:l,onChange:y=>{u(y.target.checked)}})]}),$.jsxs("div",{className:"flex gap-x-2.5 mt-5",children:[$.jsx("button",{type:"button",onClick:n,className:"flex-1/2 button cancel",children:"취소"}),$.jsx("button",{className:"w-full button",children:t?"수정":"추가"})]})]}),$.jsx("button",{onClick:n,className:"absolute w-full h-full bg-lightgray/50 -z-10"})]})},jD=n=>{const{user:e}=Xi(),[t,r]=q.useState(!1),a=()=>r(d=>!d),l=async()=>{const d=ui.collection(Cr.PROJECTS);if(confirm(`${n.name}을/를 삭제하시겠습니까?`))try{await d.doc(n==null?void 0:n.id).delete(),alert("삭제되었습니다.")}catch(m){return alert(m.message)}},u=async()=>{try{const d=`http://localhost:5173/requirements-project/project/${n==null?void 0:n.id}`;await navigator.clipboard.writeText(d),alert("요구사항 링크가 복사되었습니다.")}catch(d){alert(d.message)}};return $.jsxs("div",{className:"border flex border-border rounded items-center hover:shadow-md",children:[n!=null&&n.index?$.jsxs(Gi,{className:"flex-1 h-15 flex items-center pl-2.5",to:n.id,children:[n.index,". ",n.name]}):$.jsx("p",{className:"flex-1 pl-2",children:n.name}),$.jsxs("div",{className:"flex gap-x-2.5 p-2.5",children:[n.isSharable&&$.jsx("button",{onClick:u,className:"button cancel hover:bg-theme hover:text-white",children:"공유"}),(e==null?void 0:e.uid)===n.uid&&$.jsxs($.Fragment,{children:[$.jsx("button",{onClick:a,className:"button cancel hover:bg-theme hover:text-white",children:"수정"}),$.jsx("button",{className:"button cancel hover:bg-red-500 hover:text-white",onClick:l,children:"삭제"})]})]}),t&&$.jsx(FD,{payload:n,onCancel:a})]})},ZB=()=>{const{user:n}=Xi(),[e,t]=q.useState([]);q.useEffect(()=>{if(n)return ui.collection(Cr.PROJECTS).where("uid","==",n==null?void 0:n.uid).onSnapshot(d=>{const m=d.docs.map(p=>({...p.data(),id:p.id}));t(m)})},[n]);const[r,a]=q.useState(!1),l=()=>a(u=>!u);return n?$.jsxs("div",{className:"pt-25 px-5",children:[$.jsxs("div",{className:"flex max-w-300 items-center p-5 fixed top-[61px] left-[50%] w-full bg-white justify-between border-b border-border -translate-x-[50%]",children:[$.jsxs("h1",{className:"font-black text-xl",children:[n.name,"의 프로젝트들"]}),$.jsx("button",{onClick:l,className:"button",children:"추가"}),r&&$.jsx(FD,{onCancel:l,onSubmitEditing:()=>{}})]}),$.jsxs("div",{className:"max-w-300 mx-auto",children:[$.jsxs("p",{children:[e.length,"개의 프로젝트가 있습니다."]}),$.jsx("ul",{className:"col gap-y-2.5",children:e.map((u,d)=>$.jsx("li",{children:$.jsx(jD,{...u,index:d+1})},u==null?void 0:u.id))})]})]}):$.jsx("h1",{children:"No user"})},OE=({message:n,to:e})=>$.jsxs("div",{className:"h-screen col gap-y-5 justify-center items-center",children:[$.jsx("h1",{children:n??"No Such Project"}),$.jsx(Gi,{to:e??"/",className:"button",children:"Return and Make a new Project"})]}),qD=["계획중","진행중","완료"],JB=[{name:"홈",path:"/"},{name:"프로젝트",path:"/project"},{name:"로그인",path:"/signin"}],aA={page:"",function:"",desc:[],isSharable:!1,managers:[],createdAt:new Date().getTime(),projectId:"",progress:"",uid:""},HD=({onCancel:n,payload:e,projectId:t,uid:r,onSubmitEditing:a})=>{const[l,u]=q.useState(e??aA),d=(C,S)=>u(A=>({...A,[C]:S})),m=q.useRef(null),p=q.useRef(null),y=q.useRef(null),v=q.useRef(null),w=q.useRef(null),R=q.useRef(null),[N,M]=q.useState(""),[U,G]=q.useState(""),[J,Y]=q.useState(!1),[de,le]=q.useState(!1),te=async C=>{var z,P,$e,Je,ne,Ae;if(C.preventDefault(),J||de)return;if(l.progress.length===0)return alert("진행상태를 선택해주세요."),(z=w.current)==null?void 0:z.showPicker();if(l.page.length===0)return alert("기능 적용할 페이지를 입력해주세요."),(P=m.current)==null?void 0:P.focus();if(l.function.length===0)return alert("기능 이름을 입력해주세요."),($e=p.current)==null?void 0:$e.focus();if(l.desc.length===0)return alert("최소 1개의 상세 내용을 입력해주세요."),(Je=y.current)==null?void 0:Je.focus();if(l.managers.length===0)return alert("최소 1명의 담당자를 입력해주세요."),(ne=v.current)==null?void 0:ne.focus();const S=ui.collection(Cr.REQUIREMENTS);if(!e){const he={...l,uid:r,projectId:t};try{return await S.add(he),alert("추가되었습니다."),n(),u(aA)}catch(Ce){return alert(Ce.message)}}const A=e.progress===l.progress&&e.page===l.page&&e.function===l.function;let x=!0;for(const he of l.desc)e.desc.find(O=>O===he)||(x=!1);let V=!0;for(const he of l.managers)e.managers.find(O=>O===he)||(V=!1);if(A&&x&&V&&(e==null?void 0:e.isSharable)===(l==null?void 0:l.isSharable))return alert("변경사항이 없습니다.");try{await S.doc(e==null?void 0:e.id).update({...l,isSharable:(Ae=R.current)==null?void 0:Ae.checked}),alert("수정되었습니다."),n(),a&&a()}catch(he){alert(he.message)}};return q.useEffect(()=>{setTimeout(()=>{var C;return(C=w.current)==null?void 0:C.showPicker()},300)},[]),$.jsxs("form",{onSubmit:te,className:"col gap-y-2.5 my-2.5 max-w-100 mx-auto",children:[$.jsxs("div",{className:"flex gap-x-2.5",children:[$.jsx(Qs,{isSelectTag:!0,id:"progress",label:"진행상태",onChange:C=>{var S;d("progress",C),C.length!==0&&((S=m.current)==null||S.focus())},ref:w,value:l.progress,placeholder:"진행 상태 선택",data:qD}),$.jsx("div",{className:"flex-1",children:$.jsx(Qs,{id:"page",label:"기능 적용 페이지",onChange:C=>d("page",C),ref:m,value:l.page,placeholder:"예) Home"})})]}),$.jsx(Qs,{id:"function",label:"요구사항 기능 이름",onChange:C=>d("function",C),ref:p,value:l.function,placeholder:"요구사항 기능 예) 이미지 슬라이드"}),$.jsxs("div",{className:"ti-div",children:[$.jsx("label",{htmlFor:"desc",className:"ti-label",children:"요구사항 상세 내용"}),$.jsx("input",{id:"desc",type:"text",className:"ti-input px-1.5",placeholder:"요구사항 상세 내용 작성 예) 홈페이지에서 향기가 나게 해주세요.",value:N,onChange:C=>M(C.target.value),ref:y,onFocus:()=>Y(!0),onBlur:()=>Y(!1),onKeyDown:C=>{const{key:S,nativeEvent:A}=C;if((S==="Tab"||S==="Enter")&&!A.isComposing){const x=()=>setTimeout(()=>{var z;return(z=y.current)==null?void 0:z.focus()},100);if(N.length===0)return alert("상세 내용을 입력해주세요."),x();if(l.desc.find(z=>z===N))return alert("중복된 상세 내용입니다."),x();d("desc",[N,...l.desc]),M(""),x()}}}),l.desc.length>0&&$.jsx("ul",{className:"flex flex-wrap gap-2 mt-1.5",children:l.desc.map(C=>$.jsx("li",{className:"flex cursor-pointer",onClick:()=>u(S=>({...S,desc:S.desc.filter(A=>A!==C)})),children:$.jsxs("p",{className:"px-1 bg-lightgray rounded ti-label",children:[C," X"]})},C))})]}),$.jsxs("div",{className:"ti-div",children:[$.jsx("label",{htmlFor:"manager",className:"ti-label",children:"담당자"}),$.jsx("input",{id:"manager",type:"text",className:"ti-input px-1.5",placeholder:"담당자 이름을 입력해주세요.",value:U,onChange:C=>G(C.target.value),ref:v,onFocus:()=>le(!0),onBlur:()=>le(!1),onKeyDown:C=>{const{key:S,nativeEvent:A}=C;if((S==="Tab"||S==="Enter")&&!A.isComposing){const x=()=>setTimeout(()=>{var z;return(z=v.current)==null?void 0:z.focus()},100);if(U.length===0)return alert("담당자 이릅을 입력해주세요."),x();if(l.managers.find(z=>z===U))return alert("중복된 담당자입니다."),x();d("managers",[U,...l.managers]),G(""),x()}}}),l.managers.length>0&&$.jsx("ul",{className:"flex flex-wrap gap-2 mt-1.5",children:l.managers.map(C=>$.jsx("li",{className:"flex cursor-pointer",onClick:()=>u(S=>({...S,managers:S.managers.filter(A=>A!==C)})),children:$.jsxs("p",{className:"px-1 bg-lightgray rounded ti-label",children:[C," X"]})},C))})]}),$.jsxs("div",{className:"flex justify-between items-center",children:[$.jsx("label",{htmlFor:"share",className:"text-sm text-gray-500",children:"누구나 볼 수 있도록 공유하시겠습니까?"}),$.jsx("input",{type:"checkbox",id:"share",ref:R,className:"w-5 h-5",checked:l.isSharable,onChange:C=>d("isSharable",C.target.checked)})]}),$.jsxs("div",{className:"flex gap-x-2.5 mt-2.5",children:[$.jsx("button",{type:"button",className:"button cancel flex-1",onClick:n,children:"취소"}),$.jsx("button",{className:"button flex-2",children:e?"수정":"추가"})]})]})},GD=n=>{const{user:e}=Xi(),{page:t,desc:r,function:a,managers:l,progress:u,uid:d,projectId:m}=n,[p,y]=q.useState(!1),v=ui.collection(Cr.REQUIREMENTS).doc(n.id),w=Tu(),R=()=>{if((e==null?void 0:e.uid)!==d)return alert("PM이 아니면 수정할 수 없습니다.");w(n.id),window.scrollTo({top:0,behavior:"smooth"})},N=async()=>{try{const M=`http://localhost:5173/requirements-project/project/${m}/${n.id}`;await navigator.clipboard.writeText(M),alert("요구사항 상세내용 링크가 복사되었습니다.")}catch(M){alert(M.message)}};return $.jsxs("div",{className:"border rounded p-2.5 border-border col relative",onMouseEnter:()=>{!e||e.uid===n.id||y(!0)},onMouseLeave:()=>{y(!1)},children:[p&&$.jsxs("div",{className:"flex gap-x-2.5 absolute bottom-2.5 right-2.5",children:[n.isSharable&&$.jsx("button",{className:"button cancel hover:text-theme",onClick:N,children:"공유"}),$.jsx("button",{className:"button cancel hover:text-theme",onClick:R,children:"수정"}),$.jsx("button",{className:"hover:text-red-500 button cancel",onClick:async()=>{if(confirm("해당 요구사항을 삭제하시겠습니까?"))try{await v.delete(),alert("삭제되었습니다.")}catch(M){return alert(M.message)}},children:"삭제"})]}),$.jsxs("div",{className:"flex justify-between border-b border-border pb-2.5",children:[$.jsxs("button",{className:"font-bold flex-1 text-left cursor-pointer",onClick:R,children:[t,"/",a]}),e&&e.uid===n.uid?$.jsx("select",{value:u,onChange:async M=>{try{await v.update({progress:M.target.value})}catch(U){return alert(U.message)}},children:qD.map(M=>$.jsx("option",{children:M},M))}):$.jsx("p",{children:u})]}),$.jsx("ul",{className:"col p-2.5 gap-y-1",children:r.map((M,U)=>$.jsxs("li",{className:"font-light",children:[U+1,". ",M]},M))}),$.jsx("ul",{className:"flex flex-wrap gap-1",children:l.map(M=>$.jsx("li",{className:"p-2 rounded bg-lightgray text-sm hover:bg-gray-100 py-1",children:M},M))})]})},eF=()=>{const{projectId:n}=gA(),[e,t]=q.useState([]),[r,a]=q.useState(null),{user:l}=Xi();q.useEffect(()=>{if(n)return ui.collection(Cr.REQUIREMENTS).where("projectId","==",n).onSnapshot(y=>{const v=y.docs.map(w=>({...w.data(),id:w.id}));t(v)})},[l,n]),q.useEffect(()=>{if(n)return ui.collection(Cr.PROJECTS).doc(n).onSnapshot(y=>{const v={...y.data(),id:y.id};!v.name||!v.uid?a(null):a(v)})},[l,n]);const[u,d]=q.useState(!1),m=()=>d(p=>!p);return r?$.jsxs("div",{className:"p-5 max-w-300 mx-auto",children:[$.jsx("div",{className:"mb-2.5",children:$.jsx(Gi,{to:"/project",className:"hover:text-theme text-gray-500",children:"전체 프로젝트 보기"})}),$.jsx(jD,{...r}),u?$.jsx(HD,{uid:l==null?void 0:l.uid,projectId:r.id,onCancel:m}):$.jsx($.Fragment,{children:(l==null?void 0:l.uid)===r.uid&&$.jsx("button",{className:"button mt-5",onClick:m,children:"요구사항 추가"})}),$.jsx("ul",{className:"col gap-y-2.5 mt-5",children:e.map(p=>$.jsx("li",{children:$.jsx(GD,{...p})},p==null?void 0:p.id))})]}):$.jsx(OE,{message:"해당 프로젝트는 삭제되었거나 존재하지 않습니다.",to:"/project"})},tF=()=>{const[n,e]=q.useState(null),[t,r]=q.useState(null),{user:a}=Xi(),{rid:l,projectId:u}=gA();q.useEffect(()=>ui.collection(Cr.REQUIREMENTS).doc(l).onSnapshot(y=>{const v={...y.data(),id:y.id};v.function?r(v):r(null)}),[l]),q.useEffect(()=>{if(u)return ui.collection(Cr.PROJECTS).doc(u).onSnapshot(y=>{const v=y.data();e(v||null)})},[u]);const d=Tu(),m=()=>{d(`/project/${u}`)};return t?t.isSharable&&(!a||a.uid!==t.uid)?$.jsxs("div",{className:"p-5",children:[$.jsx("h1",{className:"mb-2.5 text-2xl",children:n==null?void 0:n.name}),$.jsx(GD,{...t})]}):$.jsxs("div",{children:[$.jsx("div",{className:"flex",children:$.jsxs("div",{className:"flex gap-x-1 items-center text-gray-500",children:[$.jsx(Gi,{to:"/project",className:"p-2.5 hover:text-theme",children:"프로젝트"}),$.jsx("p",{children:">"}),$.jsx(Gi,{to:`/project/${u}`,className:"p-2.5 hover:text-theme",children:"요구사항"})]})}),$.jsx(HD,{payload:t,onCancel:m,projectId:t.projectId,uid:a==null?void 0:a.uid,onSubmitEditing:m})]}):$.jsx(OE,{message:"존재하지 않는 페이지 입니다."})},nF=()=>{const[n,e]=q.useState(!1),t=()=>e(u=>!u),r=Tu(),{user:a,signout:l}=Xi();return q.useEffect(()=>{const u=d=>{if(n){const{key:m}=d;m==="Escape"&&e(!1)}};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[n]),$.jsxs($.Fragment,{children:[$.jsx("header",{className:"fixed top-0 left-0 w-full bg-white border-b border-border z-10",children:$.jsxs("div",{className:"flex justify-between max-w-300 mx-auto items-center p-2.5",children:[$.jsx("h1",{className:"font-black text-2xl",children:"요구사항 앱"}),$.jsx("button",{onClick:t,className:"button cancel",children:"메뉴보기"})]})}),n&&$.jsxs("nav",{className:"fixed top-0 left-0 w-full h-screen z-10 bg-black/10 col justify-center items-center",children:[$.jsx("ul",{className:"bg-white border border-border col gap-y-2.5 p-2.5 rounded shadow-md",children:JB.map(u=>a&&u.name==="로그인"?$.jsx("li",{children:$.jsx("button",{className:"button cancel w-full",onClick:async()=>{await l(),t(),alert("로그아웃되었습니다."),r("/")},children:"로그아웃"})},u.name):$.jsx("li",{children:$.jsx("button",{className:"button cancel w-full",onClick:()=>{u.path&&(r(u.path),t())},children:u.name})},u.name))}),$.jsx("span",{className:"absolute -z-10 w-full h-full",onClick:t})]}),$.jsx("main",{className:"pt-15",children:$.jsx(gN,{})})]})},rF=()=>{const{user:n}=Xi();return $.jsx(jN,{basename:"/requirements-project",children:$.jsxs(yN,{children:[$.jsx(Kr,{path:"*",element:$.jsx(OE,{message:"접근할 수 없는 페이지입니다.",to:n?"/project":"/"})}),$.jsxs(Kr,{path:"/",Component:nF,children:[$.jsx(Kr,{index:!0,Component:JN}),!n&&$.jsx(Kr,{path:"signin",Component:q1}),$.jsxs(Kr,{path:"project",children:[$.jsx(Kr,{index:!0,Component:ZB}),$.jsxs(Kr,{path:":projectId",children:[$.jsx(Kr,{index:!0,Component:eF}),$.jsx(Kr,{path:":rid",Component:tF})]})]})]})]})})},Q_=ui.collection(Cr.USERS);function iF({children:n}){const[e,t]=q.useState(IA.user),[r,a]=q.useState(!1),l=async p=>{const v=(await Q_.doc(p).get()).data();v&&t(v)};q.useEffect(()=>Gf.onAuthStateChanged(y=>{y?l(y.uid):t(null),setTimeout(()=>a(!0),1e3)}),[]);const u=async()=>{try{return Gf.signOut(),{success:!0}}catch(p){return{message:p.message}}},d=async(p,y)=>{try{return await Gf.signInWithEmailAndPassword(p,y),{success:!0}}catch(v){if(v.message==="Firebase: The supplied auth credential is incorrect, malformed or has expired. (auth/invalid-credential)."){const R=(await Q_.where("email","==",p).get()).docs.map(N=>({...N.data()}));if(!R||R.length===0)return{message:"존재하지 않는 유저입니다."}}return{message:v.message}}},m=async({email:p,jobDesc:y,name:v,password:w})=>{try{const{user:R}=await Gf.createUserWithEmailAndPassword(p,w);if(!R)return{message:"존재하지 않는 유저입니다."};const N={email:p,jobDesc:y,name:v,uid:R.uid};return await Q_.doc(R.uid).set(N),t(N),{success:!0}}catch(R){return{message:R.message}}};return $.jsx(AA.Provider,{value:{initialized:r,signin:d,signout:u,signup:m,user:e},children:n})}AP.createRoot(document.getElementById("root")).render($.jsx(q.StrictMode,{children:$.jsx(iF,{children:$.jsx(rF,{})})}));
